(()=>{var e={};e.id=811,e.ids=[811],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9383:(e,t,s)=>{"use strict";let n,i,r,a,o,l,c,u,p,d;s.r(t),s.d(t,{originalPathname:()=>NV,patchFetch:()=>NW,requestAsyncStorage:()=>NJ,routeModule:()=>NB,serverHooks:()=>NH,staticGenerationAsyncStorage:()=>NK});var h={};s.r(h),s.d(h,{GET:()=>Nq,POST:()=>Nz});var m=s(9303),f=s(8716),g=s(670);let b=function(e,t){if("function"==typeof e)return function(){return e(arguments)?t.apply(this,arguments):e=>t(e,...arguments)};switch(e){case 0:case 1:throw RangeError(`Invalid arity ${e}`);case 2:return function(e,s){return arguments.length>=2?t(e,s):function(s){return t(s,e)}};case 3:return function(e,s,n){return arguments.length>=3?t(e,s,n):function(n){return t(n,e,s)}};case 4:return function(e,s,n,i){return arguments.length>=4?t(e,s,n,i):function(i){return t(i,e,s,n)}};case 5:return function(e,s,n,i,r){return arguments.length>=5?t(e,s,n,i,r):function(r){return t(r,e,s,n,i)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);let s=arguments;return function(e){return t(e,...s)}}}},x=e=>e,y=e=>()=>e,v=y(!0),_=y(!1),w=y(void 0);function S(e,t,s,n,i,r,a,o,l){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return s(t(e));case 4:return n(s(t(e)));case 5:return i(n(s(t(e))));case 6:return r(i(n(s(t(e)))));case 7:return a(r(i(n(s(t(e))))));case 8:return o(a(r(i(n(s(t(e)))))));case 9:return l(o(a(r(i(n(s(t(e))))))));default:{let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return e}}}let k=()=>"3.4.5",E=Symbol.for(`effect/GlobalValue/globalStoreId/${k()}`);E in globalThis||(globalThis[E]=new Map);let O=globalThis[E],T=(e,t)=>(O.has(e)||O.set(e,t()),O.get(e)),I=e=>!!e,R=e=>"string"==typeof e,N=e=>"number"==typeof e,A=e=>"boolean"==typeof e,C=e=>"bigint"==typeof e,M=e=>"symbol"==typeof e,F=e=>"function"==typeof e,j=e=>void 0===e,L=e=>void 0!==e,P=e=>null!==e,U=e=>!1,D=e=>"object"==typeof e&&null!==e,$=e=>D(e)||F(e),q=b(2,(e,t)=>$(e)&&t in e),z=b(2,(e,t)=>q(e,"_tag")&&e._tag===t),B=e=>null==e,J=e=>null!=e,K=e=>e instanceof Date,H=e=>q(e,Symbol.iterator),V=e=>D(e)&&!Array.isArray(e),W=e=>q(e,"then")&&F(e.then),G=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`;Symbol.iterator;class Y{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new Y(this.self)}}class Q{_state;constructor(e,t,s,n){return B(t)&&B(e)?(t=4294967295*Math.random()>>>0,e=0):B(t)&&(t=e,e=0),B(n)&&B(s)?(n=this._state?this._state[3]:4150755663,s=this._state?this._state[2]:335903614):B(n)&&(n=s,s=0),this._state=new Int32Array([0,0,s>>>0,(1|(n||0))>>>0]),this._next(),X(this._state,this._state[0],this._state[1],e>>>0,t>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(e){this._state[0]=e[0],this._state[1]=e[1],this._state[2]=e[2],this._state[3]=1|e[3]}integer(e){if(!e)return this._next();if(((e>>>=0)&e-1)==0)return this._next()&e-1;let t=0,s=(-e>>>0)%e>>>0;for(t=this._next();t<s;t=this._next());return t%e}number(){return((67108863&this._next())*134217728+(134217727&this._next())*1)/9007199254740992}_next(){var e;let t,s,n,i;let r=this._state[0]>>>0,a=this._state[1]>>>0;e=this._state,t=(a>>>16)*32557>>>0,s=(65535&a)*19605>>>0,n=(65535&a)*32557>>>0,i=(a>>>16)*19605+((s>>>16)+(t>>>16))>>>0,(n=n+(s=s<<16>>>0)>>>0)>>>0<s>>>0&&(i=i+1>>>0),(n=n+(t=t<<16>>>0)>>>0)>>>0<t>>>0&&(i=i+1>>>0),i=(i=i+Math.imul(a,1481765933)>>>0)+Math.imul(r,1284865837)>>>0,e[0]=i,e[1]=n,X(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let o=r>>>18,l=(a>>>18|r<<14)>>>0;o=(o^r)>>>0;let c=((l=(l^a)>>>0)>>>27|o<<5)>>>0,u=r>>>27;return(c>>>u|c<<((-u>>>0&31)>>>0))>>>0}}function X(e,t,s,n,i){let r=t+n>>>0,a=s+i>>>0;a>>>0<s>>>0&&(r=r+1|0),e[0]=r,e[1]=a}let Z=Symbol.for("effect/Utils/YieldWrap");class ee{#e;constructor(e){this.#e=e}[Z](){return this.#e}}function et(e){if("object"==typeof e&&null!==e&&Z in e)return e[Z]();throw Error(G("yieldWrapGet"))}let es=T("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0})),en=(e=>{let t={[e]:e=>e()};return function(s){return t[e](s)}})("effect_internal_function"),ei=T(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),er=Symbol.for("effect/Hash"),ea=e=>{if(!0===es.enabled)return 0;switch(typeof e){case"number":return ep(e);case"bigint":return ed(e.toString(10));case"boolean":case"symbol":return ed(String(e));case"string":return ed(e);case"undefined":return ed("undefined");case"function":case"object":if(null===e)return ed("null");if(e instanceof Date)return ea(e.toISOString());if(eu(e))return e[er]();return eo(e);default:throw Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},eo=e=>(ei.has(e)||ei.set(e,ep(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),ei.get(e)),el=e=>t=>53*t^e,ec=e=>3221225471&e|e>>>1&1073741824,eu=e=>q(e,er),ep=e=>{if(e!=e||e===1/0)return 0;let t=0|e;for(t!==e&&(t^=4294967295*e);e>4294967295;)t^=e/=4294967295;return ec(e)},ed=e=>{let t=5381,s=e.length;for(;s;)t=33*t^e.charCodeAt(--s);return ec(t)},eh=(e,t)=>{let s=12289;for(let n=0;n<t.length;n++)s^=S(ed(t[n]),el(ea(e[t[n]])));return ec(s)},em=e=>eh(e,Object.keys(e)),ef=e=>{let t=6151;for(let s=0;s<e.length;s++)t=S(t,el(ea(e[s])));return ec(t)},eg=function(){if(1==arguments.length){let e=arguments[0];return function(t){return Object.defineProperty(e,er,{value:()=>t,enumerable:!1}),t}}let e=arguments[0],t=arguments[1];return Object.defineProperty(e,er,{value:()=>t,enumerable:!1}),t},eb=Symbol.for("effect/Equal");function ex(){return 1==arguments.length?e=>ey(e,arguments[0]):ey(arguments[0],arguments[1])}function ey(e,t){if(e===t)return!0;let s=typeof e;if(s!==typeof t)return!1;if("object"===s||"function"===s){if(null!==e&&null!==t){if(ev(e)&&ev(t))return!!(ea(e)===ea(t)&&e[eb](t))||!!es.enabled&&!!es.tester&&es.tester(e,t);if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString()}if(es.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((e,s)=>ey(e,t[s]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){let s=Object.keys(e),n=Object.keys(t);if(s.length===n.length){for(let n of s)if(!(n in t&&ey(e[n],t[n])))return!!es.tester&&es.tester(e,t);return!0}}return!!es.tester&&es.tester(e,t)}}return!!es.enabled&&!!es.tester&&es.tester(e,t)}let ev=e=>q(e,eb),e_=()=>ex,ew=Symbol.for("nodejs.util.inspect.custom"),eS=e=>q(e,"toJSON")&&F(e.toJSON)&&0===e.toJSON.length?e.toJSON():Array.isArray(e)?e.map(eS):e,ek=e=>JSON.stringify(e,null,2),eE=(e,t=2)=>{try{return"object"==typeof e?eO(e,t):String(e)}catch(t){return String(e)}},eO=(e,t)=>{let s=[],n=JSON.stringify(e,(e,t)=>"object"==typeof t&&null!==t?s.includes(t)?void 0:s.push(t)&&t:t,t);return s=void 0,n},eT=(e,t)=>{switch(t.length){case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let s=e;for(let e=0,n=t.length;e<n;e++)s=t[e](s);return s}}},eI="Async",eR="Commit",eN="Failure",eA="OnFailure",eC="OnSuccess",eM="OnSuccessAndFailure",eF="Success",ej="Sync",eL="UpdateRuntimeFlags",eP="While",eU="WithRuntime",eD="Yield",e$="RevertFlags",eq=Symbol.for("effect/Effect"),ez=Symbol.for("effect/Stream"),eB=Symbol.for("effect/Sink"),eJ=Symbol.for("effect/Channel"),eK={_R:e=>e,_E:e=>e,_A:e=>e,_V:k()},eH={[eq]:eK,[ez]:eK,[eB]:{_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},[eJ]:{_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},[eb](e){return this===e},[er](){return eg(this,eo(this))},[Symbol.iterator](){return new Y(new ee(this))},pipe(){return eT(this,arguments)}},eV={[er](){return eg(this,em(this))},[eb](e){let t=Object.keys(this),s=Object.keys(e);if(t.length!==s.length)return!1;for(let s of t)if(!(s in e&&ex(this[s],e[s])))return!1;return!0}},eW={...{...eH,_op:eR},...eV},eG=Symbol.for("effect/Option"),eY={...eH,[eG]:{_A:e=>e},[ew](){return this.toJSON()},toString(){return ek(this.toJSON())}},eQ=Object.assign(Object.create(eY),{_tag:"Some",_op:"Some",[eb](e){return e0(e)&&e2(e)&&ex(this.value,e.value)},[er](){return eg(this,el(ea(this._tag))(ea(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:eS(this.value)}}}),eX=ea("None"),eZ=Object.assign(Object.create(eY),{_tag:"None",_op:"None",[eb]:e=>e0(e)&&e1(e),[er]:()=>eX,toJSON(){return{_id:"Option",_tag:this._tag}}}),e0=e=>q(e,eG),e1=e=>"None"===e._tag,e2=e=>"Some"===e._tag,e5=Object.create(eZ),e3=e=>{let t=Object.create(eQ);return t.value=e,t},e4=Symbol.for("effect/Context/Tag"),e8=Symbol.for("effect/STM"),e6={...eH,_tag:"Tag",_op:"Tag",[e8]:eK,[e4]:{_Service:e=>e,_Identifier:e=>e},toString(){return ek(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[ew](){return this.toJSON()},of:e=>e,context(e){return ti(this,e)}},e7=Symbol.for("effect/Context"),e9={[e7]:{_Services:e=>e},[eb](e){if(ts(e)&&this.unsafeMap.size===e.unsafeMap.size){for(let t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!ex(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[er](){return eg(this,ep(this.unsafeMap.size))},pipe(){return eT(this,arguments)},toString(){return ek(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(eS)}},[ew](){return this.toJSON()}},te=e=>{let t=Object.create(e9);return t.unsafeMap=e,t},tt=e=>{let t=Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){let s=e.stack.split("\n");if(s.length>2){let e=s[2].match(/at (.*)/);e&&(t.message=t.message+` (defined at ${e[1]})`)}}if(t.stack){let e=t.stack.split("\n");e.splice(1,3),t.stack=e.join("\n")}return t},ts=e=>q(e,e7),tn=te(new Map),ti=(e,t)=>te(new Map([[e.key,t]])),tr=b(3,(e,t,s)=>{let n=new Map(e.unsafeMap);return n.set(t.key,s),te(n)}),ta=b(2,(e,t)=>{if(!e.unsafeMap.has(t.key))throw tt(t);return e.unsafeMap.get(t.key)}),to=b(2,(e,t)=>e.unsafeMap.has(t.key)?e3(e.unsafeMap.get(t.key)):e5),tl=b(2,(e,t)=>{let s=new Map(e.unsafeMap);for(let[e,n]of t.unsafeMap)s.set(e,n);return te(s)}),tc=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let s=Error();Error.stackTraceLimit=t;let n=Object.create(e6);return Object.defineProperty(n,"stack",{get:()=>s.stack}),n.key=e,n},tu=e=>q(e,e4),tp=()=>tn,td=e=>()=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let s=Error();function n(){}return Error.stackTraceLimit=t,Object.setPrototypeOf(n,e6),n.key=e,Object.defineProperty(n,"stack",{get:()=>s.stack}),n},th=Symbol.for("effect/Either"),tm={...eH,[th]:{_R:e=>e},[ew](){return this.toJSON()},toString(){return ek(this.toJSON())}},tf=Object.assign(Object.create(tm),{_tag:"Right",_op:"Right",[eb](e){return tb(e)&&ty(e)&&ex(this.right,e.right)},[er](){return el(ea(this._tag))(ea(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:eS(this.right)}}}),tg=Object.assign(Object.create(tm),{_tag:"Left",_op:"Left",[eb](e){return tb(e)&&tx(e)&&ex(this.left,e.left)},[er](){return el(ea(this._tag))(ea(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:eS(this.left)}}}),tb=e=>q(e,th),tx=e=>"Left"===e._tag,ty=e=>"Right"===e._tag,tv=e=>{let t=Object.create(tg);return t.left=e,t},t_=e=>{let t=Object.create(tf);return t.right=e,t},tw=b(2,(e,t)=>e1(e)?tv(t()):t_(e.value)),tS=b(2,(e,{onLeft:t,onRight:s})=>tx(e)?t(e.left):s(e.right))({onLeft:x,onRight:x}),tk=b(2,(e,t)=>{if(ty(e))return e.right;throw t(e.left)});class tE{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new tE(this.self)}}let tO=Symbol.for("effect/Micro"),tT=Symbol.for("effect/Micro/runSymbol"),tI=e=>"object"==typeof e&&null!==e&&tO in e,tR=Symbol.for("effect/Micro/Failure"),tN={_E:x};class tA extends globalThis.Error{_tag;traces;[tR];constructor(e,t,s){let n,i,r;let a=`Failure${e}`;if(t instanceof globalThis.Error){n=`(${a}) ${t.name}`;let e=(i=t.message).split("\n").length;r=t.stack?`(${a}) ${t.stack.split("\n").slice(0,e+3).join("\n")}`:`${n}: ${i}`}else n=a,i=eE(t,0),r=`${n}: ${i}`;s.length>0&&(r+=`
    ${s.join("\n    ")}`),super(i),this._tag=e,this.traces=s,this[tR]=tN,this.name=n,this.stack=r}pipe(){return eT(this,arguments)}toString(){return this.stack}[ew](){return this.stack}}class tC extends tA{error;constructor(e,t=[]){super("Expected",e,t),this.error=e}}let tM=(e,t=[])=>new tC(e,t);class tF extends tA{defect;constructor(e,t=[]){super("Unexpected",e,t),this.defect=e}}let tj=(e,t=[])=>new tF(e,t);class tL extends tA{constructor(e=[]){super("Aborted","aborted",e)}}let tP=(e=[])=>new tL(e),tU=b(2,(e,t)=>"Expected"===e._tag?tM(e.error,[...e.traces,t]):"Unexpected"===e._tag?tj(e.defect,[...e.traces,t]):tP([...e.traces,t])),tD=tv(tP()),t$=e=>tv(tM(e)),tq=e=>tv(tj(e)),tz=Symbol.for("effect/Micro/Env"),tB=Symbol.for("effect/Micro/EnvRef"),tJ={[tz]:{_R:x},pipe(){return eT(this,arguments)}},tK=e=>{let t=Object.create(tJ);return t.refs=e,t},tH=()=>{let e=new AbortController,t=Object.create(null);return t[tZ.key]=e,t[t0.key]=e.signal,tK(t)},tV=b(2,(e,t)=>t.key in e.refs?e.refs[t.key]:t.initial),tW=b(3,(e,t,s)=>{let n=Object.assign(Object.create(null),e.refs);return n[t.key]=s,tK(n)}),tG=b(2,(e,t)=>tK(t(Object.assign(Object.create(null),e.refs)))),tY=e=>t7(function(t,s){s(t_(ta(tV(t,t1),e)))}),tQ={[tB]:tB},tX=(e,t)=>T(e,()=>{let s=Object.create(tQ);return s.key=e,s.initial=t(),s}),tZ=tX("effect/Micro/currentAbortController",()=>void 0),t0=tX("effect/Micro/currentAbortSignal",()=>void 0),t1=tX("effect/Micro/currentContext",()=>tp()),t2=tX("effect/Micro/currentMaxDepthBeforeYield",()=>2048),t5=tX("effect/Micro/currentInterruptible",()=>!0),t3={...eH,_op:"Micro",[tO]:{_A:x,_E:x,_R:x},[Symbol.iterator](){return new tE(new ee(this))}},t4=T("effect/Micro/microDepthState",()=>({depth:0,maxDepthBeforeYield:t2.initial})),t8=e=>{let t=Object.create(t3);return t[tT]=e,t},t6=(e,t)=>t8(function s(n,i){if(t&&!1!==n.refs[t5.key]&&n.refs[t0.key].aborted)return i(tD);if(t4.depth++,1===t4.depth&&(t4.maxDepthBeforeYield=tV(n,t2)),t4.depth>=t4.maxDepthBeforeYield)sp(()=>s(n,i));else try{e(n,i)}catch(e){i(tq(e))}t4.depth--}),t7=e=>t6(e,!0),t9=e=>t7(function(t,s){s(e)}),se=e=>t9(t_(e)),st=e=>t9(t$(e)),ss=e=>t7(function(t,s){s(t_(e()))}),sn=e=>t7(function(t,s){e()[tT](t,s)}),si=se(void 0),sr=e=>t7(function(t,s){let n,i=!1,r=e.length>1?new AbortController:void 0,a=tV(t,t0);function o(){n?l(sw(sf(n,t9(tD)))):l(t9(tD)),void 0!==r&&r.abort()}function l(e){i||(i=!0,a.removeEventListener("abort",o),e[tT](t,s))}n=void 0===r?e(l):e(l,r.signal),i||a.addEventListener("abort",o)}),sa=e=>t7(function(t,s){try{s(t_(e.try()))}catch(t){s(t$(e.catch(t)))}}),so=e=>sr(function(t,s){try{e.try(s).then(e=>t(se(e)),s=>t(st(e.catch(s))))}catch(s){t(st(e.catch(s)))}}),sl=T("effect/Micro/yieldState",()=>({tasks:[],working:!1})),sc=()=>{let e=sl.tasks;sl.tasks=[];for(let t=0,s=e.length;t<s;t++)e[t]()},su="setImmediate"in globalThis?globalThis.setImmediate:e=>setTimeout(e,0),sp=e=>{sl.tasks.push(e),sl.working||(sl.working=!0,su(()=>{sl.working=!1,sc()}))},sd=(...e)=>t7(function(t,s){let n;let i=1===e.length?e[0]():e[1].call(e[0]),r=!1;!function e(){r=!0;try{let a=!0;for(;a;){let o=i.next(n);if(o.done)return s(t_(o.value));a=!1,et(o.value)[tT](t,function(t){"Left"===t._tag?s(t):(a=!0,n=t.right,r||e())})}}catch(e){s(tq(e))}r=!1}()}),sh=b(2,(e,t)=>t7(function(s,n){e[tT](s,function(e){n("Left"===e._tag?e:t_(t(e.right)))})})),sm=b(2,(e,t)=>t7(function(s,n){e[tT](s,function(e){if("Left"===e._tag)return n(e);t(e.right)[tT](s,n)})})),sf=b(2,(e,t)=>t7(function(s,n){e[tT](s,function(e){if("Left"===e._tag)return n(e);if(tV(s,t0).aborted)return n(tD);let i=tI(t)?t:"function"==typeof t?t(e.right):t;tI(i)?i[tT](s,n):n(t_(i))})})),sg=e=>sh(e,e=>void 0),sb=e=>t7(function(t,s){e[tT](t,function(e){s(t_(e))})}),sx=b(e=>tI(e[0]),(e,t,s)=>sm(e,e=>t(e)?se(e):st(s(e)))),sy=function(){let e=globalThis.Error.stackTraceLimit;globalThis.Error.stackTraceLimit=2;let t=new globalThis.Error;globalThis.Error.stackTraceLimit=e;let s=e=>s=>t6(function(n,i){s[tT](n,function(s){i("Left"===s._tag?tv(function(e,s){let n=t.stack;if(!n)return s;let i=n.split("\n")[2]?.trim().replace(/^at /,"");if(!i)return s;let r=i.match(/\((.*)\)$/);return tU(s,`at ${e} (${r?r[1]:i})`)}(e,s.left)):s)})},!1);return 2==arguments.length?s(arguments[1])(arguments[0]):s(arguments[0])},sv=Symbol.for("effect/Micro/MicroScope");class s_{[sv];state={_tag:"Open",finalizers:new Set};constructor(){this[sv]=sv}unsafeAddFinalizer(e){"Open"===this.state._tag&&this.state.finalizers.add(e)}addFinalizer(e){return sn(()=>"Open"===this.state._tag?(this.state.finalizers.add(e),si):e(this.state.result))}unsafeRemoveFinalizer(e){"Open"===this.state._tag&&this.state.finalizers.delete(e)}close(e){return sn(()=>{if("Open"===this.state._tag){let t=Array.from(this.state.finalizers).reverse();return this.state={_tag:"Closed",result:e},sm(sS(t,t=>sb(t(e))),e=>sg(t9(Either.all(e))))}return si})}get fork(){return ss(()=>{let e=new s_;if("Closed"===this.state._tag)return e.state=this.state,e;function t(t){return e.close(t)}return this.state.finalizers.add(t),e.unsafeAddFinalizer(e=>ss(()=>this.unsafeRemoveFinalizer(t))),e})}}let sw=e=>t6(function(t,s){let n=tG(t,function(e){return e[t5.key]=!1,e[t0.key]=new AbortController().signal,e});e[tT](n,s)},!1),sS=(e,t,s)=>t7(function(n,i){let r;let a=s?.concurrency==="inherit"?tV(n,null):s?.concurrency??1,o="unbounded"===a?Number.POSITIVE_INFINITY:Math.max(1,a),[l,c]=function(e){let t=new AbortController,s=tV(e,t0);function n(){t.abort(),s.removeEventListener("abort",n)}return s.addEventListener("abort",n),[tG(e,function(e){return e[tZ.key]=t,e[t0.key]=t.signal,e}),n]}(n),u=Array.from(e),p=u.length,d=s?.discard?void 0:Array(p),h=0,m=0,f=0,g=!1;!function e(){for(g=!0;m<o&&h<p;){let s=h,n=u[s];h++,m++;try{t(n,s)[tT](l,function(t){"Left"===t._tag?void 0===r&&(r=t,p=h,c()):void 0!==d&&(d[s]=t.right),f++,m--,f===p?i(r??Either.right(d)):!g&&m<o&&e()})}catch(e){r=tq(e),p=h,c()}}g=!1}()}),sk=function(){class e extends globalThis.Error{[tT](e,t){t(t$(this))}toString(){return this.message?`${this.name}: ${this.message}`:this.name}toJSON(){return{...this}}[ew](){let e=this.stack;return e?`${this.toString()}
${e.split("\n").slice(1).join("\n")}`:this.toString()}}return Object.assign(e.prototype,t3,eV),e}(),sE=class extends sk{constructor(e){super(),e&&Object.assign(this,e)}},sO=e=>{class t extends sE{_tag=e}return t.prototype.name=e,t},sT=Object.create(null),sI=e=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(e?sT:globalThis),sR=new Proxy(sT,{get:(e,t)=>sI()[t]??sT[t],has:(e,t)=>t in sI()||t in sT,set:(e,t,s)=>(sI(!0)[t]=s,!0),deleteProperty(e,t){if(!t)return!1;let s=sI(!0);return delete s[t],!0},ownKeys:()=>Object.keys(sI(!0))}),sN="u">typeof process&&process.env&&"production"||"",sA=[["APPVEYOR"],["AWS_AMPLIFY","AWS_APP_ID",{ci:!0}],["AZURE_PIPELINES","SYSTEM_TEAMFOUNDATIONCOLLECTIONURI"],["AZURE_STATIC","INPUT_AZURE_STATIC_WEB_APPS_API_TOKEN"],["APPCIRCLE","AC_APPCIRCLE"],["BAMBOO","bamboo_planKey"],["BITBUCKET","BITBUCKET_COMMIT"],["BITRISE","BITRISE_IO"],["BUDDY","BUDDY_WORKSPACE_ID"],["BUILDKITE"],["CIRCLE","CIRCLECI"],["CIRRUS","CIRRUS_CI"],["CLOUDFLARE_PAGES","CF_PAGES",{ci:!0}],["CODEBUILD","CODEBUILD_BUILD_ARN"],["CODEFRESH","CF_BUILD_ID"],["DRONE"],["DRONE","DRONE_BUILD_EVENT"],["DSARI"],["GITHUB_ACTIONS"],["GITLAB","GITLAB_CI"],["GITLAB","CI_MERGE_REQUEST_ID"],["GOCD","GO_PIPELINE_LABEL"],["LAYERCI"],["HUDSON","HUDSON_URL"],["JENKINS","JENKINS_URL"],["MAGNUM"],["NETLIFY"],["NETLIFY","NETLIFY_LOCAL",{ci:!1}],["NEVERCODE"],["RENDER"],["SAIL","SAILCI"],["SEMAPHORE"],["SCREWDRIVER"],["SHIPPABLE"],["SOLANO","TDDIUM"],["STRIDER"],["TEAMCITY","TEAMCITY_VERSION"],["TRAVIS"],["VERCEL","NOW_BUILDER"],["VERCEL","VERCEL",{ci:!1}],["VERCEL","VERCEL_ENV",{ci:!1}],["APPCENTER","APPCENTER_BUILD_ID"],["CODESANDBOX","CODESANDBOX_SSE",{ci:!1}],["STACKBLITZ"],["STORMKIT"],["CLEAVR"],["ZEABUR"],["CODESPHERE","CODESPHERE_APP_ID",{ci:!0}],["RAILWAY","RAILWAY_PROJECT_ID"],["RAILWAY","RAILWAY_SERVICE_ID"]],sC=function(){if(globalThis.process?.env)for(let e of sA){let t=e[1]||e[0];if(globalThis.process?.env[t])return{name:e[0].toLowerCase(),...e[2]}}return globalThis.process?.env?.SHELL==="/bin/jsh"&&globalThis.process?.versions?.webcontainer?{name:"stackblitz",ci:!1}:{name:"",ci:!1}}();function sM(e){return!!e&&"false"!==e}sC.name;let sF=globalThis.process?.platform||"",sj=(sM(sR.CI)||sC.ci,sM(globalThis.process?.stdout&&globalThis.process?.stdout.isTTY)),sL=(sM(sR.DEBUG),"test"===sN||sM(sR.TEST),"dev"===sN||"development"===sN),sP=(sM(sR.MINIMAL),/^win/i.test(sF)),sU=(/^linux/i.test(sF),/^darwin/i.test(sF),!sM(sR.NO_COLOR)&&(sM(sR.FORCE_COLOR)||(sj||sP)&&sR.TERM),(globalThis.process?.versions?.node||"").replace(/^v/,"")||null),sD=(sU?.split(".")[0],globalThis.process||Object.create(null)),s$={versions:{}},sq=new Proxy(sD,{get:(e,t)=>"env"===t?sR:t in e?e[t]:t in s$?s$[t]:void 0}),sz=globalThis.process?.release?.name==="node",sB=!!globalThis.Bun||!!globalThis.process?.versions?.bun,sJ=!!globalThis.Deno,sK=!!globalThis.fastly,sH=[[!!globalThis.Netlify,"netlify"],[!!globalThis.EdgeRuntime,"edge-light"],[globalThis.navigator?.userAgent==="Cloudflare-Workers","workerd"],[sK,"fastly"],[sJ,"deno"],[sB,"bun"],[sz,"node"],[!!globalThis.__lagon__,"lagon"]],sV=function(){let e=sH.find(e=>e[0]);if(e)return{name:e[1]}}();sV?.name;let sW={"application/andrew-inset":{source:"iana",extensions:["ez"],compressible:null},"application/applixware":{source:"apache",extensions:["aw"],compressible:null},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"],compressible:null},"application/cdmi-container":{source:"iana",extensions:["cdmic"],compressible:null},"application/cdmi-domain":{source:"iana",extensions:["cdmid"],compressible:null},"application/cdmi-object":{source:"iana",extensions:["cdmio"],compressible:null},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"],compressible:null},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/cu-seeme":{source:"apache",extensions:["cu"],compressible:null},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dicom":{source:"iana",compressible:!1,extensions:["dcm"]},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dssc+der":{source:"iana",extensions:["dssc"],compressible:null},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/exi":{source:"iana",extensions:["exi"],compressible:null},"application/express":{source:"iana",extensions:["exp"],compressible:null},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/font-tdpfr":{source:"iana",extensions:["pfr"],compressible:null},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"],compressible:null},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/hyperstudio":{source:"iana",extensions:["stk"],compressible:null},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/ipfix":{source:"iana",extensions:["ipfix"],compressible:null},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/mac-binhex40":{source:"iana",extensions:["hqx"],compressible:null},"application/mac-compactpro":{source:"apache",extensions:["cpt"],compressible:null},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"],compressible:null},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"],compressible:null},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mbox":{source:"iana",extensions:["mbox"],compressible:null},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/mp21":{source:"iana",extensions:["m21","mp21"],compressible:null},"application/mp4":{source:"iana",extensions:["mp4s","m4p"],compressible:null},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mxf":{source:"iana",extensions:["mxf"],compressible:null},"application/n-quads":{source:"iana",extensions:["nq"],compressible:null},"application/n-triples":{source:"iana",extensions:["nt"],compressible:null},"application/node":{source:"iana",extensions:["cjs"],compressible:null},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"],compressible:null},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"],compressible:null},"application/oxps":{source:"iana",extensions:["oxps"],compressible:null},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"],compressible:null},"application/pgp-signature":{source:"iana",extensions:["asc","sig"],compressible:null},"application/pics-rules":{source:"apache",extensions:["prf"],compressible:null},"application/pkcs10":{source:"iana",extensions:["p10"],compressible:null},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"],compressible:null},"application/pkcs7-signature":{source:"iana",extensions:["p7s"],compressible:null},"application/pkcs8":{source:"iana",extensions:["p8"],compressible:null},"application/pkix-attr-cert":{source:"iana",extensions:["ac"],compressible:null},"application/pkix-cert":{source:"iana",extensions:["cer"],compressible:null},"application/pkix-crl":{source:"iana",extensions:["crl"],compressible:null},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"],compressible:null},"application/pkixcmp":{source:"iana",extensions:["pki"],compressible:null},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.cww":{source:"iana",extensions:["cww"],compressible:null},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"],compressible:null},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"],compressible:null},"application/rpki-manifest":{source:"iana",extensions:["mft"],compressible:null},"application/rpki-roa":{source:"iana",extensions:["roa"],compressible:null},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scvp-cv-request":{source:"iana",extensions:["scq"],compressible:null},"application/scvp-cv-response":{source:"iana",extensions:["scs"],compressible:null},"application/scvp-vp-request":{source:"iana",extensions:["spq"],compressible:null},"application/scvp-vp-response":{source:"iana",extensions:["spp"],compressible:null},"application/sdp":{source:"iana",extensions:["sdp"],compressible:null},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/set-payment-initiation":{source:"iana",extensions:["setpay"],compressible:null},"application/set-registration-initiation":{source:"iana",extensions:["setreg"],compressible:null},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"],compressible:null},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/sparql-query":{source:"iana",extensions:["rq"],compressible:null},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/srgs":{source:"iana",extensions:["gram"],compressible:null},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamped-data":{source:"iana",extensions:["tsd"],compressible:null},"application/trig":{source:"iana",extensions:["trig"],compressible:null},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"],compressible:null},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"],compressible:null},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"],compressible:null},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"],compressible:null},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"],compressible:null},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"],compressible:null},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"],compressible:null},"application/vnd.acucobol":{source:"iana",extensions:["acu"],compressible:null},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"],compressible:null},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"],compressible:null},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"],compressible:null},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"],compressible:null},"application/vnd.age":{source:"iana",extensions:["age"],compressible:null},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"],compressible:null},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"],compressible:null},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"],compressible:null},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"],compressible:null},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"],compressible:null},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"],compressible:null},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"],compressible:null},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"],compressible:null},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"],compressible:null},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"],compressible:null},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"],compressible:null},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"],compressible:null},"application/vnd.apple.pages":{source:"iana",extensions:["pages"],compressible:null},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"],compressible:null},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"],compressible:null},"application/vnd.audiograph":{source:"iana",extensions:["aep"],compressible:null},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"],compressible:null},"application/vnd.bmi":{source:"iana",extensions:["bmi"],compressible:null},"application/vnd.businessobjects":{source:"iana",extensions:["rep"],compressible:null},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"],compressible:null},"application/vnd.cinderella":{source:"iana",extensions:["cdy"],compressible:null},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"],compressible:null},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"],compressible:null},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"],compressible:null},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"],compressible:null},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"],compressible:null},"application/vnd.commonspace":{source:"iana",extensions:["csp"],compressible:null},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"],compressible:null},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"],compressible:null},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"],compressible:null},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"],compressible:null},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"],compressible:null},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"],compressible:null},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"],compressible:null},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"],compressible:null},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"],compressible:null},"application/vnd.curl.car":{source:"apache",extensions:["car"],compressible:null},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"],compressible:null},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"],compressible:null},"application/vnd.dbf":{source:"iana",extensions:["dbf"],compressible:null},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"],compressible:null},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"],compressible:null},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"],compressible:null},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"],compressible:null},"application/vnd.dna":{source:"iana",extensions:["dna"],compressible:null},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"],compressible:null},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"],compressible:null},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"],compressible:null},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"],compressible:null},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"],compressible:null},"application/vnd.dvb.service":{source:"iana",extensions:["svc"],compressible:null},"application/vnd.dynageo":{source:"iana",extensions:["geo"],compressible:null},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"],compressible:null},"application/vnd.enliven":{source:"iana",extensions:["nml"],compressible:null},"application/vnd.epson.esf":{source:"iana",extensions:["esf"],compressible:null},"application/vnd.epson.msf":{source:"iana",extensions:["msf"],compressible:null},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"],compressible:null},"application/vnd.epson.salt":{source:"iana",extensions:["slt"],compressible:null},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"],compressible:null},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"],compressible:null},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"],compressible:null},"application/vnd.fdf":{source:"iana",extensions:["fdf"],compressible:null},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"],compressible:null},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"],compressible:null},"application/vnd.flographit":{source:"iana",extensions:["gph"],compressible:null},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"],compressible:null},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"],compressible:null},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"],compressible:null},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"],compressible:null},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"],compressible:null},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"],compressible:null},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"],compressible:null},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"],compressible:null},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"],compressible:null},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"],compressible:null},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"],compressible:null},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"],compressible:null},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"],compressible:null},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"],compressible:null},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"],compressible:null},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"],compressible:null},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"],compressible:null},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"],compressible:null},"application/vnd.geonext":{source:"iana",extensions:["gxt"],compressible:null},"application/vnd.geoplan":{source:"iana",extensions:["g2w"],compressible:null},"application/vnd.geospace":{source:"iana",extensions:["g3w"],compressible:null},"application/vnd.gmx":{source:"iana",extensions:["gmx"],compressible:null},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"],compressible:null},"application/vnd.groove-account":{source:"iana",extensions:["gac"],compressible:null},"application/vnd.groove-help":{source:"iana",extensions:["ghf"],compressible:null},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"],compressible:null},"application/vnd.groove-injector":{source:"iana",extensions:["grv"],compressible:null},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"],compressible:null},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"],compressible:null},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"],compressible:null},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"],compressible:null},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"],compressible:null},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"],compressible:null},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"],compressible:null},"application/vnd.hp-hps":{source:"iana",extensions:["hps"],compressible:null},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"],compressible:null},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"],compressible:null},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"],compressible:null},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"],compressible:null},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"],compressible:null},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"],compressible:null},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"],compressible:null},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"],compressible:null},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"],compressible:null},"application/vnd.igloader":{source:"iana",extensions:["igl"],compressible:null},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"],compressible:null},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"],compressible:null},"application/vnd.insors.igm":{source:"iana",extensions:["igm"],compressible:null},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"],compressible:null},"application/vnd.intergeo":{source:"iana",extensions:["i2g"],compressible:null},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"],compressible:null},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"],compressible:null},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"],compressible:null},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"],compressible:null},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"],compressible:null},"application/vnd.jam":{source:"iana",extensions:["jam"],compressible:null},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"],compressible:null},"application/vnd.jisp":{source:"iana",extensions:["jisp"],compressible:null},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"],compressible:null},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"],compressible:null},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"],compressible:null},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"],compressible:null},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"],compressible:null},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"],compressible:null},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"],compressible:null},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"],compressible:null},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"],compressible:null},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"],compressible:null},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"],compressible:null},"application/vnd.kidspiration":{source:"iana",extensions:["kia"],compressible:null},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"],compressible:null},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"],compressible:null},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"],compressible:null},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"],compressible:null},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"],compressible:null},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"],compressible:null},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"],compressible:null},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"],compressible:null},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"],compressible:null},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"],compressible:null},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"],compressible:null},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"],compressible:null},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"],compressible:null},"application/vnd.mcd":{source:"iana",extensions:["mcd"],compressible:null},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"],compressible:null},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"],compressible:null},"application/vnd.mfer":{source:"iana",extensions:["mwf"],compressible:null},"application/vnd.mfmp":{source:"iana",extensions:["mfm"],compressible:null},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"],compressible:null},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"],compressible:null},"application/vnd.mif":{source:"iana",extensions:["mif"],compressible:null},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"],compressible:null},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"],compressible:null},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"],compressible:null},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"],compressible:null},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"],compressible:null},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"],compressible:null},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"],compressible:null},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"],compressible:null},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"],compressible:null},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"],compressible:null},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"],compressible:null},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"],compressible:null},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"],compressible:null},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"],compressible:null},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"],compressible:null},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"],compressible:null},"application/vnd.ms-ims":{source:"iana",extensions:["ims"],compressible:null},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"],compressible:null},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"],compressible:null},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"],compressible:null},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"],compressible:null},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"],compressible:null},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"],compressible:null},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"],compressible:null},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"],compressible:null},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"],compressible:null},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"],compressible:null},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"],compressible:null},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"],compressible:null},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"],compressible:null},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"],compressible:null},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.mseq":{source:"iana",extensions:["mseq"],compressible:null},"application/vnd.musician":{source:"iana",extensions:["mus"],compressible:null},"application/vnd.muvee.style":{source:"iana",extensions:["msty"],compressible:null},"application/vnd.mynfc":{source:"iana",extensions:["taglet"],compressible:null},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"],compressible:null},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"],compressible:null},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"],compressible:null},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"],compressible:null},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"],compressible:null},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"],compressible:null},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"],compressible:null},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"],compressible:null},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"],compressible:null},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"],compressible:null},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"],compressible:null},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"],compressible:null},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"],compressible:null},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"],compressible:null},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"],compressible:null},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"],compressible:null},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"],compressible:null},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"],compressible:null},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"],compressible:null},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"],compressible:null},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"],compressible:null},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"],compressible:null},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"],compressible:null},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"],compressible:null},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"],compressible:null},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"],compressible:null},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"],compressible:null},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"],compressible:null},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"],compressible:null},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"],compressible:null},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"],compressible:null},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"],compressible:null},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"],compressible:null},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"],compressible:null},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"],compressible:null},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"],compressible:null},"application/vnd.pawaafile":{source:"iana",extensions:["paw"],compressible:null},"application/vnd.pg.format":{source:"iana",extensions:["str"],compressible:null},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"],compressible:null},"application/vnd.picsel":{source:"iana",extensions:["efif"],compressible:null},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"],compressible:null},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"],compressible:null},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"],compressible:null},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"],compressible:null},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"],compressible:null},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"],compressible:null},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"],compressible:null},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"],compressible:null},"application/vnd.rar":{source:"iana",extensions:["rar"],compressible:null},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"],compressible:null},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"],compressible:null},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"],compressible:null},"application/vnd.rim.cod":{source:"apache",extensions:["cod"],compressible:null},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"],compressible:null},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"],compressible:null},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"],compressible:null},"application/vnd.seemail":{source:"iana",extensions:["see"],compressible:null},"application/vnd.sema":{source:"iana",extensions:["sema"],compressible:null},"application/vnd.semd":{source:"iana",extensions:["semd"],compressible:null},"application/vnd.semf":{source:"iana",extensions:["semf"],compressible:null},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"],compressible:null},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"],compressible:null},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"],compressible:null},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"],compressible:null},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"],compressible:null},"application/vnd.smaf":{source:"iana",extensions:["mmf"],compressible:null},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"],compressible:null},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"],compressible:null},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"],compressible:null},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"],compressible:null},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"],compressible:null},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"],compressible:null},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"],compressible:null},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"],compressible:null},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"],compressible:null},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"],compressible:null},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"],compressible:null},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"],compressible:null},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"],compressible:null},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"],compressible:null},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"],compressible:null},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"],compressible:null},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"],compressible:null},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"],compressible:null},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"],compressible:null},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"],compressible:null},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"],compressible:null},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"],compressible:null},"application/vnd.svd":{source:"iana",extensions:["svd"],compressible:null},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"],compressible:null},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"],compressible:null},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"],compressible:null},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"],compressible:null},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"],compressible:null},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"],compressible:null},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"],compressible:null},"application/vnd.trueapp":{source:"iana",extensions:["tra"],compressible:null},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"],compressible:null},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"],compressible:null},"application/vnd.umajin":{source:"iana",extensions:["umj"],compressible:null},"application/vnd.unity":{source:"iana",extensions:["unityweb"],compressible:null},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.vcx":{source:"iana",extensions:["vcx"],compressible:null},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"],compressible:null},"application/vnd.visionary":{source:"iana",extensions:["vis"],compressible:null},"application/vnd.vsf":{source:"iana",extensions:["vsf"],compressible:null},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"],compressible:null},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"],compressible:null},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"],compressible:null},"application/vnd.webturbo":{source:"iana",extensions:["wtb"],compressible:null},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"],compressible:null},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"],compressible:null},"application/vnd.wqd":{source:"iana",extensions:["wqd"],compressible:null},"application/vnd.wt.stf":{source:"iana",extensions:["stf"],compressible:null},"application/vnd.xara":{source:"iana",extensions:["xar"],compressible:null},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"],compressible:null},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"],compressible:null},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"],compressible:null},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"],compressible:null},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"],compressible:null},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"],compressible:null},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"],compressible:null},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"],compressible:null},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"],compressible:null},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/widget":{source:"iana",extensions:["wgt"],compressible:null},"application/winhlp":{source:"apache",extensions:["hlp"],compressible:null},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"],compressible:null},"application/x-ace-compressed":{source:"apache",extensions:["ace"],compressible:null},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"],compressible:null},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"],compressible:null},"application/x-authorware-map":{source:"apache",extensions:["aam"],compressible:null},"application/x-authorware-seg":{source:"apache",extensions:["aas"],compressible:null},"application/x-bcpio":{source:"apache",extensions:["bcpio"],compressible:null},"application/x-bittorrent":{source:"apache",extensions:["torrent"],compressible:null},"application/x-blorb":{source:"apache",extensions:["blb","blorb"],compressible:null},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"],compressible:null},"application/x-cdlink":{source:"apache",extensions:["vcd"],compressible:null},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"],compressible:null},"application/x-chat":{source:"apache",extensions:["chat"],compressible:null},"application/x-chess-pgn":{source:"apache",extensions:["pgn"],compressible:null},"application/x-cocoa":{source:"nginx",extensions:["cco"],compressible:null},"application/x-conference":{source:"apache",extensions:["nsc"],compressible:null},"application/x-cpio":{source:"apache",extensions:["cpio"],compressible:null},"application/x-csh":{source:"apache",extensions:["csh"],compressible:null},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"],compressible:null},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"],compressible:null},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],compressible:null},"application/x-doom":{source:"apache",extensions:["wad"],compressible:null},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"],compressible:null},"application/x-eva":{source:"apache",extensions:["eva"],compressible:null},"application/x-font-bdf":{source:"apache",extensions:["bdf"],compressible:null},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"],compressible:null},"application/x-font-linux-psf":{source:"apache",extensions:["psf"],compressible:null},"application/x-font-pcf":{source:"apache",extensions:["pcf"],compressible:null},"application/x-font-snf":{source:"apache",extensions:["snf"],compressible:null},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"],compressible:null},"application/x-freearc":{source:"apache",extensions:["arc"],compressible:null},"application/x-futuresplash":{source:"apache",extensions:["spl"],compressible:null},"application/x-gca-compressed":{source:"apache",extensions:["gca"],compressible:null},"application/x-glulx":{source:"apache",extensions:["ulx"],compressible:null},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"],compressible:null},"application/x-gramps-xml":{source:"apache",extensions:["gramps"],compressible:null},"application/x-gtar":{source:"apache",extensions:["gtar"],compressible:null},"application/x-hdf":{source:"apache",extensions:["hdf"],compressible:null},"application/x-install-instructions":{source:"apache",extensions:["install"],compressible:null},"application/x-iso9660-image":{source:"apache",extensions:["iso"],compressible:null},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"],compressible:null},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"],compressible:null},"application/x-makeself":{source:"nginx",extensions:["run"],compressible:null},"application/x-mie":{source:"apache",extensions:["mie"],compressible:null},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"],compressible:null},"application/x-ms-application":{source:"apache",extensions:["application"],compressible:null},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"],compressible:null},"application/x-ms-wmd":{source:"apache",extensions:["wmd"],compressible:null},"application/x-ms-wmz":{source:"apache",extensions:["wmz"],compressible:null},"application/x-ms-xbap":{source:"apache",extensions:["xbap"],compressible:null},"application/x-msaccess":{source:"apache",extensions:["mdb"],compressible:null},"application/x-msbinder":{source:"apache",extensions:["obd"],compressible:null},"application/x-mscardfile":{source:"apache",extensions:["crd"],compressible:null},"application/x-msclip":{source:"apache",extensions:["clp"],compressible:null},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"],compressible:null},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"],compressible:null},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"],compressible:null},"application/x-msmoney":{source:"apache",extensions:["mny"],compressible:null},"application/x-mspublisher":{source:"apache",extensions:["pub"],compressible:null},"application/x-msschedule":{source:"apache",extensions:["scd"],compressible:null},"application/x-msterminal":{source:"apache",extensions:["trm"],compressible:null},"application/x-mswrite":{source:"apache",extensions:["wri"],compressible:null},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"],compressible:null},"application/x-nzb":{source:"apache",extensions:["nzb"],compressible:null},"application/x-perl":{source:"nginx",extensions:["pl","pm"],compressible:null},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"],compressible:null},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"],compressible:null},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"],compressible:null},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"],compressible:null},"application/x-research-info-systems":{source:"apache",extensions:["ris"],compressible:null},"application/x-sea":{source:"nginx",extensions:["sea"],compressible:null},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"],compressible:null},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"],compressible:null},"application/x-sql":{source:"apache",extensions:["sql"],compressible:null},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"],compressible:null},"application/x-subrip":{source:"apache",extensions:["srt"],compressible:null},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"],compressible:null},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"],compressible:null},"application/x-t3vm-image":{source:"apache",extensions:["t3"],compressible:null},"application/x-tads":{source:"apache",extensions:["gam"],compressible:null},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"],compressible:null},"application/x-tex":{source:"apache",extensions:["tex"],compressible:null},"application/x-tex-tfm":{source:"apache",extensions:["tfm"],compressible:null},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"],compressible:null},"application/x-tgif":{source:"apache",extensions:["obj"],compressible:null},"application/x-ustar":{source:"apache",extensions:["ustar"],compressible:null},"application/x-wais-source":{source:"apache",extensions:["src"],compressible:null},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"],compressible:null},"application/x-xfig":{source:"apache",extensions:["fig"],compressible:null},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"],compressible:null},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"],compressible:null},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"],compressible:null},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/adpcm":{source:"apache",extensions:["adp"],compressible:null},"audio/amr":{source:"iana",extensions:["amr"],compressible:null},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"],compressible:null},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"],compressible:null},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/s3m":{source:"apache",extensions:["s3m"],compressible:null},"audio/silk":{source:"apache",extensions:["sil"],compressible:null},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"],compressible:null},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"],compressible:null},"audio/vnd.dra":{source:"iana",extensions:["dra"],compressible:null},"audio/vnd.dts":{source:"iana",extensions:["dts"],compressible:null},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"],compressible:null},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"],compressible:null},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"],compressible:null},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"],compressible:null},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"],compressible:null},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"],compressible:null},"audio/vnd.rip":{source:"iana",extensions:["rip"],compressible:null},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"],compressible:null},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"],compressible:null},"audio/x-m4a":{source:"nginx",extensions:["m4a"],compressible:null},"audio/x-matroska":{source:"apache",extensions:["mka"],compressible:null},"audio/x-mpegurl":{source:"apache",extensions:["m3u"],compressible:null},"audio/x-ms-wax":{source:"apache",extensions:["wax"],compressible:null},"audio/x-ms-wma":{source:"apache",extensions:["wma"],compressible:null},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"],compressible:null},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"],compressible:null},"audio/x-realaudio":{source:"nginx",extensions:["ra"],compressible:null},"audio/x-wav":{source:"apache",extensions:["wav"],compressible:null},"audio/x-gsm":{source:"apache",extensions:["gsm"],compressible:null},"audio/xm":{source:"apache",extensions:["xm"],compressible:null},"chemical/x-cdx":{source:"apache",extensions:["cdx"],compressible:null},"chemical/x-cif":{source:"apache",extensions:["cif"],compressible:null},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"],compressible:null},"chemical/x-cml":{source:"apache",extensions:["cml"],compressible:null},"chemical/x-csml":{source:"apache",extensions:["csml"],compressible:null},"chemical/x-xyz":{source:"apache",extensions:["xyz"],compressible:null},"font/collection":{source:"iana",extensions:["ttc"],compressible:null},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"],compressible:null},"font/woff2":{source:"iana",extensions:["woff2"],compressible:null},"image/aces":{source:"iana",extensions:["exr"],compressible:null},"image/avci":{source:"iana",extensions:["avci"],compressible:null},"image/avcs":{source:"iana",extensions:["avcs"],compressible:null},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"],compressible:null},"image/dicom-rle":{source:"iana",extensions:["drle"],compressible:null},"image/emf":{source:"iana",extensions:["emf"],compressible:null},"image/fits":{source:"iana",extensions:["fits"],compressible:null},"image/g3fax":{source:"iana",extensions:["g3"],compressible:null},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"],compressible:null},"image/heic-sequence":{source:"iana",extensions:["heics"],compressible:null},"image/heif":{source:"iana",extensions:["heif"],compressible:null},"image/heif-sequence":{source:"iana",extensions:["heifs"],compressible:null},"image/hej2k":{source:"iana",extensions:["hej2"],compressible:null},"image/hsj2":{source:"iana",extensions:["hsj2"],compressible:null},"image/ief":{source:"iana",extensions:["ief"],compressible:null},"image/jls":{source:"iana",extensions:["jls"],compressible:null},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe","jfif","pjpeg","pjp"]},"image/jph":{source:"iana",extensions:["jph"],compressible:null},"image/jphc":{source:"iana",extensions:["jhc"],compressible:null},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"],compressible:null},"image/jxra":{source:"iana",extensions:["jxra"],compressible:null},"image/jxrs":{source:"iana",extensions:["jxrs"],compressible:null},"image/jxs":{source:"iana",extensions:["jxs"],compressible:null},"image/jxsc":{source:"iana",extensions:["jxsc"],compressible:null},"image/jxsi":{source:"iana",extensions:["jxsi"],compressible:null},"image/jxss":{source:"iana",extensions:["jxss"],compressible:null},"image/ktx":{source:"iana",extensions:["ktx"],compressible:null},"image/ktx2":{source:"iana",extensions:["ktx2"],compressible:null},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"],compressible:null},"image/prs.pti":{source:"iana",extensions:["pti"],compressible:null},"image/sgi":{source:"apache",extensions:["sgi"],compressible:null},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"],compressible:null},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"],compressible:null},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"],compressible:null},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"],compressible:null},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"],compressible:null},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"],compressible:null},"image/vnd.dwg":{source:"iana",extensions:["dwg"],compressible:null},"image/vnd.dxf":{source:"iana",extensions:["dxf"],compressible:null},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"],compressible:null},"image/vnd.fpx":{source:"iana",extensions:["fpx"],compressible:null},"image/vnd.fst":{source:"iana",extensions:["fst"],compressible:null},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"],compressible:null},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"],compressible:null},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"],compressible:null},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"],compressible:null},"image/vnd.net-fpx":{source:"iana",extensions:["npx"],compressible:null},"image/vnd.pco.b16":{source:"iana",extensions:["b16"],compressible:null},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"],compressible:null},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"],compressible:null},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"],compressible:null},"image/vnd.xiff":{source:"iana",extensions:["xif"],compressible:null},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"],compressible:null},"image/webp":{source:"apache",extensions:["webp"],compressible:null},"image/wmf":{source:"iana",extensions:["wmf"],compressible:null},"image/x-3ds":{source:"apache",extensions:["3ds"],compressible:null},"image/x-cmu-raster":{source:"apache",extensions:["ras"],compressible:null},"image/x-cmx":{source:"apache",extensions:["cmx"],compressible:null},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"],compressible:null},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"],compressible:null},"image/x-mrsid-image":{source:"apache",extensions:["sid"],compressible:null},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"],compressible:null},"image/x-pict":{source:"apache",extensions:["pic","pct"],compressible:null},"image/x-portable-anymap":{source:"apache",extensions:["pnm"],compressible:null},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"],compressible:null},"image/x-portable-graymap":{source:"apache",extensions:["pgm"],compressible:null},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"],compressible:null},"image/x-rgb":{source:"apache",extensions:["rgb"],compressible:null},"image/x-tga":{source:"apache",extensions:["tga"],compressible:null},"image/x-xbitmap":{source:"apache",extensions:["xbm"],compressible:null},"image/x-xpixmap":{source:"apache",extensions:["xpm"],compressible:null},"image/x-xwindowdump":{source:"apache",extensions:["xwd"],compressible:null},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"],compressible:null},"message/global":{source:"iana",extensions:["u8msg"],compressible:null},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"],compressible:null},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"],compressible:null},"message/global-headers":{source:"iana",extensions:["u8hdr"],compressible:null},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"],compressible:null},"model/3mf":{source:"iana",extensions:["3mf"],compressible:null},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"],compressible:null},"model/obj":{source:"iana",extensions:["obj"],compressible:null},"model/step":{source:"iana",compressible:!1,extensions:[".p21",".stp",".step",".stpnc",".210"]},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"],compressible:null},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"],compressible:null},"model/vnd.gdl":{source:"iana",extensions:["gdl"],compressible:null},"model/vnd.gtw":{source:"iana",extensions:["gtw"],compressible:null},"model/vnd.mts":{source:"iana",extensions:["mts"],compressible:null},"model/vnd.opengex":{source:"iana",extensions:["ogex"],compressible:null},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"],compressible:null},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"],compressible:null},"model/vnd.sap.vds":{source:"iana",extensions:["vds"],compressible:null},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"],compressible:null},"model/vnd.vtu":{source:"iana",extensions:["vtu"],compressible:null},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"],compressible:null},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"],compressible:null},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"],compressible:null},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"],compressible:null},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/prs.lines.tag":{source:"iana",extensions:["dsc"],compressible:null},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/sgml":{source:"iana",extensions:["sgml","sgm"],compressible:null},"text/shex":{source:"iana",extensions:["shex"],compressible:null},"text/spdx":{source:"iana",extensions:["spdx"],compressible:null},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"],compressible:null},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"],compressible:null},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.curl":{source:"iana",extensions:["curl"],compressible:null},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"],compressible:null},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"],compressible:null},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"],compressible:null},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"],compressible:null},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"],compressible:null},"text/vnd.fly":{source:"iana",extensions:["fly"],compressible:null},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"],compressible:null},"text/vnd.graphviz":{source:"iana",extensions:["gv"],compressible:null},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"],compressible:null},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"],compressible:null},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"],compressible:null},"text/vnd.wap.wml":{source:"iana",extensions:["wml"],compressible:null},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"],compressible:null},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"],compressible:null},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"],compressible:null},"text/x-component":{source:"nginx",extensions:["htc"],compressible:null},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"],compressible:null},"text/x-java-source":{source:"apache",extensions:["java"],compressible:null},"text/x-nfo":{source:"apache",extensions:["nfo"],compressible:null},"text/x-opml":{source:"apache",extensions:["opml"],compressible:null},"text/x-pascal":{source:"apache",extensions:["p","pas"],compressible:null},"text/x-setext":{source:"apache",extensions:["etx"],compressible:null},"text/x-sfv":{source:"apache",extensions:["sfv"],compressible:null},"text/x-uuencode":{source:"apache",extensions:["uu"],compressible:null},"text/x-vcalendar":{source:"apache",extensions:["vcs"],compressible:null},"text/x-vcard":{source:"apache",extensions:["vcf"],compressible:null},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"],compressible:null},"video/3gpp2":{source:"iana",extensions:["3g2"],compressible:null},"video/h261":{source:"iana",extensions:["h261"],compressible:null},"video/h263":{source:"iana",extensions:["h263"],compressible:null},"video/h264":{source:"iana",extensions:["h264"],compressible:null},"video/iso.segment":{source:"iana",extensions:["m4s"],compressible:null},"video/jpeg":{source:"iana",extensions:["jpgv"],compressible:null},"video/jpm":{source:"apache",extensions:["jpm","jpgm"],compressible:null},"video/mj2":{source:"iana",extensions:["mj2","mjp2"],compressible:null},"video/mp2t":{source:"iana",extensions:["ts"],compressible:null},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"],compressible:null},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"],compressible:null},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"],compressible:null},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"],compressible:null},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"],compressible:null},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"],compressible:null},"video/vnd.fvt":{source:"iana",extensions:["fvt"],compressible:null},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"],compressible:null},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"],compressible:null},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"],compressible:null},"video/vnd.vivo":{source:"iana",extensions:["viv"],compressible:null},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"],compressible:null},"video/x-fli":{source:"apache",extensions:["fli"],compressible:null},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"],compressible:null},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"],compressible:null},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"],compressible:null},"video/x-ms-vob":{source:"apache",extensions:["vob"],compressible:null},"video/x-ms-wm":{source:"apache",extensions:["wm"],compressible:null},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"],compressible:null},"video/x-ms-wvx":{source:"apache",extensions:["wvx"],compressible:null},"video/x-msvideo":{source:"apache",extensions:["avi"],compressible:null},"video/x-sgi-movie":{source:"apache",extensions:["movie"],compressible:null},"video/x-smv":{source:"apache",extensions:["smv"],compressible:null},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"],compressible:null}},sG={},sY={},sQ=!1;class sX extends sO("InvalidRouteConfig"){constructor(e,t){super({reason:t?`Expected route config to have a ${t} for key ${e} but none was found.`:`Encountered an invalid route config during backfilling. ${e} was not found.`})}}class sZ extends sO("UnknownFileType"){constructor(e){super({reason:`Could not determine type for ${e}`})}}class s0 extends sO("InvalidFileType"){constructor(e,t){super({reason:`File type ${e} not allowed for ${t}`})}}class s1 extends sO("InvalidFileSize"){constructor(e){super({reason:`Invalid file size: ${e}`})}}class s2 extends sO("InvalidURL"){constructor(e){super({reason:`Failed to parse '${e}' as a URL.`})}}class s5 extends sO("RetryError"){}class s3 extends sO("FetchError"){}class s4 extends sO("InvalidJson"){}class s8 extends sO("BadRequestError"){getMessage(){return V(this.json)&&"string"==typeof this.json.message?this.json.message:this.message}}function s6(e){return"image"===e?"4MB":"video"===e?"16MB":"audio"===e||"blob"===e?"8MB":"pdf"===e?"4MB":"text"===e?"64KB":"4MB"}let s7=e=>{if(Array.isArray(e))return se(e.reduce((e,t)=>(e[t]={maxFileSize:s6(t),maxFileCount:1,minFileCount:1,contentDisposition:"inline"},e),{}));let t={};for(let s of ni(e)){let n=e[s];if(!n)return st(new sX(s));let i={maxFileSize:s6(s),maxFileCount:1,minFileCount:1,contentDisposition:"inline"};t[s]={...i,...n}}return se(t)},s9=(e,t)=>{let s=function(e){if(!e||"string"!=typeof e)return!1;let t=(function(e){let t=e.lastIndexOf(".");return t<0?"":e.substring(t)})("x."+e).toLowerCase().substring(1);return!!t&&((function(e,t){if(sQ)return;sQ=!0;let s=["nginx","apache",void 0,"iana"];Object.keys(sW).forEach(n=>{let i=sW[n],r=i.extensions;if(r?.length)for(let a of(e[n]=r,r)){if(t[a]){let e=s.indexOf(sW[t[a]].source),n=s.indexOf(i.source);if("application/octet-stream"!==t[a]&&(e>n||e===n&&t[a].startsWith("application/")))continue}t[a]=n}})}(sG,sY),sY)[t]||!1)}(e);if(!s)return t.includes("blob")?se("blob"):st(new sZ(e));if(t.some(e=>e.includes("/"))&&t.includes(s))return se(s);let n="application/pdf"===s.toLowerCase()?"pdf":s.split("/")[0];return t.includes(n)?se(n):t.includes("blob")?se("blob"):st(new s0(n,e))};function ne(e){let t="https://uploadthing.com";return sq.env.CUSTOM_INFRA_URL&&(t=sq.env.CUSTOM_INFRA_URL),`${t}${e}`}let nt=["B","KB","MB","GB"],ns=e=>{let t=RegExp(`^(\\d+)(\\.\\d+)?\\s*(${nt.join("|")})$`,"i"),s=e.match(t);if(!s)return st(new s1(e));let n=parseFloat(s[1]),i=s[3].toUpperCase();return se(Math.floor(n*Math.pow(1024,nt.indexOf(i))))},nn=e=>{if(0===e||-1===e)return"0B";let t=Math.floor(Math.log(e)/Math.log(1e3));return`${(e/Math.pow(1e3,t)).toFixed(2)}${nt[t]}`};function ni(e){return Object.keys(e)}function nr(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}let na=e=>sd(function*(){let t="undefined"!=typeof window?window.location.origin:sq.env?.VERCEL_URL?`https://${sq.env.VERCEL_URL}`:"http://localhost:3000",s=yield*sa({try:()=>new URL(e??"/api/uploadthing",t),catch:()=>new s2(e??"/api/uploadthing")});return"/"===s.pathname&&(s.pathname="/api/uploadthing"),s}),no={BAD_REQUEST:400,NOT_FOUND:404,FORBIDDEN:403,INTERNAL_SERVER_ERROR:500,INTERNAL_CLIENT_ERROR:500,TOO_LARGE:413,TOO_SMALL:400,TOO_MANY_FILES:400,KEY_TOO_LONG:400,URL_GENERATION_FAILED:500,UPLOAD_FAILED:500,MISSING_ENV:500,FILE_LIMIT_EXCEEDED:500};class nl extends sE{constructor(e){let t="string"==typeof e?{code:"INTERNAL_SERVER_ERROR",message:e}:e;super({message:t.message??function(e,t){return"string"==typeof e?e:e instanceof Error||e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message?e.message:t??"An unknown error occurred"}(t.cause,t.code)}),this._tag="UploadThingError",this.name="UploadThingError",this.code=t.code,this.data=t.data,t.cause instanceof Error?this.cause=t.cause:nr(t.cause)&&"number"==typeof t.cause.status&&"string"==typeof t.cause.statusText?this.cause=Error(`Response ${t.cause.status} ${t.cause.statusText}`):"string"==typeof t.cause?this.cause=Error(t.cause):this.cause=t.cause}static toObject(e){return{code:e.code,message:e.message,data:e.data}}static serialize(e){return JSON.stringify(nl.toObject(e))}}class nc extends td("uploadthing/FetchContext")(){}let nu=(e,t)=>sm(tY(nc),({fetch:s,baseHeaders:n})=>{let i=new Headers(t?.headers??[]);for(let[e,t]of Object.entries(n))"string"==typeof t&&i.set(e,t);let r={url:e.toString(),method:t?.method,body:t?.body,headers:Object.fromEntries(i)};return so({try:n=>s(e,{...t,headers:i,signal:n}),catch:e=>new s3({error:e instanceof Error?{...e,name:e.name,message:e.message,stack:e.stack}:e,input:r})}).pipe(sh(e=>Object.assign(e,{requestUrl:r.url})),sy("fetch"))}),np=e=>so({try:async()=>({json:await e.json(),ok:e.ok,status:e.status}),catch:t=>new s4({error:t,input:e.requestUrl})}).pipe(sx(({ok:e})=>e,({json:t,status:s})=>new s8({status:s,message:`Request to ${e.requestUrl} failed with status ${s}`,json:t})),sh(({json:e})=>e),sy("parseJson")),nd=e=>so({try:()=>e.json(),catch:t=>new s4({error:t,input:e.url})}).pipe(sy("parseRequestJson")),nh="hmac-sha256=",nm={name:"HMAC",hash:"SHA-256"},nf=async(e,t)=>{let s=new TextEncoder,n=await crypto.subtle.importKey("raw",s.encode(t),nm,!1,["sign"]),i=await crypto.subtle.sign(nm,n,s.encode(e)).then(e=>Buffer.from(e).toString("hex"));return`${nh}${i}`},ng=async(e,t,s)=>{let n=t?.slice(nh.length);if(!n)return!1;let i=new TextEncoder,r=await crypto.subtle.importKey("raw",i.encode(s),nm,!1,["verify"]);return await crypto.subtle.verify(nm,r,Uint8Array.from(Buffer.from(n,"hex")),i.encode(e))},nb=e=>(t,s)=>t===s||e(t,s),nx=(e,t)=>e===t,ny=b(2,(e,t)=>nb((s,n)=>e(t(s),t(n)))),nv=ny(nx,e=>e.getTime()),n_=e=>nb((t,s)=>{if(t.length!==s.length)return!1;for(let n=0;n<t.length;n++)if(!e(t[n],s[n]))return!1;return!0}),nw=e=>e.length>0,nS=()=>e5,nk=b(2,(e,{onNone:t,onSome:s})=>e1(e)?t():s(e.value)),nE=b(2,(e,t)=>e1(e)?t():e.value),nO=b(2,(e,t)=>e1(e)?t():e),nT=b(2,(e,t)=>e1(e)?e3(t()):e),nI=e=>null==e?nS():e3(e),nR=nE(w),nN=e=>(...t)=>{try{return e3(e(...t))}catch(e){return nS()}},nA=b(2,(e,t)=>{if(e2(e))return e.value;throw t()})(()=>Error("getOrThrow called on a None")),nC=b(2,(e,t)=>e1(e)?nS():e3(t(e.value))),nM=b(2,(e,t)=>e1(e)?nS():t(e.value)),nF=b(2,(e,t)=>e1(e)?nS():t(e.value)),nj=b(2,(e,t)=>nF(e,e=>t(e)?e3(e):e5)),nL=e=>nb((t,s)=>e1(t)?e1(s):!e1(s)&&e(t.value,s.value)),nP=(n=e_(),b(2,(e,t)=>!e1(e)&&n(e.value,t)));Symbol.iterator,()=>nU;let nU={next:()=>({done:!0,value:void 0})},nD=e=>(t,s)=>t===s?0:e(t,s),n$=nD((e,t)=>e<t?-1:1),nq=((e,t)=>e<t?-1:1,b(2,(e,t)=>nD((s,n)=>e(t(s),t(n)))));Object.fromEntries,(e,t)=>{let s=[];for(let n of nz(e))s.push(t(n,e[n]));return s};let nz=e=>Object.keys(e),nB=(...e)=>e,nJ=e=>Array(e),nK=e=>Array.isArray(e)?e:Array.from(e),nH=b(2,(e,{onEmpty:t,onNonEmpty:s})=>nX(e)?s(n3(e),n6(e)):t()),nV=b(2,(e,t)=>[t,...e]),nW=b(2,(e,t)=>[...e,t]),nG=b(2,(e,t)=>nK(e).concat(nK(t))),nY=Array.isArray,nQ=e=>0===e.length,nX=nw,nZ=(e,t)=>e<0||e>=t.length,n0=(e,t)=>Math.floor(Math.min(Math.max(0,e),t.length)),n1=b(2,(e,t)=>{let s=Math.floor(t);return nZ(s,e)?nS():e3(e[s])}),n2=b(2,(e,t)=>{let s=Math.floor(t);if(nZ(s,e))throw Error(`Index ${s} out of bounds`);return e[s]}),n5=n1(0),n3=n2(0),n4=e=>nX(e)?e3(n8(e)):nS(),n8=e=>e[e.length-1],n6=e=>e.slice(1),n7=(e,t)=>{let s=0;for(let n of e){if(!t(n,s))break;s++}return s},n9=b(2,(e,t)=>io(e,n7(e,t))),ie=b(2,(e,t)=>{let s=nK(e);return s.slice(n0(t,s),s.length)}),it=e=>Array.from(e).reverse(),is=b(2,(e,t)=>{let s=Array.from(e);return s.sort(t),s}),ii=b(2,(e,t)=>ir(e,t,nB)),ir=b(3,(e,t,s)=>{let n=nK(e),i=nK(t);if(nX(n)&&nX(i)){let e=[s(n3(n),n3(i))],t=Math.min(n.length,i.length);for(let r=1;r<t;r++)e[r]=s(n[r],i[r]);return e}return[]}),ia=e_(),io=b(2,(e,t)=>{let s=Array.from(e),n=Math.floor(t);return nX(s)?n>=1?il(s,n):[[],s]:[s,[]]}),il=b(2,(e,t)=>{let s=Math.max(1,Math.floor(t));return s>=e.length?[ic(e),[]]:[nV(e.slice(1,s),n3(e)),e.slice(s)]}),ic=e=>e.slice(),iu=b(3,(e,t,s)=>{let n=nK(e),i=nK(t);return nX(n)?nX(i)?i_(s)(nG(n,i)):n:i}),ip=b(2,(e,t)=>iu(e,t,ia)),id=()=>[],ih=e=>[e],im=b(2,(e,t)=>e.map(t)),ig=b(2,(e,t)=>{if(nQ(e))return[];let s=[];for(let n=0;n<e.length;n++){let i=t(e[n],n);for(let e=0;e<i.length;e++)s.push(i[e])}return s}),ib=ig(x),ix=b(2,(e,t)=>{let s=nK(e),n=[];for(let e=0;e<s.length;e++){let i=t(s[e],e);e2(i)&&n.push(i.value)}return n}),iy=b(3,(e,t,s)=>nK(e).reduce((e,t,n)=>s(e,t,n),t)),iv=((e,t,s)=>nK(e).reduceRight((e,t,n)=>s(e,t,n),t),(e,t)=>{let s;let n=[],i=e;for(;e2(s=t(i));){let[e,t]=s.value;n.push(e),i=t}return n}),i_=b(2,(e,t)=>{let s=nK(e);if(nX(s)){let e=[n3(s)];for(let n of n6(s))e.every(e=>!t(n,e))&&e.push(n);return e}return[]}),iw=e=>i_(e,e_()),iS=b(2,(e,t)=>nK(e).join(t)),ik=Symbol.for("effect/BigDecimal"),iE={[ik]:ik,[er](){let e=iC(this);return S(ea(e.value),el(ep(e.scale)),eg(this))},[eb](e){return iO(e)&&ij(this,e)},toString(){return`BigDecimal(${iU(this)})`},toJSON(){return{_id:"BigDecimal",value:String(this.value),scale:this.scale}},[ew](){return this.toJSON()},pipe(){return eT(this,arguments)}},iO=e=>q(e,ik),iT=(e,t)=>{let s=Object.create(iE);return s.value=e,s.scale=t,s},iI=(e,t)=>{if(e!==iR&&e%iN===iR)throw RangeError("Value must be normalized");let s=iT(e,t);return s.normalized=s,s},iR=BigInt(0),iN=BigInt(10),iA=iI(iR,0),iC=e=>{if(void 0===e.normalized){if(e.value===iR)e.normalized=iA;else{let t=`${e.value}`,s=0;for(let e=t.length-1;e>=0;e--)if("0"===t[e])s++;else break;0===s&&(e.normalized=e);let n=BigInt(t.substring(0,t.length-s)),i=e.scale-s;e.normalized=iI(n,i)}}return e.normalized},iM=(e,t)=>t>e.scale?iT(e.value*iN**BigInt(t-e.scale),t):t<e.scale?iT(e.value/iN**BigInt(e.scale-t),t):e,iF=nb((e,t)=>e.scale>t.scale?iM(t,e.scale).value===e.value:e.scale<t.scale?iM(e,t.scale).value===t.value:e.value===t.value),ij=b(2,(e,t)=>iF(e,t)),iL=e=>{let[t,s=""]=`${e}`.split(".");return iT(BigInt(`${t}${s}`),s.length)},iP=e=>{let t,s;let n=e.search(/\./);if(-1!==n){let i=e.slice(0,n),r=e.slice(n+1);t=`${i}${r}`,s=r.length}else t=e,s=0;return""===t?e3(iA):/^(?:\+|-)?\d+$/.test(t)?e3(iT(BigInt(t),s)):nS()},iU=e=>{let t,s;let n=e.value<iR,i=n?`${e.value}`.substring(1):`${e.value}`;if(e.scale>=i.length)t="0",s="0".repeat(e.scale-i.length)+i;else{let n=i.length-e.scale;if(n>i.length){let e=n-i.length;t=`${i}${"0".repeat(e)}`,s=""}else s=i.slice(n),t=i.slice(0,n)}let r=""===s?t:`${t}.${s}`;return n?`-${r}`:r},iD=e=>Number(iU(e)),i$=e=>e>BigInt(Number.MAX_SAFE_INTEGER)||e<BigInt(Number.MIN_SAFE_INTEGER)?nS():e3(Number(e)),iq=e=>{try{return""===e.trim()?nS():e3(BigInt(e))}catch(e){return nS()}},iz=e=>{if(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)return nS();try{return e3(BigInt(e))}catch(e){return nS()}},iB=e=>!e,iJ=Symbol.for("effect/Chunk"),iK=[],iH=nb((e,t)=>e.length===t.length&&i2(e).every((e,s)=>ex(e,i6(t,s)))),iV={[iJ]:{_A:e=>e},toString(){return ek(this.toJSON())},toJSON(){return{_id:"Chunk",values:i2(this).map(eS)}},[ew](){return this.toJSON()},[eb](e){return iG(e)&&iH(this,e)},[er](){return eg(this,ef(i2(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return iK[Symbol.iterator]();default:return i2(this)[Symbol.iterator]()}},pipe(){return eT(this,arguments)}},iW=e=>{let t=Object.create(iV);switch(t.backing=e,e._tag){case"IEmpty":t.length=0,t.depth=0,t.left=t,t.right=t;break;case"IConcat":t.length=e.left.length+e.right.length,t.depth=1+Math.max(e.left.depth,e.right.depth),t.left=e.left,t.right=e.right;break;case"IArray":t.length=e.array.length,t.depth=0,t.left=iY,t.right=iY;break;case"ISingleton":t.length=1,t.depth=0,t.left=iY,t.right=iY;break;case"ISlice":t.length=e.length,t.depth=e.chunk.depth+1,t.left=iY,t.right=iY}return t},iG=e=>q(e,iJ),iY=iW({_tag:"IEmpty"}),iQ=()=>iY,iX=(...e)=>1===e.length?iZ(e[0]):i8(e),iZ=e=>iW({_tag:"ISingleton",a:e}),i0=e=>iG(e)?e:iW({_tag:"IArray",array:nK(e)}),i1=(e,t,s)=>{switch(e.backing._tag){case"IArray":!function(e,t,s,n,i){for(let t=0;t<Math.min(e.length,0+i);t++)s[n+t-0]=e[t]}(e.backing.array,0,t,s,e.length);break;case"IConcat":i1(e.left,t,s),i1(e.right,t,s+e.left.length);break;case"ISingleton":t[s]=e.backing.a;break;case"ISlice":{let n=0,i=s;for(;n<e.length;)t[i]=i6(e,n),n+=1,i+=1}}},i2=e=>{switch(e.backing._tag){case"IEmpty":return iK;case"IArray":return e.backing.array;default:{let t=Array(e.length);return i1(e,t,0),e.backing={_tag:"IArray",array:t},e.left=iY,e.right=iY,e.depth=0,t}}},i5=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return iW({_tag:"IArray",array:it(e.backing.array)});case"IConcat":return iW({_tag:"IConcat",left:i5(e.backing.right),right:i5(e.backing.left)});case"ISlice":return i4(it(i2(e)))}},i3=b(2,(e,t)=>t<0||t>=e.length?nS():e3(i6(e,t))),i4=e=>iW({_tag:"IArray",array:e}),i8=e=>i4(e),i6=b(2,(e,t)=>{switch(e.backing._tag){case"IEmpty":throw Error("Index out of bounds");case"ISingleton":if(0!==t)throw Error("Index out of bounds");return e.backing.a;case"IArray":if(t>=e.length||t<0)throw Error("Index out of bounds");return e.backing.array[t];case"IConcat":return t<e.left.length?i6(e.left,t):i6(e.right,t-e.left.length);case"ISlice":return i6(e.backing.chunk,t+e.backing.offset)}}),i7=b(2,(e,t)=>rt(e,iZ(t))),i9=b(2,(e,t)=>rt(iZ(t),e)),re=b(2,(e,t)=>{if(t<=0)return e;if(t>=e.length)return iY;switch(e.backing._tag){case"ISlice":return iW({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":if(t>e.left.length)return re(e.right,t-e.left.length);return iW({_tag:"IConcat",left:re(e.left,t),right:e.right});default:return iW({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}}),rt=b(2,(e,t)=>{if("IEmpty"===e.backing._tag)return t;if("IEmpty"===t.backing._tag)return e;let s=t.depth-e.depth;if(1>=Math.abs(s))return iW({_tag:"IConcat",left:e,right:t});if(s<-1){if(e.left.depth>=e.right.depth){let s=rt(e.right,t);return iW({_tag:"IConcat",left:e.left,right:s})}{let s=rt(e.right.right,t);if(s.depth===e.depth-3){let t=iW({_tag:"IConcat",left:e.right.left,right:s});return iW({_tag:"IConcat",left:e.left,right:t})}{let t=iW({_tag:"IConcat",left:e.left,right:e.right.left});return iW({_tag:"IConcat",left:t,right:s})}}}if(t.right.depth>=t.left.depth)return iW({_tag:"IConcat",left:rt(e,t.left),right:t.right});{let s=rt(e,t.left.left);if(s.depth===t.depth-3){let e=iW({_tag:"IConcat",left:s,right:t.left.right});return iW({_tag:"IConcat",left:e,right:t.right})}{let e=iW({_tag:"IConcat",left:t.left.right,right:t.right});return iW({_tag:"IConcat",left:s,right:e})}}}),rs=e=>0===e.length,rn=e=>e.length>0,ri=i3(0),rr=e=>i6(e,0),ra=e=>re(e,1);function ro(e,t){var s;return s=e&t-1,s-=s>>1&1431655765,s=(s=(858993459&s)+(s>>2&858993459))+(s>>4)&252645135,s+=s>>8,127&(s+=s>>16)}let rl=(e,t)=>({value:e,previous:t});function rc(e,t,s,n){let i=n;if(!e){let e=n.length;i=Array(e);for(let t=0;t<e;++t)i[t]=n[t]}return i[t]=s,i}function ru(e,t,s){let n=s.length-1,i=0,r=0,a=s;if(e)i=r=t;else for(a=Array(n);i<t;)a[r++]=s[i++];for(++i;i<=n;)a[r++]=s[i++];return e&&(a.length=n),a}class rp{_tag="EmptyNode";modify(e,t,s,n,i,r){let a=s(nS());return e1(a)?new rp:(++r.value,new rm(e,n,i,a))}}function rd(e){return z(e,"EmptyNode")}function rh(e,t){return!rd(e)&&t===e.edit}class rm{edit;hash;key;value;_tag="LeafNode";constructor(e,t,s,n){this.edit=e,this.hash=t,this.key=s,this.value=n}modify(e,t,s,n,i,r){if(ex(i,this.key)){let t=s(this.value);return t===this.value?this:e1(t)?(--r.value,new rp):rh(this,e)?(this.value=t,this):new rm(e,n,i,t)}let a=s(nS());return e1(a)?this:(++r.value,rx(e,t,this.hash,this,n,new rm(e,n,i,a)))}}class rf{edit;hash;children;_tag="CollisionNode";constructor(e,t,s){this.edit=e,this.hash=t,this.children=s}modify(e,t,s,n,i,r){if(n===this.hash){let t=rh(this,e),n=this.updateCollisionList(t,e,this.hash,this.children,s,i,r);return n===this.children?this:n.length>1?new rf(e,this.hash,n):n[0]}let a=s(nS());return e1(a)?this:(++r.value,rx(e,t,this.hash,this,n,new rm(e,n,i,a)))}updateCollisionList(e,t,s,n,i,r,a){let o=n.length;for(let l=0;l<o;++l){let o=n[l];if("key"in o&&ex(r,o.key)){let c=o.value,u=i(c);if(u===c)return n;if(e1(u))return--a.value,ru(e,l,n);return rc(e,l,new rm(t,s,r,u),n)}}let l=i(nS());return e1(l)?n:(++a.value,rc(e,o,new rm(t,s,r,l),n))}}class rg{edit;mask;children;_tag="IndexedNode";constructor(e,t,s){this.edit=e,this.mask=t,this.children=s}modify(e,t,s,n,i,r){let a;let o=this.mask,l=this.children,c=n>>>t&31,u=1<<c,p=ro(o,u),d=o&u,h=rh(this,e);if(!d){let a=new rp().modify(e,t+5,s,n,i,r);return a?l.length>=16?function(e,t,s,n,i){let r=[],a=n,o=0;for(let e=0;a;++e)1&a&&(r[e]=i[o++]),a>>>=1;return r[t]=s,new rb(e,o+1,r)}(e,c,a,o,l):new rg(e,o|u,function(e,t,s,n){let i=n.length;if(e){let e=i;for(;e>=t;)n[e--]=n[e];return n[t]=s,n}let r=0,a=0,o=Array(i+1);for(;r<t;)o[a++]=n[r++];for(o[t]=s;r<i;)o[++a]=n[r++];return o}(h,p,a,l)):this}let m=l[p],f=m.modify(e,t+5,s,n,i,r);if(m===f)return this;let g=o;if(rd(f)){var b;if(!(g&=~u))return new rp;if(l.length<=2&&(rd(b=l[1^p])||"LeafNode"===b._tag||"CollisionNode"===b._tag))return l[1^p];a=ru(h,p,l)}else a=rc(h,p,f,l);return h?(this.mask=g,this.children=a,this):new rg(e,g,a)}}class rb{edit;size;children;_tag="ArrayNode";constructor(e,t,s){this.edit=e,this.size=t,this.children=s}modify(e,t,s,n,i,r){let a,o=this.size,l=this.children,c=n>>>t&31,u=l[c],p=(u||new rp).modify(e,t+5,s,n,i,r);if(u===p)return this;let d=rh(this,e);if(rd(u)&&!rd(p))++o,a=rc(d,c,p,l);else if(!rd(u)&&rd(p)){if(--o<=8)return function(e,t,s,n){let i=Array(t-1),r=0,a=0;for(let e=0,t=n.length;e<t;++e)if(e!==s){let t=n[e];t&&!rd(t)&&(i[r++]=t,a|=1<<e)}return new rg(e,a,i)}(e,o,c,l);a=rc(d,c,new rp,l)}else a=rc(d,c,p,l);return d?(this.size=o,this.children=a,this):new rb(e,o,a)}}function rx(e,t,s,n,i,r){let a;let o=t;for(;;){let t=function(e,t,s,n,i,r){if(s===i)return new rf(e,s,[r,n]);let a=s>>>t&31,o=i>>>t&31;return a===o?t=>new rg(e,1<<a|1<<o,[t]):new rg(e,1<<a|1<<o,a<o?[n,r]:[r,n])}(e,o,s,n,i,r);if("function"==typeof t)a=rl(t,a),o+=5;else{let e=t;for(;null!=a;)e=a.value(e),a=a.previous;return e}}}let ry="effect/HashMap",rv=Symbol.for(ry),r_={[rv]:rv,[Symbol.iterator](){return new rS(this,(e,t)=>[e,t])},[er](){let e=ea(ry);for(let t of this)e^=S(ea(t[0]),el(ea(t[1])));return eg(this,e)},[eb](e){if(rR(e)){if(e._size!==this._size)return!1;for(let t of this){let s=S(e,rA(t[0],ea(t[0])));if(e1(s)||!ex(t[1],s.value))return!1}return!0}return!1},toString(){return ek(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(eS)}},[ew](){return this.toJSON()},pipe(){return eT(this,arguments)}},rw=(e,t,s,n)=>{let i=Object.create(r_);return i._editable=e,i._edit=t,i._root=s,i._size=n,i};class rS{map;f;v;constructor(e,t){this.map=e,this.f=t,this.v=rE(this.map._root,this.f,void 0)}next(){if(e1(this.v))return{done:!0,value:void 0};let e=this.v.value;return this.v=rk(e.cont),{done:!1,value:e.value}}[Symbol.iterator](){return new rS(this.map,this.f)}}let rk=e=>e?rO(e[0],e[1],e[2],e[3],e[4]):nS(),rE=(e,t,s)=>{switch(e._tag){case"LeafNode":if(e2(e.value))return e3({value:t(e.key,e.value.value),cont:s});return rk(s);case"CollisionNode":case"ArrayNode":case"IndexedNode":{let n=e.children;return rO(n.length,n,0,t,s)}default:return rk(s)}},rO=(e,t,s,n,i)=>{for(;s<e;){let r=t[s++];if(r&&!rd(r))return rE(r,n,[e,t,s,n,i])}return rk(i)},rT=rw(!1,0,new rp,0),rI=()=>rT,rR=e=>q(e,rv),rN=b(2,(e,t)=>rA(e,t,ea(t))),rA=b(3,(e,t,s)=>{let n=e._root,i=0;for(;;)switch(n._tag){case"LeafNode":return ex(t,n.key)?n.value:nS();case"CollisionNode":if(s===n.hash){let e=n.children;for(let s=0,n=e.length;s<n;++s){let n=e[s];if("key"in n&&ex(t,n.key))return n.value}}return nS();case"IndexedNode":{let e=1<<(s>>>i&31);if(n.mask&e){n=n.children[ro(n.mask,e)],i+=5;break}return nS()}case"ArrayNode":if(n=n.children[s>>>i&31]){i+=5;break}return nS();default:return nS()}}),rC=b(2,(e,t)=>e2(rA(e,t,ea(t)))),rM=b(3,(e,t,s)=>rD(e,t,()=>e3(s))),rF=b(3,(e,t,s)=>e._editable?(e._root=t,e._size=s,e):t===e._root?e:rw(e._editable,e._edit,t,s)),rj=e=>new rS(e,e=>e),rL=e=>e._size,rP=e=>rw(!0,e._edit+1,e._root,e._size),rU=e=>(e._editable=!1,e),rD=((e,t)=>{let s=rP(e);return t(s),rU(s)},b(3,(e,t,s)=>r$(e,t,ea(t),s))),r$=b(4,(e,t,s,n)=>{let i={value:e._size},r=e._root.modify(e._editable?e._edit:NaN,0,n,s,t,i);return S(e,rF(r,i.value))}),rq=b(2,(e,t)=>rD(e,t,nS)),rz=b(2,(e,t)=>rJ(e,rI(),(e,s,n)=>rM(e,n,t(s,n)))),rB=b(2,(e,t)=>rJ(e,void 0,(e,s,n)=>t(s,n))),rJ=b(3,(e,t,s)=>{let n;let i=e._root;if("LeafNode"===i._tag)return e2(i.value)?s(t,i.value.value,i.key):t;if("EmptyNode"===i._tag)return t;let r=[i.children];for(;n=r.pop();)for(let e=0,i=n.length;e<i;){let i=n[e++];i&&!rd(i)&&("LeafNode"===i._tag?e2(i.value)&&(t=s(t,i.value.value,i.key)):r.push(i.children))}return t}),rK="effect/HashSet",rH=Symbol.for(rK),rV={[rH]:rH,[Symbol.iterator](){return rj(this._keyMap)},[er](){return eg(this,el(ea(this._keyMap))(ea(rK)))},[eb](e){return!!rG(e)&&rL(this._keyMap)===rL(e._keyMap)&&ex(this._keyMap,e._keyMap)},toString(){return ek(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(eS)}},[ew](){return this.toJSON()},pipe(){return eT(this,arguments)}},rW=e=>{let t=Object.create(rV);return t._keyMap=e,t},rG=e=>q(e,rH),rY=rW(rI()),rQ=()=>rY,rX=b(2,(e,t)=>rC(e._keyMap,t)),rZ=b(2,(e,t)=>{let s=!1;for(let n of e)if(s=t(n))break;return s}),r0=b(2,(e,t)=>!rZ(e,e=>!t(e))),r1=e=>rW(rP(e._keyMap)),r2=e=>(e._keyMap._editable=!1,e),r5=b(2,(e,t)=>{let s=r1(e);return t(s),r2(s)}),r3=b(2,(e,t)=>e._keyMap._editable?(rM(t,!0)(e._keyMap),e):rW(rM(t,!0)(e._keyMap))),r4=b(2,(e,t)=>e._keyMap._editable?(rq(t)(e._keyMap),e):rW(rq(t)(e._keyMap))),r8=b(2,(e,t)=>r5(e,e=>{for(let s of t)r4(e,s)})),r6=b(2,(e,t)=>r5(rQ(),s=>{for(let n of(r7(e,e=>r3(s,e)),t))r3(s,n)})),r7=b(2,(e,t)=>rB(e._keyMap,(e,s)=>t(s))),r9=b(3,(e,t,s)=>rJ(e._keyMap,t,(e,t,n)=>s(e,n))),ae=e=>{let t=r1(rQ());for(let s of e)r3(t,s);return r2(t)},at=(...e)=>{let t=r1(rQ());for(let s of e)r3(t,s);return r2(t)},as=e=>rL(e._keyMap),an=Symbol.for("effect/MutableRef"),ai={[an]:an,toString(){return ek(this.toJSON())},toJSON(){return{_id:"MutableRef",current:eS(this.current)}},[ew](){return this.toJSON()},pipe(){return eT(this,arguments)}},ar=e=>{let t=Object.create(ai);return t.current=e,t},aa=b(3,(e,t,s)=>!!ex(t,e.current)&&(e.current=s,!0)),ao=e=>e.current,al=b(2,(e,t)=>(e.current=t,e)),ac="effect/FiberId",au=Symbol.for(ac),ap="None",ad="Runtime",ah="Composite",am=ed(`${ac}-${ap}`);class af{[au]=au;_tag=ap;id=-1;startTimeMillis=-1;[er](){return am}[eb](e){return ay(e)&&e._tag===ap}toString(){return ek(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[ew](){return this.toJSON()}}class ag{id;startTimeMillis;[au]=au;_tag=ad;constructor(e,t){this.id=e,this.startTimeMillis=t}[er](){return eg(this,ed(`${ac}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[eb](e){return ay(e)&&e._tag===ad&&this.id===e.id&&this.startTimeMillis===e.startTimeMillis}toString(){return ek(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[ew](){return this.toJSON()}}class ab{left;right;[au]=au;_tag=ah;constructor(e,t){this.left=e,this.right=t}_hash;[er](){return S(ed(`${ac}-${this._tag}`),el(ea(this.left)),el(ea(this.right)),eg(this))}[eb](e){return ay(e)&&e._tag===ah&&ex(this.left,e.left)&&ex(this.right,e.right)}toString(){return ek(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,left:eS(this.left),right:eS(this.right)}}[ew](){return this.toJSON()}}let ax=new af,ay=e=>q(e,au),av=e=>e._tag===ap||S(aO(e),r0(e=>av(e))),a_=b(2,(e,t)=>e._tag===ap?t:t._tag===ap?e:new ab(e,t)),aw=b(2,(e,t)=>av(e)?t:e),aS=e=>{switch(e._tag){case ap:return rQ();case ad:return at(e.id);case ah:return S(aS(e.left),r6(aS(e.right)))}},ak=T(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>ar(0)),aE=e=>Array.from(aS(e)).map(e=>`#${e}`).join(","),aO=e=>{switch(e._tag){case ap:return rQ();case ad:return at(e);case ah:return S(aO(e.left),r6(aO(e.right)))}},aT=ax,aI=(e,t)=>new ag(e,t),aR=(e,t)=>new ab(e,t),aN=ay,aA=()=>{let e=ao(ak);return S(ak,al(e+1)),new ag(e,Date.now())},aC=e=>{let t=rP(rI());for(let s of e)rM(t,s[0],s[1]);return rU(t)},aM=e=>e&&rd(e._root),aF=Symbol.for("effect/List"),aj=e=>nK(e),aL=ny(n_(ex),aj),aP={[aF]:aF,_tag:"Cons",toString(){return ek(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:aj(this).map(eS)}},[ew](){return this.toJSON()},[eb](e){return aq(e)&&this._tag===e._tag&&aL(this,e)},[er](){return eg(this,ef(aj(this)))},[Symbol.iterator](){let e=!1,t=this;return{next(){if(e)return this.return();if("Nil"===t._tag)return e=!0,this.return();let s=t.head;return t=t.tail,{done:e,value:s}},return:t=>(e||(e=!0),{done:!0,value:t})}},pipe(){return eT(this,arguments)}},aU=(e,t)=>{let s=Object.create(aP);return s.head=e,s.tail=t,s},aD=ed("Nil"),a$=Object.create({[aF]:aF,_tag:"Nil",toString(){return ek(this.toJSON())},toJSON:()=>({_id:"List",_tag:"Nil"}),[ew](){return this.toJSON()},[er]:()=>aD,[eb](e){return aq(e)&&this._tag===e._tag},[Symbol.iterator]:()=>({next:()=>({done:!0,value:void 0})}),pipe(){return eT(this,arguments)}}),aq=e=>q(e,aF),az=e=>"Nil"===e._tag,aB=e=>"Cons"===e._tag,aJ=(e,t)=>aU(e,t),aK=()=>a$,aH=e=>aU(e,a$),aV=b(2,(e,t)=>aG(t,e)),aW=b(2,(e,t)=>aJ(t,e)),aG=b(2,(e,t)=>{if(az(e))return t;if(az(t))return e;{let s=aU(t.head,e),n=s,i=t.tail;for(;!az(i);){let t=aU(i.head,e);n.tail=t,n=t,i=i.tail}return s}}),aY=b(3,(e,t,s)=>{let n=t,i=e;for(;!az(i);)n=s(n,i.head),i=i.tail;return n}),aQ=e=>{let t=aK(),s=e;for(;!az(s);)t=aW(t,s.head),s=s.tail;return t},aX="Expected List to be non-empty",aZ=e=>{if(az(e))throw Error(aX);return e.head},a0=e=>{if(az(e))throw Error(aX);return e.tail};Array.prototype;let a1=function(){function e(e){e&&Object.assign(this,e)}return e.prototype=eV,e}(),a2=e=>Object.assign(Object.create(eV),e),a5=Symbol.for("effect/DifferChunkPatch");function a3(e){return e}({...a1.prototype,[a5]:{_Value:a3,_Patch:a3}});let a4=Symbol.for("effect/DifferContextPatch");function a8(e){return e}let a6={...a1.prototype,[a4]:{_Value:a8,_Patch:a8}},a7=Object.create(Object.assign(Object.create(a6),{_tag:"Empty"})),a9=()=>a7,oe=Object.assign(Object.create(a6),{_tag:"AndThen"}),ot=(e,t)=>{let s=Object.create(oe);return s.first=e,s.second=t,s},os=Object.assign(Object.create(a6),{_tag:"AddService"}),on=(e,t)=>{let s=Object.create(os);return s.key=e,s.service=t,s},oi=Object.assign(Object.create(a6),{_tag:"RemoveService"}),or=e=>{let t=Object.create(oi);return t.key=e,t},oa=Object.assign(Object.create(a6),{_tag:"UpdateService"}),oo=(e,t)=>{let s=Object.create(oa);return s.key=e,s.update=t,s},ol=(e,t)=>{let s=new Map(e.unsafeMap),n=a9();for(let[e,i]of t.unsafeMap.entries())if(s.has(e)){let t=s.get(e);s.delete(e),ex(t,i)||(n=oc(oo(e,()=>i))(n))}else s.delete(e),n=oc(on(e,i))(n);for(let[e]of s.entries())n=oc(or(e))(n);return n},oc=b(2,(e,t)=>ot(e,t)),ou=b(2,(e,t)=>{if("Empty"===e._tag)return t;let s=!1,n=iZ(e),i=new Map(t.unsafeMap);for(;rn(n);){let e=rr(n),t=ra(n);switch(e._tag){case"Empty":n=t;break;case"AddService":i.set(e.key,e.service),n=t;break;case"AndThen":n=i9(i9(t,e.second),e.first);break;case"RemoveService":i.delete(e.key),n=t;break;case"UpdateService":i.set(e.key,e.update(i.get(e.key))),s=!0,n=t}}if(!s)return te(i);let r=new Map;for(let[e]of t.unsafeMap)i.has(e)&&(r.set(e,i.get(e)),i.delete(e));for(let[e,t]of i)r.set(e,t);return te(r)}),op=Symbol.for("effect/DifferHashMapPatch");function od(e){return e}({...a1.prototype,[op]:{_Value:od,_Key:od,_Patch:od}});let oh=Symbol.for("effect/DifferHashSetPatch");function om(e){return e}let of={...a1.prototype,[oh]:{_Value:om,_Key:om,_Patch:om}},og=Object.create(Object.assign(Object.create(of),{_tag:"Empty"})),ob=()=>og,ox=Object.assign(Object.create(of),{_tag:"AndThen"}),oy=(e,t)=>{let s=Object.create(ox);return s.first=e,s.second=t,s},ov=Object.assign(Object.create(of),{_tag:"Add"}),o_=e=>{let t=Object.create(ov);return t.value=e,t},ow=Object.assign(Object.create(of),{_tag:"Remove"}),oS=e=>{let t=Object.create(ow);return t.value=e,t},ok=(e,t)=>{let[s,n]=r9([e,ob()],([e,t],s)=>rX(s)(e)?[r4(s)(e),t]:[e,oE(o_(s))(t)])(t);return r9(n,(e,t)=>oE(oS(t))(e))(s)},oE=b(2,(e,t)=>oy(e,t)),oO=b(2,(e,t)=>{if("Empty"===e._tag)return t;let s=t,n=iZ(e);for(;rn(n);){let e=rr(n),t=ra(n);switch(e._tag){case"Empty":n=t;break;case"AndThen":n=i9(e.first)(i9(e.second)(t));break;case"Add":s=r3(e.value)(s),n=t;break;case"Remove":s=r4(e.value)(s),n=t}}return s}),oT=Symbol.for("effect/DifferOrPatch");function oI(e){return e}let oR={...a1.prototype,[oT]:{_Value:oI,_Key:oI,_Patch:oI}},oN=Object.create(Object.assign(Object.create(oR),{_tag:"Empty"})),oA=Object.assign(Object.create(oR),{_tag:"AndThen"}),oC=(e,t)=>{let s=Object.create(oA);return s.first=e,s.second=t,s},oM=Object.assign(Object.create(oR),{_tag:"SetLeft"}),oF=Object.assign(Object.create(oR),{_tag:"SetRight"}),oj=Object.assign(Object.create(oR),{_tag:"UpdateLeft"}),oL=Object.assign(Object.create(oR),{_tag:"UpdateRight"}),oP=((e,t)=>oC(e,t),Symbol.for("effect/DifferReadonlyArrayPatch"));function oU(e){return e}let oD={...a1.prototype,[oP]:{_Value:oU,_Patch:oU}},o$=Object.create(Object.assign(Object.create(oD),{_tag:"Empty"})),oq=()=>o$,oz=Object.assign(Object.create(oD),{_tag:"AndThen"}),oB=(e,t)=>{let s=Object.create(oz);return s.first=e,s.second=t,s},oJ=Object.assign(Object.create(oD),{_tag:"Append"}),oK=e=>{let t=Object.create(oJ);return t.values=e,t},oH=Object.assign(Object.create(oD),{_tag:"Slice"}),oV=(e,t)=>{let s=Object.create(oH);return s.from=e,s.until=t,s},oW=Object.assign(Object.create(oD),{_tag:"Update"}),oG=(e,t)=>{let s=Object.create(oW);return s.index=e,s.patch=t,s},oY=e=>{let t=0,s=oq();for(;t<e.oldValue.length&&t<e.newValue.length;){let n=e.oldValue[t],i=e.newValue[t],r=e.differ.diff(n,i);ex(r,e.differ.empty)||(s=oQ(s,oG(t,r))),t+=1}return t<e.oldValue.length&&(s=oQ(s,oV(0,t))),t<e.newValue.length&&(s=oQ(s,oK(ie(t)(e.newValue)))),s},oQ=b(2,(e,t)=>oB(e,t)),oX=b(3,(e,t,s)=>{if("Empty"===e._tag)return t;let n=t.slice(),i=ih(e);for(;nw(i);){let e=n3(i),t=n6(i);switch(e._tag){case"Empty":i=t;break;case"AndThen":t.unshift(e.first,e.second),i=t;break;case"Append":for(let t of e.values)n.push(t);i=t;break;case"Slice":n=n.slice(e.from,e.until),i=t;break;case"Update":n[e.index]=s.patch(e.patch,n[e.index]),i=t}}return n}),oZ={[Symbol.for("effect/Differ")]:{_P:x,_V:x}},o0=e=>{let t=Object.create(oZ);return t.empty=e.empty,t.diff=e.diff,t.combine=e.combine,t.patch=e.patch,t},o1=()=>o0({empty:a9(),combine:(e,t)=>oc(t)(e),diff:(e,t)=>ol(e,t),patch:(e,t)=>ou(t)(e)}),o2=()=>o0({empty:ob(),combine:(e,t)=>oE(t)(e),diff:(e,t)=>ok(e,t),patch:(e,t)=>oO(t)(e)}),o5=e=>o0({empty:oq(),combine:(e,t)=>oQ(e,t),diff:(t,s)=>oY({oldValue:t,newValue:s,differ:e}),patch:(t,s)=>oX(t,s,e)}),o3=()=>o4((e,t)=>t),o4=e=>o0({empty:x,combine:(e,t)=>e===x?t:t===x?e:s=>t(e(s)),diff:(e,t)=>ex(e,t)?x:y(t),patch:(t,s)=>e(s,t(s))}),o8=e=>255&e,o6=e=>e>>8&255,o7=(e,t)=>(255&e)+((t&e&255)<<8),o9=o7(0,0),le=b(2,(e,t)=>o7(o8(e)&~t,o6(e))),lt=b(2,(e,t)=>e|t),ls=e=>~e>>>0&255,ln=e=>lo(e,32),li=b(2,(e,t)=>e|t),lr=e=>la(e)&&!lp(e),la=e=>lo(e,1),lo=b(2,(e,t)=>(e&t)!=0),ll=(...e)=>e.reduce((e,t)=>e|t,0),lc=ll(0),lu=e=>lo(e,4),lp=e=>lo(e,16),ld=b(2,(e,t)=>o7(e^t,t)),lh=b(2,(e,t)=>e&(ls(o8(t))|o6(t))|o8(t)&o6(t)),lm=o0({empty:o9,diff:(e,t)=>ld(e,t),combine:(e,t)=>lt(t)(e),patch:(e,t)=>lh(t,e)}),lf=e=>o7(e,e),lg=e=>o7(e,0),lb="Empty",lx="Fail",ly="Interrupt",lv="Parallel",l_="Sequential",lw="effect/Cause",lS=Symbol.for(lw),lk={[lS]:{_E:e=>e},[er](){return S(ea(lw),el(ea(lV(this))),eg(this))},[eb](e){return lA(e)&&lH(this,e)},pipe(){return eT(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:eS(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:eS(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:eS(this.left),right:eS(this.right)}}},toString(){return l5(this)},[ew](){return this.toJSON()}},lE=(()=>{let e=Object.create(lk);return e._tag=lb,e})(),lO=e=>{let t=Object.create(lk);return t._tag=lx,t.error=e,t},lT=e=>{let t=Object.create(lk);return t._tag="Die",t.defect=e,t},lI=e=>{let t=Object.create(lk);return t._tag=ly,t.fiberId=e,t},lR=(e,t)=>{let s=Object.create(lk);return s._tag=lv,s.left=e,s.right=t,s},lN=(e,t)=>{let s=Object.create(lk);return s._tag=l_,s.left=e,s.right=t,s},lA=e=>q(e,lS),lC=e=>"Die"===e._tag,lM=e=>e._tag===lb||l1(e,!0,(e,t)=>{switch(t._tag){case lb:return e3(e);case"Die":case lx:case ly:return e3(!1);default:return nS()}}),lF=e=>e2(lq(e)),lj=e=>l2(void 0,lQ)(e),lL=e=>i5(l1(e,iQ(),(e,t)=>t._tag===lx?e3(S(e,i9(t.error))):nS())),lP=e=>i5(l1(e,iQ(),(e,t)=>"Die"===t._tag?e3(S(e,i9(t.defect))):nS())),lU=e=>l1(e,rQ(),(e,t)=>t._tag===ly?e3(S(e,r3(t.fiberId))):nS()),lD=e=>lG(e,e=>e._tag===lx?e3(e.error):nS()),l$=e=>{let t=lD(e);switch(t._tag){case"None":return t_(e);case"Some":return tv(t.value)}},lq=e=>lG(e,e=>e._tag===ly?e3(e.fiberId):nS()),lz=e=>l0(e,{onEmpty:nS(),onFail:e=>e3(lT(e)),onDie:e=>e3(lT(e)),onInterrupt:()=>nS(),onSequential:(e,t)=>e2(e)&&e2(t)?e3(lN(e.value,t.value)):e2(e)&&e1(t)?e3(e.value):e1(e)&&e2(t)?e3(t.value):nS(),onParallel:(e,t)=>e2(e)&&e2(t)?e3(lR(e.value,t.value)):e2(e)&&e1(t)?e3(e.value):e1(e)&&e2(t)?e3(t.value):nS()}),lB=e=>l0(e,{onEmpty:lE,onFail:()=>lE,onDie:e=>lT(e),onInterrupt:e=>lI(e),onSequential:lN,onParallel:lR}),lJ=e=>l0(e,{onEmpty:lE,onFail:e=>lT(e),onDie:e=>lT(e),onInterrupt:e=>lI(e),onSequential:(e,t)=>lN(e,t),onParallel:(e,t)=>lR(e,t)}),lK=((e,t)=>lK(e,e=>lO(t(e))),b(2,(e,t)=>l0(e,{onEmpty:lE,onFail:e=>t(e),onDie:e=>lT(e),onInterrupt:e=>lI(e),onSequential:(e,t)=>lN(e,t),onParallel:(e,t)=>lR(e,t)}))),lH=(e,t)=>{let s=iZ(e),n=iZ(t);for(;rn(s)&&rn(n);){let[e,t]=S(rr(s),l1([rQ(),iQ()],([e,t],s)=>{let[n,i]=lY(s);return e3([S(e,r6(n)),S(t,rt(i))])})),[i,r]=S(rr(n),l1([rQ(),iQ()],([e,t],s)=>{let[n,i]=lY(s);return e3([S(e,r6(n)),S(t,rt(i))])}));if(!ex(e,i))return!1;s=t,n=r}return!0},lV=e=>lW(iZ(e),iQ()),lW=(e,t)=>{for(;;){let[s,n]=S(e,iy([rQ(),iQ()],([e,t],s)=>{let[n,i]=lY(s);return[S(e,r6(n)),S(t,rt(i))]})),i=as(s)>0?S(t,i9(s)):t;if(rs(n))return i5(i);e=n,t=i}throw Error(G("Cause.flattenCauseLoop"))},lG=b(2,(e,t)=>{let s=[e];for(;s.length>0;){let e=s.pop(),n=t(e);switch(n._tag){case"None":switch(e._tag){case l_:case lv:s.push(e.right),s.push(e.left)}break;case"Some":return n}}return nS()}),lY=e=>{let t=e,s=[],n=rQ(),i=iQ();for(;void 0!==t;)switch(t._tag){case lb:if(0===s.length)return[n,i];t=s.pop();break;case lx:if(n=r3(n,iX(t._tag,t.error)),0===s.length)return[n,i];t=s.pop();break;case"Die":if(n=r3(n,iX(t._tag,t.defect)),0===s.length)return[n,i];t=s.pop();break;case ly:if(n=r3(n,iX(t._tag,t.fiberId)),0===s.length)return[n,i];t=s.pop();break;case l_:switch(t.left._tag){case lb:t=t.right;break;case l_:t=lN(t.left.left,lN(t.left.right,t.right));break;case lv:t=lR(lN(t.left.left,t.right),lN(t.left.right,t.right));break;default:i=i9(i,t.right),t=t.left}break;case lv:s.push(t.right),t=t.left}throw Error(G("Cause.evaluateCauseLoop"))},lQ={emptyCase:v,failCase:_,dieCase:_,interruptCase:v,sequentialCase:(e,t,s)=>t&&s,parallelCase:(e,t,s)=>t&&s},lX="SequentialCase",lZ="ParallelCase",l0=b(2,(e,{onDie:t,onEmpty:s,onFail:n,onInterrupt:i,onParallel:r,onSequential:a})=>l2(e,void 0,{emptyCase:()=>s,failCase:(e,t)=>n(t),dieCase:(e,s)=>t(s),interruptCase:(e,t)=>i(t),sequentialCase:(e,t,s)=>a(t,s),parallelCase:(e,t,s)=>r(t,s)})),l1=b(3,(e,t,s)=>{let n=t,i=e,r=[];for(;void 0!==i;){let e=s(n,i);switch(n=e2(e)?e.value:n,i._tag){case l_:case lv:r.push(i.right),i=i.left;break;default:i=void 0}void 0===i&&r.length>0&&(i=r.pop())}return n}),l2=b(3,(e,t,s)=>{let n=[e],i=[];for(;n.length>0;){let e=n.pop();switch(e._tag){case lb:i.push(t_(s.emptyCase(t)));break;case lx:i.push(t_(s.failCase(t,e.error)));break;case"Die":i.push(t_(s.dieCase(t,e.defect)));break;case ly:i.push(t_(s.interruptCase(t,e.fiberId)));break;case l_:n.push(e.right),n.push(e.left),i.push(tv({_tag:lX}));break;case lv:n.push(e.right),n.push(e.left),i.push(tv({_tag:lZ}))}}let r=[];for(;i.length>0;){let e=i.pop();switch(e._tag){case"Left":switch(e.left._tag){case lX:{let e=r.pop(),n=r.pop(),i=s.sequentialCase(t,e,n);r.push(i);break}case lZ:{let e=r.pop(),n=r.pop(),i=s.parallelCase(t,e,n);r.push(i)}}break;case"Right":r.push(e.right)}}if(0===r.length)throw Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return r.pop()}),l5=e=>lj(e)?"All fibers interrupted without errors.":ce(e).map(e=>e.stack).join("\n");class l3 extends globalThis.Error{span=void 0;constructor(e){let t=Error.stackTraceLimit;Error.stackTraceLimit=0,super(l4(e)),""===this.message&&(this.message="An error has occurred"),Error.stackTraceLimit=t,this.name=e instanceof Error?e.name:"Error","object"==typeof e&&null!==e&&(l9 in e&&(this.span=e[l9]),Object.keys(e).forEach(t=>{t in this||(this[t]=e[t])})),this.stack=l7(`${this.name}: ${this.message}`,e instanceof Error&&e.stack?e.stack:"",this.span)}}let l4=e=>{if("string"==typeof e)return e;if("object"==typeof e&&null!==e&&e instanceof Error)return e.message;try{if(q(e,"toString")&&F(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return JSON.stringify(e)},l8=/\((.*)\)/,l6=T("effect/Tracer/spanToTrace",()=>new WeakMap),l7=(e,t,s)=>{let n=[e],i=t.startsWith(e)?t.slice(e.length).split("\n"):t.split("\n");for(let e=1;e<i.length&&!i[e].includes("Generator.next");e++){if(i[e].includes("effect_internal_function")){n.pop();break}n.push(i[e].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(s){let e=s,t=0;for(;e&&"Span"===e._tag&&t<10;){let s=l6.get(e);if("function"==typeof s){let t=s(),i=t.match(l8),r=i?i[1]:t.replace(/^at /,"");n.push(`    at ${e.name} (${r})`)}else n.push(`    at ${e.name}`);e=nR(e.parent),t++}}return n.join("\n")},l9=Symbol.for("effect/SpanAnnotation"),ce=e=>l2(e,void 0,{emptyCase:()=>[],dieCase:(e,t)=>[new l3(t)],failCase:(e,t)=>[new l3(t)],interruptCase:()=>[],parallelCase:(e,t,s)=>[...t,...s],sequentialCase:(e,t,s)=>[...t,...s]}),ct="Pending",cs="Done",cn=Symbol.for("effect/Deferred"),ci={_E:e=>e,_A:e=>e},cr=e=>({_tag:ct,joiners:e}),ca=e=>({_tag:cs,effect:e}),co=Symbol.for("effect/Tracer"),cl=tc("effect/Tracer"),cc=tc("effect/ParentSpan"),cu=function(){let e="abcdef0123456789",t=e.length;return function(s){let n="";for(let i=0;i<s;i++)n+=e.charAt(Math.floor(Math.random()*t));return n}}();class cp{name;parent;context;links;startTime;kind;_tag="Span";spanId;traceId="native";sampled=!0;status;attributes;events=[];constructor(e,t,s,n,i,r){this.name=e,this.parent=t,this.context=s,this.links=n,this.startTime=i,this.kind=r,this.status={_tag:"Started",startTime:i},this.attributes=new Map,this.traceId="Some"===t._tag?t.value.traceId:cu(32),this.spanId=cu(16)}end(e,t){this.status={_tag:"Ended",endTime:e,exit:t,startTime:this.status.startTime}}attribute(e,t){this.attributes.set(e,t)}event(e,t,s){this.events.push([e,t,s??{}])}}let cd=e=>{if(e?.captureStackTrace===!1||e?.captureStackTrace!==void 0&&"boolean"!=typeof e.captureStackTrace)return e;let t=Error.stackTraceLimit;Error.stackTraceLimit=3;let s=Error();Error.stackTraceLimit=t;let n=!1;return{...e,captureStackTrace:()=>{if(!1!==n)return n;if(void 0!==s.stack){let e=s.stack.split("\n");if(void 0!==e[3])return n=e[3].trim()}}}},ch=Symbol.for("effect/EffectError"),cm=e=>q(e,ch),cf=e=>({[ch]:ch,_tag:"EffectError",cause:e}),cg=(e,t)=>{let s=new cv("Blocked");return s.effect_instruction_i0=e,s.effect_instruction_i1=t,s},cb=e=>{let t=new cv("RunBlocked");return t.effect_instruction_i0=e,t},cx=Symbol.for("effect/Effect");class cy{patch;op;_op=e$;constructor(e,t){this.patch=e,this.op=t}}class cv{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[cx]=eK;constructor(e){this._op=e}[eb](e){return this===e}[er](){return eg(this,eo(this))}pipe(){return eT(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:eS(this.effect_instruction_i0),effect_instruction_i1:eS(this.effect_instruction_i1),effect_instruction_i2:eS(this.effect_instruction_i2)}}toString(){return ek(this.toJSON())}[ew](){return this.toJSON()}[Symbol.iterator](){return new tE(new ee(this))}}class c_{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[cx]=eK;constructor(e){this._op=e,this._tag=e}[eb](e){return pm(e)&&"Failure"===e._op&&ex(this.effect_instruction_i0,e.effect_instruction_i0)}[er](){return S(ed(this._tag),el(ea(this.effect_instruction_i0)),eg(this))}get cause(){return this.effect_instruction_i0}pipe(){return eT(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return ek(this.toJSON())}[ew](){return this.toJSON()}[Symbol.iterator](){return new tE(new ee(this))}}class cw{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[cx]=eK;constructor(e){this._op=e,this._tag=e}[eb](e){return pm(e)&&"Success"===e._op&&ex(this.effect_instruction_i0,e.effect_instruction_i0)}[er](){return S(ed(this._tag),el(ea(this.effect_instruction_i0)),eg(this))}get value(){return this.effect_instruction_i0}pipe(){return eT(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:eS(this.value)}}toString(){return ek(this.toJSON())}[ew](){return this.toJSON()}[Symbol.iterator](){return new tE(new ee(this))}}let cS=e=>q(e,cx),ck=e=>{let t=new cv(eU);return t.effect_instruction_i0=e,t},cE=b(3,(e,t,s)=>up(n=>cV(e,e=>cV(c$(ur(()=>n(t(e)))),t=>ur(()=>s(e,t)).pipe(cX({onFailure:e=>{switch(t._tag){case eN:return cB(lR(t.effect_instruction_i0,e));case eF:return cB(e)}},onSuccess:()=>t})))))),cO=b(2,(e,t)=>cV(e,()=>ui(t))),cT=e=>cO(e,void 0),cI=function(){let e=new cv(eR);switch(arguments.length){case 2:e.effect_instruction_i0=arguments[0],e.commit=arguments[1];break;case 3:e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.commit=arguments[2];break;case 4:e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.effect_instruction_i2=arguments[2],e.commit=arguments[3];break;default:throw Error(G("you're not supposed to end up here"))}return e},cR=(e,t=aT)=>{let s;let n=new cv(eI);return n.effect_instruction_i0=t=>{s=e(t)},n.effect_instruction_i1=t,void 0!==s?c9(n,e=>s):n},cN=(e,t=aT)=>cI(e,function(){let e,s,n,i;function r(t){e?e(t):void 0===s&&(s=t)}let a=new cv(eI);return a.effect_instruction_i0=t=>{e=t,s&&t(s)},a.effect_instruction_i1=t,1!==this.effect_instruction_i0.length?(i=new AbortController,n=en(()=>this.effect_instruction_i0(r,i.signal))):n=en(()=>this.effect_instruction_i0(r)),n||i?c9(a,e=>(i&&i.abort(),n??ud)):a}),cA=b(2,(e,t)=>{let s=new cv(eA);return s.effect_instruction_i0=e,s.effect_instruction_i1=t,s}),cC=b(2,(e,t)=>cZ(e,{onFailure:t,onSuccess:ui})),cM=b(3,(e,t,s)=>cA(e,e=>{let n=l$(e);switch(n._tag){case"Left":return t(n.left)?s(n.left):cB(e);case"Right":return cB(n.right)}})),cF=Symbol.for("effect/SpanAnnotation"),cj=Symbol.for("effect/OriginalAnnotation"),cL=(e,t)=>e2(t)?new Proxy(e,{has:(e,t)=>t===cF||t===cj||t in e,get:(s,n)=>n===cF?t.value:n===cj?e:s[n]}):e,cP=e=>!$(e)||cF in e?cB(lT(e)):ck(t=>cB(lT(cL(e,pV(t))))),cU=e=>cJ(()=>lT(new po(e))),cD=e=>cZ(e,{onFailure:e=>ui(tv(e)),onSuccess:e=>ui(t_(e))}),c$=e=>cQ(e,{onFailure:p_,onSuccess:pT}),cq=e=>!$(e)||cF in e?cB(lO(e)):ck(t=>cB(lO(cL(e,pV(t))))),cz=e=>cV(ua(e),cq),cB=e=>{let t=new c_(eN);return t.effect_instruction_i0=e,t},cJ=e=>cV(ua(e),cB),cK=ck(e=>ui(e.id())),cH=e=>ck(t=>e(t.id())),cV=b(2,(e,t)=>{let s=new cv(eC);return s.effect_instruction_i0=e,s.effect_instruction_i1=t,s}),cW=b(2,(e,t)=>cV(e,e=>{let s="function"==typeof t?t(e):t;return cS(s)?s:W(s)?cN(e=>{s.then(t=>e(ui(t)),t=>e(cq(new ph(t))))}):ui(s)})),cG=e=>{let t=new cv("OnStep");return t.effect_instruction_i0=e,t},cY=e=>cV(e,x),cQ=b(2,(e,t)=>cX(e,{onFailure:e=>ui(t.onFailure(e)),onSuccess:e=>ui(t.onSuccess(e))})),cX=b(2,(e,t)=>{let s=new cv(eM);return s.effect_instruction_i0=e,s.effect_instruction_i1=t.onFailure,s.effect_instruction_i2=t.onSuccess,s}),cZ=b(2,(e,t)=>cX(e,{onFailure:e=>{if(lP(e).length>0)return cB(lJ(e));let s=lL(e);return s.length>0?t.onFailure(rr(s)):cB(e)},onSuccess:t.onSuccess})),c0=b(2,(e,t)=>ur(()=>{let s=nK(e),n=nJ(s.length),i=0;return cO(uf({while:()=>i<s.length,body:()=>t(s[i],i),step:e=>{n[i++]=e}}),n)})),c1=b(2,(e,t)=>ur(()=>{let s=nK(e),n=0;return uf({while:()=>n<s.length,body:()=>t(s[n],n),step:()=>{n++}})})),c2=(e=>"boolean"==typeof e[0]||cS(e[0]),e=>cB(lI(e))),c5=e=>{let t=new cv(eL);return t.effect_instruction_i0=lf(1),t.effect_instruction_i1=()=>e,t},c3=b(2,(e,t)=>up(s=>cV(c$(s(e)),e=>pL(t,e)))),c4=b(2,(e,t)=>cV(e,e=>ua(()=>t(e)))),c8=b(2,(e,t)=>cZ(e,{onFailure:e=>cz(()=>t.onFailure(e)),onSuccess:e=>ua(()=>t.onSuccess(e))})),c6=b(2,(e,t)=>cX(e,{onFailure:e=>{let s=l$(e);switch(s._tag){case"Left":return cz(()=>t(s.left));case"Right":return cB(s.right)}},onSuccess:ui})),c7=((e,t)=>c7(e,e=>pg(e)?ud:t(e.effect_instruction_i0)),b(2,(e,t)=>up(s=>cX(s(e),{onFailure:e=>{let s=p_(e);return cX(t(s),{onFailure:t=>p_(lN(e,t)),onSuccess:()=>s})},onSuccess:e=>{let s=pT(e);return uv(t(s),s)}})))),c9=b(2,(e,t)=>c7(e,pE({onFailure:e=>lj(e)?cT(t(lU(e))):ud,onSuccess:()=>ud}))),ue=b(2,(e,t)=>uc(e,t,ui)),ut=e=>us(e,x),us=b(2,(e,t)=>cZ(e,{onFailure:e=>cP(t(e)),onSuccess:ui})),un=(e,t)=>nK(e).reduceRight(([e,s],n)=>{let i=t(n);switch(i._tag){case"Left":return[[i.left,...e],s];case"Right":return[e,[i.right,...s]]}},[id(),id()]),ui=((e,t)=>ui(t.runtimeFlags),e=>{let t=new cw(eF);return t.effect_instruction_i0=e,t}),ur=e=>cV(ua(e),x),ua=e=>{let t=new cv(ej);return t.effect_instruction_i0=e,t},uo=b(2,(e,t)=>cV(e,e=>{let s="function"==typeof t?t(e):t;return cS(s)?cO(s,e):W(s)?cN(t=>{s.then(s=>t(ui(e)),e=>t(cq(new ph(e))))}):ui(e)})),ul=e=>ck(t=>{let s=S(t.getFiberRef(u2),nE(()=>t.scope()));return e(uU(u2,e3(s)))}),uc=b(3,(e,t,s)=>cX(e,{onFailure:e=>lP(e).length>0?cB(nA(lz(e))):t(),onSuccess:s})),uu=e=>{let t=new cv(eL);return t.effect_instruction_i0=lg(1),t.effect_instruction_i1=()=>e,t},up=e=>cI(e,function(){let e=new cv(eL);return e.effect_instruction_i0=lg(1),e.effect_instruction_i1=e=>la(e)?en(()=>this.effect_instruction_i0(c5)):en(()=>this.effect_instruction_i0(uu)),e}),ud=ui(void 0),uh=e=>{let t=new cv(eL);return t.effect_instruction_i0=e,t.effect_instruction_i1=void 0,t},um=b(2,(e,t)=>cV(t,t=>t?S(e,c4(e3)):ui(nS()))),uf=e=>{let t=new cv(eP);return t.effect_instruction_i0=e.while,t.effect_instruction_i1=e.body,t.effect_instruction_i2=e.step,t},ug=b(2,(e,t)=>{let s=new cv(eL);return s.effect_instruction_i0=t,s.effect_instruction_i1=()=>e,s}),ub=e=>{let t=new cv(eD);return void 0!==e?.priority?uQ(t,e.priority):t},ux=b(2,(e,t)=>cV(e,e=>c4(t,t=>[e,t]))),uy=b(2,(e,t)=>cV(e,e=>cO(t,e))),uv=b(2,(e,t)=>cV(e,()=>t)),u_=b(3,(e,t,s)=>cV(e,e=>c4(t,t=>s(e,t)))),uw=(()=>{let e=setInterval(()=>{},2147483648-1);return ua(()=>clearInterval(e))},e=>cV(cK,t=>S(e,uS(t)))),uS=b(2,(e,t)=>cV(e.interruptAsFork(t),()=>e.await)),uk={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return eT(this,arguments)}},uE={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return eT(this,arguments)}},uO={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return eT(this,arguments)}},uT={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return eT(this,arguments)}},uI=Symbol.for("effect/FiberRef"),uR={_A:e=>e},uN=e=>uM(e,e=>[e,e]),uA=b(2,(e,t)=>cV(uN(e),t)),uC=b(2,(e,t)=>uM(e,()=>[void 0,t])),uM=b(2,(e,t)=>ck(s=>{let[n,i]=t(s.getFiberRef(e));return s.setFiberRef(e,i),ui(n)})),uF=Symbol.for("effect/RequestResolver"),uj={_A:e=>e,_R:e=>e};class uL{runAll;target;[uF]=uj;constructor(e,t){this.runAll=e,this.target=t}[er](){return eg(this,this.target?ea(this.target):eo(this))}[eb](e){return this.target?uP(e)&&ex(this.target,e.target):this===e}identified(...e){return new uL(this.runAll,i0(e))}pipe(){return eT(this,arguments)}}let uP=e=>q(e,uF),uU=b(3,(e,t,s)=>cE(uy(uN(t),uC(t,s)),()=>e,e=>uC(t,e))),uD=b(3,(e,t,s)=>uA(t,n=>uU(e,t,s(n)))),u$=(e,t)=>uJ(e,{differ:o3(),fork:t?.fork??x,join:t?.join}),uq=e=>{let t=o2();return uJ(e,{differ:t,fork:t.empty})},uz=e=>{let t=o5(o3());return uJ(e,{differ:t,fork:t.empty})},uB=e=>{let t=o1();return uJ(e,{differ:t,fork:t.empty})},uJ=(e,t)=>({[uI]:uR,initial:e,diff:(e,s)=>t.differ.diff(e,s),combine:(e,s)=>t.differ.combine(e,s),patch:e=>s=>t.differ.patch(e,s),fork:t.fork,join:t.join??((e,t)=>t),pipe(){return eT(this,arguments)}}),uK=T(Symbol.for("effect/FiberRef/currentContext"),()=>uB(tp())),uH=T(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>u$(0)),uV=T(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>u$(2048)),uW=T(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>u$(rI())),uG=T(Symbol.for("effect/FiberRef/currentLogLevel"),()=>u$(uE)),uY=T(Symbol.for("effect/FiberRef/currentLogSpan"),()=>u$(aK())),uQ=b(2,(e,t)=>uU(e,uH,t)),uX=T(Symbol.for("effect/FiberRef/currentConcurrency"),()=>u$("unbounded")),uZ=T(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>u$(!0)),u0=T(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>u$(e3(uO))),u1=T(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>uz(id())),u2=T(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>u$(nS(),{fork:()=>nS(),join:(e,t)=>e})),u5=T(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>u$(lE,{fork:()=>lE,join:(e,t)=>e})),u3=T(Symbol.for("effect/FiberRef/currentTracerEnabled"),()=>u$(!0)),u4=T(Symbol.for("effect/FiberRef/currentTracerTiming"),()=>u$(!0)),u8=T(Symbol.for("effect/FiberRef/currentTracerSpanAnnotations"),()=>u$(rI())),u6=T(Symbol.for("effect/FiberRef/currentTracerSpanLinks"),()=>u$(iQ())),u7=Symbol.for("effect/Scope"),u9=Symbol.for("effect/CloseableScope"),pe=(e,t)=>e.addFinalizer(()=>cT(t)),pt=(e,t)=>e.addFinalizer(t),ps=(e,t)=>e.close(t),pn=(e,t)=>e.fork(t),pi=function(){class e extends globalThis.Error{commit(){return cq(this)}toString(){return this.message?`${this.name}: ${this.message}`:this.name}toJSON(){return{...this}}[ew](){let e=this.stack;return e?`${this.toString()}
${e.split("\n").slice(1).join("\n")}`:this.toString()}}return Object.assign(e.prototype,eW),e}(),pr=(e,t)=>{class s extends pi{_tag=t}return Object.assign(s.prototype,e),s.prototype.name=t,s},pa=Symbol.for("effect/Cause/errors/RuntimeException"),po=pr({[pa]:pa},"RuntimeException"),pl=Symbol.for("effect/Cause/errors/InterruptedException"),pc=e=>q(e,pl),pu=Symbol.for("effect/Cause/errors/NoSuchElement"),pp=pr({[pu]:pu},"NoSuchElementException"),pd=Symbol.for("effect/Cause/errors/UnknownException"),ph=function(){class e extends pi{error;_tag="UnknownException";constructor(e,t){super(t??(q(e,"message")&&R(e.message)?e.message:void 0)),this.error=e}}return Object.assign(e.prototype,{[pd]:pd,name:"UnknownException"}),e}(),pm=e=>cS(e)&&"_tag"in e&&("Success"===e._tag||"Failure"===e._tag),pf=e=>"Failure"===e._tag,pg=e=>"Success"===e._tag,pb=b(2,(e,t)=>{switch(e._tag){case eN:return p_(e.effect_instruction_i0);case eF:return pT(t)}}),px=e=>pb(e,void 0),py=(e,t)=>pN(e,t?.parallel?lR:lN),pv=e=>p_(lO(e)),p_=e=>{let t=new c_(eN);return t.effect_instruction_i0=e,t},pw=((e,t)=>{switch(e._tag){case eN:return p_(e.effect_instruction_i0);case eF:return t(e.effect_instruction_i0)}},b(2,(e,t)=>{switch(e._tag){case eN:return ui(p_(e.effect_instruction_i0));case eF:return c$(t(e.effect_instruction_i0))}})),pS=e=>p_(lI(e)),pk=b(2,(e,t)=>{switch(e._tag){case eN:return p_(e.effect_instruction_i0);case eF:return pT(t(e.effect_instruction_i0))}}),pE=b(2,(e,{onFailure:t,onSuccess:s})=>{switch(e._tag){case eN:return t(e.effect_instruction_i0);case eF:return s(e.effect_instruction_i0)}}),pO=b(2,(e,{onFailure:t,onSuccess:s})=>{switch(e._tag){case eN:return t(e.effect_instruction_i0);case eF:return s(e.effect_instruction_i0)}}),pT=e=>{let t=new cw(eF);return t.effect_instruction_i0=e,t},pI=pT(void 0),pR=b(3,(e,t,{onFailure:s,onSuccess:n})=>{switch(e._tag){case eN:switch(t._tag){case eF:return p_(e.effect_instruction_i0);case eN:return p_(s(e.effect_instruction_i0,t.effect_instruction_i0))}case eF:switch(t._tag){case eF:return pT(n(e.effect_instruction_i0,t.effect_instruction_i0));case eN:return p_(t.effect_instruction_i0)}}}),pN=(e,t)=>{let s=i0(e);return rn(s)?S(ra(s),iy(S(rr(s),pk(iZ)),(e,s)=>S(e,pR(s,{onSuccess:(e,t)=>S(e,i9(t)),onFailure:t}))),pk(i5),pk(e=>i2(e)),e3):nS()},pA=e=>({[cn]:ci,state:ar(cr([])),blockingOn:e,pipe(){return eT(this,arguments)}}),pC=()=>cV(cK,e=>pM(e)),pM=e=>ua(()=>pA(e)),pF=e=>cN(t=>{let s=ao(e.state);switch(s._tag){case cs:return t(s.effect);case ct:return s.joiners.push(t),p$(e,t)}},e.blockingOn),pj=b(2,(e,t)=>ua(()=>{let s=ao(e.state);switch(s._tag){case cs:return!1;case ct:al(e.state,ca(t));for(let e=0,n=s.joiners.length;e<n;e++)s.joiners[e](t);return!0}})),pL=b(2,(e,t)=>pj(e,t)),pP=b(2,(e,t)=>pj(e,cB(t))),pU=b(2,(e,t)=>pj(e,ui(t))),pD=(e,t)=>{let s=ao(e.state);if(s._tag===ct){al(e.state,ca(t));for(let e=0,n=s.joiners.length;e<n;e++)s.joiners[e](t)}},p$=(e,t)=>ua(()=>{let s=ao(e.state);if(s._tag===ct){let e=s.joiners.indexOf(t);e>=0&&s.joiners.splice(e,1)}}),pq=uN(uK),pz=()=>pq,pB=e=>cV(pz(),e),pJ=b(2,(e,t)=>uU(uK,t)(e)),pK=b(2,(e,t)=>uD(uK,e=>tl(e,t))(e)),pH=b(2,(e,t)=>pB(s=>pJ(e,t(s)))),pV=e=>{let t=e.getFiberRef(uK).unsafeMap.get(cc.key);return void 0!==t&&"Span"===t._tag?e3(t):nS()},pW={_tag:"Span",spanId:"noop",traceId:"noop",name:"noop",sampled:!1,parent:nS(),context:tp(),status:{_tag:"Ended",startTime:BigInt(0),endTime:BigInt(0),exit:pI},attributes:new Map,links:[],kind:"internal",attribute(){},event(){},end(){}},pG=e=>{let t=Object.create(pW);return t.name=e,t},pY=class extends pi{constructor(e){super(),e&&Object.assign(this,e)}},pQ=e=>{class t extends pY{_tag=e}return t.prototype.name=e,t},pX=Symbol.for("effect/Duration"),pZ=BigInt(0),p0=BigInt(24),p1=BigInt(60),p2=BigInt(1e3),p5=BigInt(1e6),p3=BigInt(1e9),p4=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,p8=e=>{if(dt(e))return e;if(N(e))return da(e);if(C(e))return di(e);if(Array.isArray(e)){if(2===e.length&&N(e[0])&&N(e[1]))return di(BigInt(e[0])*p3+BigInt(e[1]))}else if(R(e)){p4.lastIndex=0;let t=p4.exec(e);if(t){let[e,s,n]=t,i=Number(s);switch(n){case"nano":case"nanos":return di(BigInt(s));case"micro":case"micros":return dr(BigInt(s));case"milli":case"millis":return da(i);case"second":case"seconds":return dl(i);case"minute":case"minutes":return dc(i);case"hour":case"hours":return du(i);case"day":case"days":return dp(i);case"week":case"weeks":return dd(i)}}}throw Error("Invalid DurationInput")},p6={_tag:"Millis",millis:0},p7={_tag:"Infinity"},p9={[pX]:pX,[er](){return eg(this,em(this.value))},[eb](e){return dt(e)&&dk(this,e)},toString(){return`Duration(${dE(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:dg(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[ew](){return this.toJSON()},pipe(){return eT(this,arguments)}},de=e=>{let t=Object.create(p9);return N(e)?isNaN(e)||e<=0?t.value=p6:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:"Millis",millis:e}:t.value={_tag:"Nanos",nanos:BigInt(Math.round(1e6*e))}:t.value=p7:e<=pZ?t.value=p6:t.value={_tag:"Nanos",nanos:e},t},dt=e=>q(e,pX),ds=de(0),dn=de(1/0),di=e=>de(e),dr=e=>de(e*p2),da=e=>de(e),dl=e=>de(1e3*e),dc=e=>de(6e4*e),du=e=>de(36e5*e),dp=e=>de(864e5*e),dd=e=>de(6048e5*e),dh=e=>{let t=p8(e);switch(t.value._tag){case"Infinity":return 1/0;case"Nanos":return Number(t.value.nanos)/1e6;case"Millis":return t.value.millis}},dm=e=>{let t=p8(e);switch(t.value._tag){case"Infinity":return nS();case"Nanos":return e3(t.value.nanos);case"Millis":return e3(BigInt(Math.round(1e6*t.value.millis)))}},df=e=>{let t=p8(e);switch(t.value._tag){case"Infinity":throw Error("Cannot convert infinite duration to nanos");case"Nanos":return t.value.nanos;case"Millis":return BigInt(Math.round(1e6*t.value.millis))}},dg=e=>{let t=p8(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/p3),Number(t.value.nanos%p3)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}},db=b(2,(e,t)=>{let s=p8(e);switch(s.value._tag){case"Nanos":return t.onNanos(s.value.nanos);case"Infinity":return t.onMillis(1/0);case"Millis":return t.onMillis(s.value.millis)}}),dx=b(3,(e,t,s)=>{let n=p8(e),i=p8(t);if("Infinity"===n.value._tag||"Infinity"===i.value._tag)return s.onMillis(dh(n),dh(i));if("Nanos"===n.value._tag||"Nanos"===i.value._tag){let e="Nanos"===n.value._tag?n.value.nanos:BigInt(Math.round(1e6*n.value.millis)),t="Nanos"===i.value._tag?i.value.nanos:BigInt(Math.round(1e6*i.value.millis));return s.onNanos(e,t)}return s.onMillis(n.value.millis,i.value.millis)}),dy=(e,t)=>dx(e,t,{onMillis:(e,t)=>e===t,onNanos:(e,t)=>e===t}),dv=b(2,(e,t)=>db(e,{onMillis:e=>de(e*t),onNanos:e=>de(e*BigInt(t))})),d_=b(2,(e,t)=>dx(e,t,{onMillis:(e,t)=>de(e+t),onNanos:(e,t)=>de(e+t)})),dw=((e,t)=>dx(e,t,{onMillis:(e,t)=>e<t,onNanos:(e,t)=>e<t}),b(2,(e,t)=>dx(e,t,{onMillis:(e,t)=>e<=t,onNanos:(e,t)=>e<=t}))),dS=b(2,(e,t)=>dx(e,t,{onMillis:(e,t)=>e>=t,onNanos:(e,t)=>e>=t})),dk=b(2,(e,t)=>dy(p8(e),p8(t))),dE=e=>{let t=p8(e),s=[];if("Infinity"===t.value._tag)return"Infinity";let n=df(t);n%p5&&s.push(`${n%p5}ns`);let i=n/p5;i%p2!==pZ&&s.push(`${i%p2}ms`);let r=i/p2;r%p1!==pZ&&s.push(`${r%p1}s`);let a=r/p1;a%p1!==pZ&&s.push(`${a%p1}m`);let o=a/p1;o%p0!==pZ&&s.push(`${o%p0}h`);let l=o/p0;return l!==pZ&&s.push(`${l}d`),s.reverse().join(" ")},dO=Symbol.for("effect/Encoding/errors/Decode"),dT=(e,t)=>{let s={_tag:"DecodeException",[dO]:dO,input:e};return R(t)&&(s.message=t),s};function dI(e){if(e>=dN.length)throw TypeError(`Invalid character ${String.fromCharCode(e)}`);let t=dN[e];if(255===t)throw TypeError(`Invalid character ${String.fromCharCode(e)}`);return t}let dR=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],dN=[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],dA=e=>{if("NaN"===e)return e3(NaN);if("Infinity"===e)return e3(1/0);if("-Infinity"===e)return e3(-1/0);if(""===e.trim())return e5;let t=Number(e);return Number.isNaN(t)?e5:e3(t)},dC=Symbol.for("@effect/schema/ArbitraryHookId"),dM=(e,t,s,n)=>(n.isSuspend?e.oneof({depthSize:1},e.constant([]),e.array(e.tuple(t,s),{minLength:1,maxLength:2})):e.array(e.tuple(t,s))).map(e=>{let t={};for(let[s,n]of e)t[s]=n;return t}),dF=(e,t,s)=>{let n=dz(t.constraints,dq(e));return dj(e.from,n?{...t,constraints:n}:t,s)},dj=(e,t,s)=>{let n=(null)(e);if(Option.isSome(n))switch(e._tag){case"Declaration":return n.value(...e.typeParameters.map(e=>dj(e,t,s)));case"Refinement":return n.value(dF(e,t,s));default:return n.value()}switch(e._tag){case"Declaration":throw Error(errors_.getArbitraryMissingAnnotationErrorMessage(s,e));case"Literal":return t=>t.constant(e.literal);case"UniqueSymbol":return t=>t.constant(e.symbol);case"UndefinedKeyword":case"VoidKeyword":return e=>e.constant(void 0);case"NeverKeyword":return()=>{throw Error(errors_.getArbitraryUnsupportedErrorMessage(s,e))};case"UnknownKeyword":case"AnyKeyword":return e=>e.anything();case"StringKeyword":return e=>t.constraints&&"StringConstraints"===t.constraints._tag?e.string(t.constraints.constraints):e.string();case"NumberKeyword":return e=>{if(t.constraints)switch(t.constraints._tag){case"NumberConstraints":return e.float(t.constraints.constraints);case"IntegerConstraints":return e.integer(t.constraints.constraints)}return e.float()};case"BooleanKeyword":return e=>e.boolean();case"BigIntKeyword":return e=>t.constraints&&"BigIntConstraints"===t.constraints._tag?e.bigInt(t.constraints.constraints):e.bigInt();case"SymbolKeyword":return e=>e.string().map(e=>Symbol.for(e));case"ObjectKeyword":return e=>e.oneof(e.object(),e.array(e.anything()));case"TemplateLiteral":return t=>{let s=t.string({maxLength:5}),n=t.float({noDefaultInfinity:!0}).filter(e=>!Number.isNaN(e)),i=[t.constant(e.head)];for(let r of e.spans)AST.isStringKeyword(r.type)?i.push(s):i.push(n),i.push(t.constant(r.literal));return t.tuple(...i).map(e=>e.join(""))};case"TupleType":{let n=[],i=!1,r=0;for(let a of e.elements)n.push(dj(a.type,t,s.concat(r++))),a.isOptional&&(i=!0);let a=e.rest.map(e=>dj(e.type,t,s));return s=>{let r=s.tuple(...n.map(e=>e(s)));if(i){let t=s.tuple(...e.elements.map(e=>e.isOptional?s.boolean():s.constant(!0)));r=r.chain(e=>t.map(t=>{for(let[s,n]of t.reverse().entries())n||e.splice(t.length-s,1);return e}))}if(Arr.isNonEmptyReadonlyArray(a)){let[e,...n]=a,i=e(s),o=t.constraints;r=r.chain(e=>{let n=s.array(i);return t.isSuspend?n=s.oneof({depthSize:1},s.constant([]),s.array(i,{minLength:1,maxLength:2})):o&&"ArrayConstraints"===o._tag&&(n=s.array(i,o.constraints)),n.map(t=>[...e,...t])});for(let e=0;e<n.length;e++)r=r.chain(t=>n[e](s).map(e=>[...t,e]))}return r}}case"TypeLiteral":{let n=e.propertySignatures.map(e=>dj(e.type,t,s.concat(e.name))),i=e.indexSignatures.map(e=>[dj(e.parameter,t,s),dj(e.type,t,s)]);return s=>{let r={},a=[];for(let t=0;t<n.length;t++){let i=e.propertySignatures[t],o=i.name;i.isOptional||a.push(o),r[o]=n[t](s)}let o=s.record(r,{requiredKeys:a});for(let e=0;e<i.length;e++){let n=i[e][0](s),r=i[e][1](s);o=o.chain(e=>dM(s,n,r,t).map(t=>({...t,...e})))}return o}}case"Union":{let n=e.types.map(e=>dj(e,t,s));return e=>e.oneof({depthSize:1},...n.map(t=>t(e)))}case"Enums":if(0===e.enums.length)throw Error(errors_.getArbitraryEmptyEnumErrorMessage(s));return t=>t.oneof(...e.enums.map(([e,s])=>t.constant(s)));case"Refinement":{let n=dF(e,t,s);return t=>n(t).filter(t=>Option.isNone(e.filter(t,AST.defaultParseOption,e)))}case"Suspend":{let n=util_.memoizeThunk(()=>dj(e.f(),{...t,isSuspend:!0},s));return e=>e.constant(null).chain(()=>n()(e))}case"Transformation":return dj(e.to,t,s)}};class dL{_tag="NumberConstraints";constraints;constructor(e){this.constraints={},Predicate.isNumber(e.min)&&(this.constraints.min=Math.fround(e.min)),Predicate.isNumber(e.max)&&(this.constraints.max=Math.fround(e.max)),Predicate.isBoolean(e.noNaN)&&(this.constraints.noNaN=e.noNaN),Predicate.isBoolean(e.noDefaultInfinity)&&(this.constraints.noDefaultInfinity=e.noDefaultInfinity)}}class dP{_tag="StringConstraints";constraints;constructor(e){this.constraints={},Predicate.isNumber(e.minLength)&&(this.constraints.minLength=e.minLength),Predicate.isNumber(e.maxLength)&&(this.constraints.maxLength=e.maxLength)}}class dU{_tag="IntegerConstraints";constraints;constructor(e){this.constraints={},Predicate.isNumber(e.min)&&(this.constraints.min=e.min),Predicate.isNumber(e.max)&&(this.constraints.max=e.max)}}class dD{_tag="ArrayConstraints";constraints;constructor(e){this.constraints={},Predicate.isNumber(e.minLength)&&(this.constraints.minLength=e.minLength),Predicate.isNumber(e.maxLength)&&(this.constraints.maxLength=e.maxLength)}}class d${_tag="BigIntConstraints";constraints;constructor(e){this.constraints={},Predicate.isBigInt(e.min)&&(this.constraints.min=e.min),Predicate.isBigInt(e.max)&&(this.constraints.max=e.max)}}let dq=e=>{let t=e.annotations[AST.TypeAnnotationId],s=e.annotations[AST.JSONSchemaAnnotationId];switch(t){case filters_.IntTypeId:return new dU({});case filters_.GreaterThanTypeId:case filters_.GreaterThanOrEqualToTypeId:case filters_.LessThanTypeId:case filters_.LessThanOrEqualToTypeId:case filters_.BetweenTypeId:return new dL({min:s.exclusiveMinimum??s.minimum,max:s.exclusiveMaximum??s.maximum});case filters_.GreaterThanBigintTypeId:case filters_.GreaterThanOrEqualToBigIntTypeId:case filters_.LessThanBigIntTypeId:case filters_.LessThanOrEqualToBigIntTypeId:case filters_.BetweenBigintTypeId:return new d$(e.annotations[t]);case filters_.MinLengthTypeId:case filters_.MaxLengthTypeId:case filters_.LengthTypeId:return new dP(s);case filters_.MinItemsTypeId:case filters_.MaxItemsTypeId:case filters_.ItemsCountTypeId:return new dD({minLength:s.minItems,maxLength:s.maxItems})}},dz=(e,t)=>{if(void 0===e)return t;if(void 0===t)return e;switch(e._tag){case"ArrayConstraints":if("ArrayConstraints"===t._tag)return new dD({minLength:dJ(e.constraints.minLength,t.constraints.minLength),maxLength:dK(e.constraints.maxLength,t.constraints.maxLength)});break;case"NumberConstraints":switch(t._tag){case"NumberConstraints":return new dL({min:dJ(e.constraints.min,t.constraints.min),max:dK(e.constraints.max,t.constraints.max),noNaN:dB(e.constraints.noNaN,t.constraints.noNaN),noDefaultInfinity:dB(e.constraints.noDefaultInfinity,t.constraints.noDefaultInfinity)});case"IntegerConstraints":return new dU({min:dJ(e.constraints.min,t.constraints.min),max:dK(e.constraints.max,t.constraints.max)})}break;case"BigIntConstraints":if("BigIntConstraints"===t._tag)return new d$({min:dJ(e.constraints.min,t.constraints.min),max:dK(e.constraints.max,t.constraints.max)});break;case"StringConstraints":if("StringConstraints"===t._tag)return new dP({minLength:dJ(e.constraints.minLength,t.constraints.minLength),maxLength:dK(e.constraints.maxLength,t.constraints.maxLength)});break;case"IntegerConstraints":switch(t._tag){case"NumberConstraints":case"IntegerConstraints":return new dU({min:dJ(e.constraints.min,t.constraints.min),max:dK(e.constraints.max,t.constraints.max)})}}},dB=(e,t)=>void 0===e?t:void 0===t?e:e||t;function dJ(e,t){return void 0===e?t:void 0===t?e:e<=t?t:e}function dK(e,t){return void 0===e?t:void 0===t?e:e<=t?e:t}let dH=e=>e.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&"),dV=(e,t)=>{switch(t._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(e);case"SymbolKeyword":return Object.getOwnPropertySymbols(e);case"Refinement":return dV(e,t.from)}},dW=e=>Object.keys(e).concat(Object.getOwnPropertySymbols(e)),dG=e=>{let t,s=!1;return()=>(s||(t=e(),s=!0),t)},dY=e=>{if(R(e))return JSON.stringify(e);if(N(e)||null==e||A(e)||M(e)||K(e))return String(e);if(C(e))return String(e)+"n";if(!nY(e)&&q(e,"toString")&&F(e.toString)&&e.toString!==Object.prototype.toString)return e.toString();try{if(JSON.stringify(e),nY(e))return`[${e.map(dY).join(",")}]`;return`{${dW(e).map(t=>`${R(t)?JSON.stringify(t):String(t)}:${dY(e[t])}`).join(",")}}`}catch(t){return String(e)}},dQ=e=>"string"==typeof e?JSON.stringify(e):String(e),dX=e=>Array.isArray(e),dZ=e=>!Array.isArray(e),d0=e=>`[${dQ(e)}]`,d1=e=>dX(e)?e.map(d0).join(""):d0(e),d2=(e,t,s,n)=>{let i=e;return s&&nX(s)&&(i+=`
at path: ${d1(s)}`),void 0!==t&&(i+=`
details: ${t}`),n&&(i+=`
schema (${n._tag}): ${n}`),i},d5=(e,t,s)=>d2("Missing annotation",e,t,s),d3=(e,t,s)=>d2("Unsupported schema or overlapping types",`cannot extend ${e} with ${t}`,s),d4=e=>d2("Unsupported key schema",void 0,void 0,e),d8=e=>d2("Unsupported literal",`literal value: ${dY(e)}`),d6=e=>d2("Duplicate index signature",`${e} index signature`),d7=d2("Unsupported index signature parameter","An index signature parameter type must be `string`, `symbol`, a template literal type or a refinement of the previous types"),d9=d2("Invalid element","A required element cannot follow an optional element. ts(1257)"),he=e=>d2("Duplicate property signature transformation",`Duplicate key ${dY(e)}`),ht=e=>d2("Duplicate property signature",`Duplicate key ${dY(e)}`),hs=Symbol.for("@effect/schema/annotation/Type"),hn=Symbol.for("@effect/schema/annotation/Message"),hi=Symbol.for("@effect/schema/annotation/MissingMessage"),hr=Symbol.for("@effect/schema/annotation/Identifier"),ha=Symbol.for("@effect/schema/annotation/Title"),ho=Symbol.for("@effect/schema/annotation/Description"),hl=Symbol.for("@effect/schema/annotation/Examples"),hc=Symbol.for("@effect/schema/annotation/Default"),hu=Symbol.for("@effect/schema/annotation/JSONSchema"),hp=Symbol.for("@effect/schema/annotation/Documentation"),hd=Symbol.for("@effect/schema/annotation/Concurrency"),hh=Symbol.for("@effect/schema/annotation/Batching"),hm=Symbol.for("@effect/schema/annotation/ParseIssueTitle"),hf=Symbol.for("@effect/schema/annotation/ParseOptions"),hg=Symbol.for("@effect/schema/annotation/Surrogate"),hb=Symbol.for("@effect/schema/annotation/StableFilter"),hx=b(2,(e,t)=>Object.prototype.hasOwnProperty.call(e.annotations,t)?e3(e.annotations[t]):nS()),hy=hx(hn),hv=hx(hi),h_=hx(ha),hw=hx(hr),hS=hx(ho),hk=hx(hd),hE=hx(hh),hO=hx(hm),hT=hx(hf),hI=hx(hg),hR=hx(hb),hN=Symbol.for("@effect/schema/annotation/JSONIdentifier"),hA=hx(hN);class hC{typeParameters;decodeUnknown;encodeUnknown;annotations;_tag="Declaration";constructor(e,t,s,n={}){this.typeParameters=e,this.decodeUnknown=t,this.encodeUnknown=s,this.annotations=n}toString(){return nE(mY(this),()=>"<declaration schema>")}toJSON(){return{_tag:this._tag,typeParameters:this.typeParameters.map(e=>e.toJSON()),annotations:mz(this.annotations)}}}let hM=e=>t=>t._tag===e;class hF{literal;annotations;_tag="Literal";constructor(e,t={}){this.literal=e,this.annotations=t}toString(){return nE(mY(this),()=>dY(this.literal))}toJSON(){return{_tag:this._tag,literal:C(this.literal)?String(this.literal):this.literal,annotations:mz(this.annotations)}}}let hj=hM("Literal"),hL=new hF(null,{[hr]:"null"});class hP{symbol;annotations;_tag="UniqueSymbol";constructor(e,t={}){this.symbol=e,this.annotations=t}toString(){return nE(mY(this),()=>dY(this.symbol))}toJSON(){return{_tag:this._tag,symbol:String(this.symbol),annotations:mz(this.annotations)}}}class hU{annotations;_tag="UndefinedKeyword";constructor(e={}){this.annotations=e}toString(){return mG(this)}toJSON(){return{_tag:this._tag,annotations:mz(this.annotations)}}}let hD=new hU({[ha]:"undefined"});class h${annotations;_tag="VoidKeyword";constructor(e={}){this.annotations=e}toString(){return mG(this)}toJSON(){return{_tag:this._tag,annotations:mz(this.annotations)}}}let hq=new h$({[ha]:"void"});class hz{annotations;_tag="NeverKeyword";constructor(e={}){this.annotations=e}toString(){return mG(this)}toJSON(){return{_tag:this._tag,annotations:mz(this.annotations)}}}let hB=new hz({[ha]:"never"});class hJ{annotations;_tag="UnknownKeyword";constructor(e={}){this.annotations=e}toString(){return mG(this)}toJSON(){return{_tag:this._tag,annotations:mz(this.annotations)}}}let hK=new hJ({[ha]:"unknown"});class hH{annotations;_tag="AnyKeyword";constructor(e={}){this.annotations=e}toString(){return mG(this)}toJSON(){return{_tag:this._tag,annotations:mz(this.annotations)}}}let hV=new hH({[ha]:"any"});class hW{annotations;_tag="StringKeyword";constructor(e={}){this.annotations=e}toString(){return mG(this)}toJSON(){return{_tag:this._tag,annotations:mz(this.annotations)}}}let hG=new hW({[ha]:"string",[ho]:"a string"}),hY=hM("StringKeyword");class hQ{annotations;_tag="NumberKeyword";constructor(e={}){this.annotations=e}toString(){return mG(this)}toJSON(){return{_tag:this._tag,annotations:mz(this.annotations)}}}let hX=new hQ({[ha]:"number",[ho]:"a number"}),hZ=hM("NumberKeyword");class h0{annotations;_tag="BooleanKeyword";constructor(e={}){this.annotations=e}toString(){return mG(this)}toJSON(){return{_tag:this._tag,annotations:mz(this.annotations)}}}let h1=new h0({[ha]:"boolean",[ho]:"a boolean"});class h2{annotations;_tag="BigIntKeyword";constructor(e={}){this.annotations=e}toString(){return mG(this)}toJSON(){return{_tag:this._tag,annotations:mz(this.annotations)}}}let h5=new h2({[ha]:"bigint",[ho]:"a bigint"});class h3{annotations;_tag="SymbolKeyword";constructor(e={}){this.annotations=e}toString(){return mG(this)}toJSON(){return{_tag:this._tag,annotations:mz(this.annotations)}}}let h4=new h3({[ha]:"symbol",[ho]:"a symbol"}),h8=hM("SymbolKeyword");class h6{annotations;_tag="ObjectKeyword";constructor(e={}){this.annotations=e}toString(){return mG(this)}toJSON(){return{_tag:this._tag,annotations:mz(this.annotations)}}}let h7=new h6({[hr]:"object",[ha]:"object",[ho]:"an object in the TypeScript meaning, i.e. the `object` type"});class h9{type;annotations;constructor(e,t={}){this.type=e,this.annotations=t}toJSON(){return{type:this.type.toJSON(),annotations:mz(this.annotations)}}toString(){return String(this.type)}}class me extends h9{isOptional;constructor(e,t,s={}){super(e,s),this.isOptional=t}toJSON(){return{type:this.type.toJSON(),isOptional:this.isOptional,annotations:mz(this.annotations)}}toString(){return String(this.type)+(this.isOptional?"?":"")}}let mt=e=>e.map(e=>e.type);class ms{elements;rest;isReadonly;annotations;_tag="TupleType";constructor(e,t,s,n={}){this.elements=e,this.rest=t,this.isReadonly=s,this.annotations=n;let i=!1,r=!1;for(let t of e)if(t.isOptional)i=!0;else if(i){r=!0;break}if(r||i&&t.length>1)throw Error(d9)}toString(){return nE(mY(this),()=>mn(this))}toJSON(){return{_tag:this._tag,elements:this.elements.map(e=>e.toJSON()),rest:this.rest.map(e=>e.toJSON()),isReadonly:this.isReadonly,annotations:mz(this.annotations)}}}let mn=e=>{let t=e.elements.map(String).join(", ");return nH(e.rest,{onEmpty:()=>`readonly [${t}]`,onNonEmpty:(s,n)=>{let i=String(s),r=i.includes(" | ")?`(${i})`:i;if(n.length>0){let s=n.map(String).join(", ");return e.elements.length>0?`readonly [${t}, ...${r}[], ${s}]`:`readonly [...${r}[], ${s}]`}return e.elements.length>0?`readonly [${t}, ...${r}[]]`:`ReadonlyArray<${i}>`}})};class mi extends me{name;isReadonly;constructor(e,t,s,n,i){super(t,s,i),this.name=e,this.isReadonly=n}toJSON(){return{name:String(this.name),type:this.type.toJSON(),isOptional:this.isOptional,isReadonly:this.isReadonly,annotations:mz(this.annotations)}}}let mr=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return mr(e.from)}return!1};class ma{type;isReadonly;parameter;constructor(e,t,s){if(this.type=t,this.isReadonly=s,mr(e))this.parameter=e;else throw Error(d7)}toJSON(){return{parameter:this.parameter.toJSON(),type:this.type.toJSON(),isReadonly:this.isReadonly}}}class mo{annotations;_tag="TypeLiteral";propertySignatures;indexSignatures;constructor(e,t,s={}){this.annotations=s;let n={};for(let t=0;t<e.length;t++){let s=e[t].name;if(Object.prototype.hasOwnProperty.call(n,s))throw Error(ht(s));n[s]=null}let i={string:!1,symbol:!1};for(let e=0;e<t.length;e++){let s=mW(t[e].parameter);if(hY(s)){if(i.string)throw Error(d6("string"));i.string=!0}else if(h8(s)){if(i.symbol)throw Error(d6("symbol"));i.symbol=!0}}this.propertySignatures=mJ(e),this.indexSignatures=mK(t)}toString(){return nE(mY(this),()=>ml(this))}toJSON(){return{_tag:this._tag,propertySignatures:this.propertySignatures.map(e=>e.toJSON()),indexSignatures:this.indexSignatures.map(e=>e.toJSON()),annotations:mz(this.annotations)}}}let ml=e=>{let t=e.propertySignatures.map(e=>(e.isReadonly?"readonly ":"")+String(e.name)+(e.isOptional?"?":"")+": "+e.type).join("; ");if(e.indexSignatures.length>0){let s=e.indexSignatures.map(e=>(e.isReadonly?"readonly ":"")+`[x: ${mW(e.parameter)}]: ${e.type}`).join("; ");return e.propertySignatures.length>0?`{ ${t}; ${s} }`:`{ ${s} }`}return e.propertySignatures.length>0?`{ ${t} }`:"{}"},mc=hM("TypeLiteral"),mu=e=>e.filter(e=>e!==hB),mp=is(nq(n$,e=>{switch(e._tag){case"AnyKeyword":return 0;case"UnknownKeyword":return 1;case"ObjectKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3}return 4})),md={string:"StringKeyword",number:"NumberKeyword",boolean:"BooleanKeyword",bigint:"BigIntKeyword"},mh=e=>ig(e,e=>mx(e)?mh(e.types):[e]),mm=e=>{let t=mp(e),s=[],n={},i=[];for(let e of t)switch(e._tag){case"NeverKeyword":break;case"AnyKeyword":return[hV];case"UnknownKeyword":return[hK];case"ObjectKeyword":case"UndefinedKeyword":case"VoidKeyword":case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":n[e._tag]||(n[e._tag]=e,s.push(e));break;case"Literal":{let t=typeof e.literal;switch(t){case"string":case"number":case"bigint":case"boolean":n[md[t]]||i.includes(e.literal)||(i.push(e.literal),s.push(e));break;case"object":i.includes(e.literal)||(i.push(e.literal),s.push(e))}break}case"UniqueSymbol":n.SymbolKeyword||i.includes(e.symbol)||(i.push(e.symbol),s.push(e));break;case"TupleType":n.ObjectKeyword||s.push(e);break;case"TypeLiteral":0===e.propertySignatures.length&&0===e.indexSignatures.length?n["{}"]||(n["{}"]=e,s.push(e)):n.ObjectKeyword||s.push(e);break;default:s.push(e)}return s};class mf{types;annotations;static make=(e,t)=>{let s=[],n=new Set;for(let t=0;t<e.length;t++){let i=e[t];i===hB||n.has(i)||(n.add(i),s.push(i))}return mf.union(s,t)};static members=(e,t)=>mf.union(mu(e),t);static unify=(e,t)=>mf.union(mm(mh(e)),t);static union=(e,t)=>mb(e)?new mf(e,t):1===e.length?e[0]:hB;_tag="Union";constructor(e,t={}){this.types=e,this.annotations=t}toString(){return nE(mY(this),()=>this.types.map(String).join(" | "))}toJSON(){return{_tag:this._tag,types:this.types.map(e=>e.toJSON()),annotations:mz(this.annotations)}}}let mg=(e,t)=>e.map(t),mb=e=>e.length>1,mx=hM("Union"),my=T(Symbol.for("@effect/schema/AST/toJSONMemoMap"),()=>new WeakMap);class mv{f;annotations;_tag="Suspend";constructor(e,t={}){this.f=e,this.annotations=t,this.f=dG(e)}toString(){return mY(this).pipe(nO(()=>nM(nN(this.f)(),e=>mY(e))),nE(()=>"<suspended schema>"))}toJSON(){let e=this.f(),t=my.get(e);return t||(my.set(e,{_tag:this._tag}),t={_tag:this._tag,ast:e.toJSON(),annotations:mz(this.annotations)},my.set(e,t)),t}}class m_{from;filter;annotations;_tag="Refinement";constructor(e,t,s={}){this.from=e,this.filter=t,this.annotations=s}toString(){return nE(mY(this),()=>`{ ${this.from} | filter }`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),annotations:mz(this.annotations)}}}let mw=hM("Refinement"),mS={};class mk{from;to;transformation;annotations;_tag="Transformation";constructor(e,t,s,n={}){this.from=e,this.to=t,this.transformation=s,this.annotations=n}toString(){return nE(mY(this),()=>`(${String(this.from)} <-> ${String(this.to)})`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),to:this.to.toJSON(),annotations:mz(this.annotations)}}}let mE=hM("Transformation");class mO{decode;encode;_tag="FinalTransformation";constructor(e,t){this.decode=e,this.encode=t}}class mT{_tag="ComposeTransformation"}class mI{from;to;decode;encode;constructor(e,t,s,n){this.from=e,this.to=t,this.decode=s,this.encode=n}}class mR{propertySignatureTransformations;_tag="TypeLiteralTransformation";constructor(e){this.propertySignatureTransformations=e;let t={},s={};for(let n of e){let e=n.from;if(t[e])throw Error(he(e));t[e]=!0;let i=n.to;if(s[i])throw Error(he(i));s[i]=!0}}}let mN=(i="TypeLiteralTransformation",e=>e._tag===i),mA=(e,t)=>{let s=Object.getOwnPropertyDescriptors(e);return s.annotations.value={...e.annotations,...t},Object.create(Object.getPrototypeOf(e),s)},mC=e=>{let t=`^${dH(e.head)}`;for(let s of e.spans)hY(s.type)?t+=".*":hZ(s.type)&&(t+="[+-]?\\d*\\.?\\d+(?:[Ee][+-]?\\d+)?"),t+=dH(s.literal);return new RegExp(t+="$")},mM=e=>{switch(e._tag){case"TupleType":{let t=!1,s=[];for(let n of e.elements)n.isOptional&&(t=!0),s.push(n.type);return t&&s.push(hD),s=s.concat(mt(e.rest)),mf.make(s)}case"Refinement":return mM(e.from);case"Union":return mf.make(e.types.map(mM));case"Suspend":return mM(e.f())}throw Error(errors_.getASTUnsupportedSchema(e))},mF=(e,t)=>{let s=[],n=[],i=e=>{switch(e._tag){case"NeverKeyword":break;case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":case"Refinement":n.push(new ma(e,t,!0));break;case"Literal":if(R(e.literal)||N(e.literal))s.push(new mi(e.literal,t,!1,!0));else throw Error(d8(e.literal));break;case"Enums":for(let[n,i]of e.enums)s.push(new mi(i,t,!1,!0));break;case"UniqueSymbol":s.push(new mi(e.symbol,t,!1,!0));break;case"Union":e.types.forEach(i);break;default:throw Error(d4(e))}};return i(e),{propertySignatures:s,indexSignatures:n}},mj=e=>{switch(e._tag){case"TupleType":return!1===e.isReadonly?e:new ms(e.elements,e.rest,!1,e.annotations);case"TypeLiteral":{let t=mD(e.propertySignatures,e=>!1===e.isReadonly?e:new mi(e.name,e.type,e.isOptional,!1,e.annotations)),s=mD(e.indexSignatures,e=>!1===e.isReadonly?e:new ma(e.parameter,e.type,!1));return t===e.propertySignatures&&s===e.indexSignatures?e:new mo(t,s,e.annotations)}case"Union":{let t=mD(e.types,mj);return t===e.types?e:mf.make(t,e.annotations)}case"Suspend":return new mv(()=>mj(e.f()),e.annotations);case"Refinement":{let t=mj(e.from);return t===e.from?e:new m_(t,e.filter,e.annotations)}case"Transformation":{let t=mj(e.from),s=mj(e.to);return t===e.from&&s===e.to?e:new mk(t,s,e.transformation,e.annotations)}}return e},mL=e=>{switch(e._tag){case"Declaration":{let t=mD(e.typeParameters,mL);return t===e.typeParameters?e:new hC(t,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{let t=mD(e.elements,e=>{let t=mL(e.type);return t===e.type?e:new me(t,e.isOptional)}),s=mt(e.rest),n=mD(s,mL);return t===e.elements&&n===s?e:new ms(t,n.map(e=>new h9(e)),e.isReadonly,e.annotations)}case"TypeLiteral":{let t=mD(e.propertySignatures,e=>{let t=mL(e.type);return t===e.type?e:new mi(e.name,t,e.isOptional,e.isReadonly)}),s=mD(e.indexSignatures,e=>{let t=mL(e.type);return t===e.type?e:new ma(e.parameter,t,e.isReadonly)});return t===e.propertySignatures&&s===e.indexSignatures?e:new mo(t,s,e.annotations)}case"Union":{let t=mD(e.types,mL);return t===e.types?e:mf.make(t,e.annotations)}case"Suspend":return new mv(()=>mL(e.f()),e.annotations);case"Refinement":{let t=mL(e.from);return t===e.from?e:new m_(t,e.filter,e.annotations)}case"Transformation":return mL(e.to)}return e},mP=e=>nO(hA(e),()=>hw(e)),mU=e=>nk(mP(e),{onNone:()=>void 0,onSome:e=>({[hN]:e})});function mD(e,t){let s=!1,n=nJ(e.length);for(let i=0;i<e.length;i++){let r=e[i],a=t(r);a!==r&&(s=!0),n[i]=a}return s?n:e}let m$=(e,t)=>{switch(e._tag){case"Declaration":{let s=mD(e.typeParameters,e=>m$(e,t));return s===e.typeParameters?e:new hC(s,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{let s=mD(e.elements,e=>{let s=m$(e.type,t);return s===e.type?e:new me(s,e.isOptional)}),n=mt(e.rest),i=mD(n,e=>m$(e,t));return s===e.elements&&i===n?e:new ms(s,i.map(e=>new h9(e)),e.isReadonly,mU(e))}case"TypeLiteral":{let s=mD(e.propertySignatures,e=>{let s=m$(e.type,t);return s===e.type?e:new mi(e.name,s,e.isOptional,e.isReadonly)}),n=mD(e.indexSignatures,e=>{let s=m$(e.type,t);return s===e.type?e:new ma(e.parameter,s,e.isReadonly)});return s===e.propertySignatures&&n===e.indexSignatures?e:new mo(s,n,mU(e))}case"Union":{let s=mD(e.types,e=>m$(e,t));return s===e.types?e:mf.make(s,mU(e))}case"Suspend":return new mv(()=>m$(e.f(),t),mU(e));case"Refinement":{let s=m$(e.from,t);if(t){if(s===e.from)return e;if(!mE(e.from)){let t=hR(e);if(e2(t)&&!0===t.value)return new m_(s,e.filter)}}return s}case"Transformation":return m$(e.from,t)}return e},mq=e=>m$(e,!1),mz=e=>{let t={};for(let s of Object.getOwnPropertySymbols(e))t[String(s)]=e[s];return t},mB=e=>{switch(e._tag){case"NeverKeyword":return 0;case"Literal":case"UndefinedKeyword":case"VoidKeyword":case"UniqueSymbol":return 1;case"BooleanKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3;case"ObjectKeyword":return 5;case"UnknownKeyword":case"AnyKeyword":return 6;default:return 4}},mJ=is(nq(n$,e=>mB(e.type))),mK=is(nq(n$,e=>{switch(mW(e.parameter)._tag){case"StringKeyword":return 2;case"SymbolKeyword":return 3;case"TemplateLiteral":return 1}})),mH=e=>e.reduce(null,null),mV=e=>{switch(e._tag){case"TupleType":return[2,e.elements.length,e.rest.length];case"TypeLiteral":{let t=e.propertySignatures.length,s=e.indexSignatures.length;return t+s===0?[-4,0,0]:[4,t,s]}case"Declaration":{let t=hI(e);if(Option.isSome(t)){let[e,s,n]=mV(t.value);return[6,s,n]}return[6,0,0]}case"Suspend":return[8,0,0];case"Union":return mH(e.types.map(mV));case"Refinement":{let[t,s,n]=mV(e.from);return[t+1,s,n]}case"Transformation":return mV(e.from);case"ObjectKeyword":return[-2,0,0];case"UnknownKeyword":case"AnyKeyword":return[-4,0,0];default:return null}},mW=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return e;case"Refinement":return mW(e.from)}},mG=e=>nE(mY(e),()=>e._tag),mY=e=>hw(e).pipe(nO(()=>h_(e)),nO(()=>hS(e))),mQ=Symbol.for("@effect/schema/EquivalenceHookId"),mX=Symbol.for("@effect/schema/TypeId/GreaterThan"),mZ=Symbol.for("@effect/schema/TypeId/GreaterThanOrEqualTo"),m0=Symbol.for("@effect/schema/TypeId/LessThan"),m1=Symbol.for("@effect/schema/TypeId/LessThanOrEqualTo"),m2=Symbol.for("@effect/schema/TypeId/Int"),m5=Symbol.for("@effect/schema/TypeId/MinLength"),m3=Symbol.for("@effect/schema/TypeId/Length"),m4=Symbol.for("effect/Clock"),m8=tc("effect/Clock"),m6=2147483648-1,m7={unsafeSchedule(e,t){let s=dh(t);if(s>m6)return _;let n=!1,i=setTimeout(()=>{n=!0,e()},s);return()=>(clearTimeout(i),!n)}},m9=function(){let e=BigInt(1e6);if("undefined"==typeof performance)return()=>BigInt(Date.now())*e;let t=BigInt(Date.now())*e-BigInt(Math.round(1e6*performance.now()));return()=>t+BigInt(Math.round(1e6*performance.now()))}(),fe=function(){let e="object"==typeof process&&"hrtime"in process&&"function"==typeof process.hrtime.bigint?process.hrtime:void 0;if(!e)return m9;let t=m9()-e.bigint();return()=>t+e.bigint()}();class ft{[m4]=m4;unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return fe()}currentTimeMillis=ua(()=>this.unsafeCurrentTimeMillis());currentTimeNanos=ua(()=>this.unsafeCurrentTimeNanos());scheduler(){return ui(m7)}sleep(e){return cN(t=>cT(ua(m7.unsafeSchedule(()=>t(ud),e))))}}let fs="InvalidData",fn="MissingData",fi="SourceUnavailable",fr="Unsupported",fa=Symbol.for("effect/ConfigError"),fo={_tag:"ConfigError",[fa]:fa},fl=(e,t)=>{let s=Object.create(fo);return s._op="And",s.left=e,s.right=t,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),s},fc=(e,t)=>{let s=Object.create(fo);return s._op="Or",s.left=e,s.right=t,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),s},fu=(e,t,s={pathDelim:"."})=>{let n=Object.create(fo);return n._op=fs,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){let e=S(this.path,iS(s.pathDelim));return`(Invalid data at ${e}: "${this.message}")`}}),n},fp=(e,t,s={pathDelim:"."})=>{let n=Object.create(fo);return n._op=fn,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){let e=S(this.path,iS(s.pathDelim));return`(Missing data at ${e}: "${this.message}")`}}),n},fd=(e,t,s,n={pathDelim:"."})=>{let i=Object.create(fo);return i._op=fi,i.path=e,i.message=t,i.cause=s,Object.defineProperty(i,"toString",{enumerable:!1,value(){let e=S(this.path,iS(n.pathDelim));return`(Source unavailable at ${e}: "${this.message}")`}}),i},fh=(e,t,s={pathDelim:"."})=>{let n=Object.create(fo);return n._op=fr,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){let e=S(this.path,iS(s.pathDelim));return`(Unsupported operation at ${e}: "${this.message}")`}}),n},fm=b(2,(e,t)=>{switch(e._op){case"And":return fl(fm(e.left,t),fm(e.right,t));case"Or":return fc(fm(e.left,t),fm(e.right,t));case fs:return fu([...t,...e.path],e.message);case fn:return fp([...t,...e.path],e.message);case fi:return fd([...t,...e.path],e.message,e.cause);case fr:return fh([...t,...e.path],e.message)}}),ff={_tag:"Empty"},fg=b(2,(e,t)=>{let s=aH(t),n=e;for(;aB(s);){let e=s.head;switch(e._tag){case"Empty":s=s.tail;break;case"AndThen":s=aJ(e.first,aJ(e.second,s.tail));break;case"MapName":n=im(n,e.f),s=s.tail;break;case"Nested":n=nV(n,e.name),s=s.tail;break;case"Unnested":if(!S(n5(n),nP(e.name)))return tv(fp(n,`Expected ${e.name} to be in path in ConfigProvider#unnested`));n=n6(n),s=s.tail}}return t_(n)}),fb=(e,t)=>[...e,...t],fx=Symbol.for("effect/ConfigProvider"),fy=tc("effect/ConfigProvider"),fv=Symbol.for("effect/ConfigProviderFlat"),f_=e=>({[fx]:fx,pipe(){return eT(this,arguments)},...e}),fw=e=>({[fv]:fv,patch:e.patch,load:(t,s,n=!0)=>e.load(t,s,n),enumerateChildren:e.enumerateChildren}),fS=e=>f_({load:t=>cV(fO(e,id(),t,!1),e=>nk(n5(e),{onNone:()=>cq(fp(id(),`Expected a single value having structure: ${t}`)),onSome:ui})),flattened:e}),fk=(e,t,s,n)=>{let i=iv(s.length,t=>t>=n.length?nS():e3([e(t),t+1])),r=iv(n.length,e=>e>=s.length?nS():e3([t(e),e+1]));return[fb(s,i),fb(n,r)]},fE=(e,t)=>{let s=t;if("Nested"===s._tag){let t=e.slice();for(;"Nested"===s._tag;)t.push(s.name),s=s.config;return t}return e},fO=(e,t,s,n)=>{switch(s._tag){case"Constant":return ui(ih(s.value));case"Described":return ur(()=>fO(e,t,s.config,n));case"Fail":return cq(fp(t,s.message));case"Fallback":return S(ur(()=>fO(e,t,s.first,n)),cC(i=>s.condition(i)?S(fO(e,t,s.second,n),cC(e=>cq(fc(i,e)))):cq(i)));case"Lazy":return ur(()=>fO(e,t,s.config(),n));case"MapOrFail":return ur(()=>S(fO(e,t,s.original,n),cV(c0(e=>S(s.mapOrFail(e),c6(fm(fE(t,s.original))))))));case"Nested":return ur(()=>fO(e,fb(t,ih(s.name)),s.config,n));case"Primitive":return S(fg(t,e.patch),cV(t=>S(e.load(t,s,n),cV(e=>{if(0===e.length){let e=S(n4(t),nE(()=>"<n/a>"));return cq(fp([],`Expected ${s.description} with name ${e}`))}return ui(e)}))));case"Sequence":return S(fg(t,e.patch),cV(n=>S(e.enumerateChildren(n),cV(fA),cV(i=>0===i.length?ur(()=>c4(fO(e,n,s.config,!0),ih)):S(c0(i,n=>fO(e,nW(t,`[${n}]`),s.config,!0)),c4(e=>{let t=ib(e);return 0===t.length?ih(id()):ih(t)}))))));case"HashMap":return ur(()=>S(fg(t,e.patch),cV(t=>S(e.enumerateChildren(t),cV(i=>S(i,c0(i=>fO(e,fb(t,ih(i)),s.valueConfig,n)),c4(e=>0===e.length?ih(rI()):S(fN(e),im(e=>aC(ii(nK(i),e)))))))))));case"ZipWith":return ur(()=>S(fO(e,t,s.left,n),cD,cV(i=>S(fO(e,t,s.right,n),cD,cV(e=>{if(tx(i)&&tx(e))return cq(fl(i.left,e.left));if(tx(i)&&ty(e))return cq(i.left);if(ty(i)&&tx(e))return cq(e.left);if(ty(i)&&ty(e)){let n=S(t,iS(".")),r=fT(t,n),[a,o]=fk(r,r,S(i.right,im(t_)),S(e.right,im(t_)));return S(a,ii(o),c0(([e,t])=>S(ux(e,t),c4(([e,t])=>s.zip(e,t)))))}throw Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},fT=(e,t)=>s=>tv(fp(e,`The element at index ${s} in a sequence at path "${t}" was missing`)),fI=(e,t)=>e.split(RegExp(`\\s*${dH(t)}\\s*`)),fR=(e,t,s,n,i)=>i?S(fI(e,n),c0(e=>s.parse(e.trim())),c6(fm(t))):S(s.parse(e),c8({onFailure:fm(t),onSuccess:ih})),fN=e=>Object.keys(e[0]).map(t=>e.map(e=>e[t])),fA=e=>S(c0(e,fM),c8({onFailure:()=>id(),onSuccess:is(n$)}),cD,c4(tS)),fC=/^(\[(\d+)\])$/,fM=e=>{let t=e.match(fC);if(null!==t){let e=t[2];return S(void 0!==e&&e.length>0?e3(e):nS(),nM(fF))}return nS()},fF=e=>{let t=Number.parseInt(e);return Number.isNaN(t)?nS():e3(t)},fj=Symbol.for("effect/Console"),fL=tc("effect/Console"),fP={[fj]:fj,assert:(e,...t)=>ua(()=>{console.assert(e,...t)}),clear:ua(()=>{console.clear()}),count:e=>ua(()=>{console.count(e)}),countReset:e=>ua(()=>{console.countReset(e)}),debug:(...e)=>ua(()=>{console.debug(...e)}),dir:(e,t)=>ua(()=>{console.dir(e,t)}),dirxml:(...e)=>ua(()=>{console.dirxml(...e)}),error:(...e)=>ua(()=>{console.error(...e)}),group:e=>e?.collapsed?ua(()=>console.groupCollapsed(e?.label)):ua(()=>console.group(e?.label)),groupEnd:ua(()=>{console.groupEnd()}),info:(...e)=>ua(()=>{console.info(...e)}),log:(...e)=>ua(()=>{console.log(...e)}),table:(e,t)=>ua(()=>{console.table(e,t)}),time:e=>ua(()=>console.time(e)),timeEnd:e=>ua(()=>console.timeEnd(e)),timeLog:(e,...t)=>ua(()=>{console.timeLog(e,...t)}),trace:(...e)=>ua(()=>{console.trace(...e)}),warn:(...e)=>ua(()=>{console.warn(...e)}),unsafe:console},fU=Symbol.for("effect/Random"),fD=tc("effect/Random");class f${seed;[fU]=fU;PRNG;constructor(e){this.seed=e,this.PRNG=new Q(e)}get next(){return ua(()=>this.PRNG.number())}get nextBoolean(){return c4(this.next,e=>e>.5)}get nextInt(){return ua(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(e,t){return c4(this.next,s=>(t-e)*s+e)}nextIntBetween(e,t){return ua(()=>this.PRNG.integer(t-e)+e)}shuffle(e){return fq(e,e=>this.nextIntBetween(0,e))}}let fq=(e,t)=>ur(()=>S(ua(()=>Array.from(e)),cV(e=>{let s=[];for(let t=e.length;t>=2;t-=1)s.push(t);return S(s,c1(s=>S(t(s),c4(t=>fz(e,s-1,t)))),cO(i0(e)))}))),fz=(e,t,s)=>{let n=e[t];return e[t]=e[s],e[s]=n,e},fB=S(tp(),tr(m8,new ft),tr(fL,fP),tr(fD,new f$(4294967296*Math.random()>>>0)),tr(fy,(e=>{let{pathDelim:t,seqDelim:s}=Object.assign({},{pathDelim:"_",seqDelim:","},e),n=e=>S(e,iS(t)),i=e=>e.split(t),r=()=>"undefined"!=typeof process&&"env"in process&&"object"==typeof process.env?process.env:{};return fS(fw({load:(e,t,i=!0)=>{let a=n(e),o=r();return S(a in o?e3(o[a]):nS(),c6(()=>fp(e,`Expected ${a} to exist in the process context`)),cV(n=>fR(n,e,t,s,i)))},enumerateChildren:e=>ua(()=>ae(Object.keys(r()).map(e=>i(e.toUpperCase())).filter(t=>{for(let s=0;s<e.length;s++){let n=S(e,n2(s)),i=t[s];if(void 0===i||n!==i)return!1}return!0}).flatMap(t=>t.slice(e.length,e.length+1)))),patch:ff}))})()),tr(cl,{[co]:co,span:(e,t,s,n,i,r)=>new cp(e,t,s,n,i,r),context:e=>e()})),fJ=T(Symbol.for("effect/DefaultServices/currentServices"),()=>uB(fB)),fK=e=>uA(fJ,t=>e(ta(t,m8))),fH=fK(e=>e.currentTimeMillis);r=e=>e.next,uA(fJ,e=>r(ta(e,fD)));let fV=e=>cV(cK,t=>pj(e,c2(t))),fW="Sequential",fG="Parallel",fY={_tag:fW},fQ=e=>e._tag===fW,fX=e=>e._tag===fG,fZ={_tag:fG},f0=e=>({_tag:"ParallelN",parallelism:e}),f1=Symbol.for("effect/FiberRefs");class f2{locals;[f1]=f1;constructor(e){this.locals=e}pipe(){return eT(this,arguments)}}let f5=(e,t,s,n=!1)=>{let i,r=t,a=s,o=n;for(;void 0===i;)if(nX(r)&&nX(a)){let e=n3(r)[0],t=n6(r),s=n3(a)[0],n=n3(a)[1],l=n6(a);e.startTimeMillis<s.startTimeMillis?(a=l,o=!0):e.startTimeMillis>s.startTimeMillis?r=t:e.id<s.id?(a=l,o=!0):e.id>s.id?r=t:i=[n,o]}else i=[e.initial,!0];return i},f3=b(3,(e,t,s)=>{let n=new Map(e.locals);return s.locals.forEach((e,s)=>{let i=e[0][1];if(!e[0][0][eb](t)){if(!n.has(s)){if(ex(i,s.initial))return;n.set(s,[[t,s.join(s.initial,i)]]);return}let r=n.get(s),[a,o]=f5(s,r,e);if(o){let e=s.diff(a,i),o=r[0][1],l=s.join(o,s.patch(e)(o));if(!ex(o,l)){let e;let i=r[0][0];e=i[eb](t)?[[i,l],...r.slice(1)]:[[t,l],...r],n.set(s,e)}}}}),new f2(n)}),f4=b(2,(e,t)=>{let s=new Map;return f8(e,s,t),new f2(s)}),f8=(e,t,s)=>{e.locals.forEach((e,n)=>{let i=e[0][1],r=n.patch(n.fork)(i);ex(i,r)?t.set(n,e):t.set(n,[[s,r],...e])})},f6=b(2,(e,t)=>{let s=new Map(e.locals);return s.delete(t),new f2(s)}),f7=b(2,(e,t)=>e.locals.has(t)?e3(n3(e.locals.get(t))[1]):nS()),f9=b(2,(e,t)=>S(f7(e,t),nE(()=>t.initial))),ge=b(2,(e,{fiberId:t,fiberRef:s,value:n})=>{if(0===e.locals.size)return new f2(new Map([[s,[[t,n]]]]));let i=new Map(e.locals);return gt(i,t,s,n),new f2(i)}),gt=(e,t,s,n)=>{let i;let r=e.get(s)??[];if(nX(r)){let[e,s]=n3(r);if(e[eb](t)){if(ex(s,n))return;i=[[t,n],...r.slice(1)]}else i=[[t,n],...r]}else i=[[t,n]];e.set(s,i)},gs=b(2,(e,{entries:t,forkAs:s})=>{if(0===e.locals.size)return new f2(new Map(t));let n=new Map(e.locals);return void 0!==s&&f8(e,n,s),t.forEach(([e,t])=>{1===t.length?gt(n,t[0][0],e,t[0][1]):t.forEach(([t,s])=>{gt(n,t,e,s)})}),new f2(n)}),gn="Empty",gi="Remove",gr="Update",ga="AndThen",go={_tag:gn},gl=(e,t)=>{let s=new Map(e.locals),n=go;for(let[e,i]of t.locals.entries()){let t=n3(i)[1],r=s.get(e);if(void 0!==r){let s=n3(r)[1];ex(s,t)||(n=gc({_tag:gr,fiberRef:e,patch:e.diff(s,t)})(n))}else n=gc({_tag:"Add",fiberRef:e,value:t})(n);s.delete(e)}for(let[e]of s.entries())n=gc({_tag:gi,fiberRef:e})(n);return n},gc=b(2,(e,t)=>({_tag:ga,first:e,second:t})),gu=b(3,(e,t,s)=>{let n=s,i=ih(e);for(;nX(i);){let e=n3(i),s=n6(i);switch(e._tag){case gn:i=s;break;case"Add":n=ge(n,{fiberId:t,fiberRef:e.fiberRef,value:e.value}),i=s;break;case gi:n=f6(n,e.fiberRef),i=s;break;case gr:{let r=f9(n,e.fiberRef);n=ge(n,{fiberId:t,fiberRef:e.fiberRef,value:e.fiberRef.patch(e.patch)(r)}),i=s;break}case ga:i=nV(e.first)(nV(e.second)(s))}}return n}),gp="effect/FiberStatus",gd=Symbol.for(gp),gh="Done",gm="Running",gf="Suspended",gg=ed(`${gp}-${gh}`);class gb{[gd]=gd;_tag=gh;[er](){return gg}[eb](e){return g_(e)&&e._tag===gh}}class gx{runtimeFlags;[gd]=gd;_tag=gm;constructor(e){this.runtimeFlags=e}[er](){return S(ea(gp),el(ea(this._tag)),el(ea(this.runtimeFlags)),eg(this))}[eb](e){return g_(e)&&e._tag===gm&&this.runtimeFlags===e.runtimeFlags}}class gy{runtimeFlags;blockingOn;[gd]=gd;_tag=gf;constructor(e,t){this.runtimeFlags=e,this.blockingOn=t}[er](){return S(ea(gp),el(ea(this._tag)),el(ea(this.runtimeFlags)),el(ea(this.blockingOn)),eg(this))}[eb](e){return g_(e)&&e._tag===gf&&this.runtimeFlags===e.runtimeFlags&&ex(this.blockingOn,e.blockingOn)}}let gv=new gb,g_=e=>q(e,gd),gw=e=>new gx(e),gS=(e,t)=>new gy(e,t),gk=e=>e._tag===gh,gE={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return eT(this,arguments)}},gO={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return eT(this,arguments)}},gT={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return eT(this,arguments)}},gI={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return eT(this,arguments)}},gR=(a=S(n$,nq(e=>e.ordinal)),b(2,(e,t)=>1===a(e,t))),gN=e=>{switch(e){case"All":return uk;case"Debug":return uO;case"Error":return gO;case"Fatal":return gE;case"Info":return uE;case"Trace":return gI;case"None":return uT;case"Warning":return gT}},gA=Symbol.for("effect/Readable"),gC=Symbol.for("effect/Ref"),gM={_A:e=>e};class gF{ref;[gC]=gM;[gA];constructor(e){this.ref=e,this[gA]=gA,this.get=ua(()=>ao(this.ref))}get;modify(e){return ua(()=>{let t=ao(this.ref),[s,n]=e(t);return t!==n&&al(n)(this.ref),s})}pipe(){return eT(this,arguments)}}let gj=e=>new gF(ar(e)),gL=e=>ua(()=>gj(e)),gP=e=>e.get,gU=b(2,(e,t)=>e.modify(()=>[void 0,t])),gD=b(2,(e,t)=>e.modify(t)),g$=b(2,(e,t)=>e.modify(e=>[void 0,t(e)]));class gq{buckets=[];scheduleTask(e,t){let s,n;for(s=0;s<this.buckets.length;s++)if(this.buckets[s][0]<=t)n=this.buckets[s];else break;if(n)n[1].push(e);else{let n=[];for(let e=0;e<s;e++)n.push(this.buckets[e]);n.push([t,[e]]);for(let e=s;e<this.buckets.length;e++)n.push(this.buckets[e]);this.buckets=n}}}class gz{maxNextTickBeforeTimer;running=!1;tasks=new gq;constructor(e){this.maxNextTickBeforeTimer=e}starveInternal(e){let t=this.tasks.buckets;for(let[e,s]of(this.tasks.buckets=[],t))for(let e=0;e<s.length;e++)s[e]();0===this.tasks.buckets.length?this.running=!1:this.starve(e)}starve(e=0){e>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(e+1))}shouldYield(e){return e.currentOpCount>e.getFiberRef(uV)&&e.getFiberRef(uH)}scheduleTask(e,t){this.tasks.scheduleTask(e,t),this.running||(this.running=!0,this.starve())}}let gB=T(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new gz(2048));class gJ{tasks=new gq;deferred=!1;scheduleTask(e,t){this.deferred?gB.scheduleTask(e,t):this.tasks.scheduleTask(e,t)}shouldYield(e){return e.currentOpCount>e.getFiberRef(uV)&&e.getFiberRef(uH)}flush(){for(;this.tasks.buckets.length>0;){let e=this.tasks.buckets;for(let[t,s]of(this.tasks.buckets=[],e))for(let e=0;e<s.length;e++)s[e]()}this.deferred=!0}}let gK=T(Symbol.for("effect/FiberRef/currentScheduler"),()=>u$(gB)),gH=(e,t)=>({_tag:"Par",left:e,right:t}),gV=(e,t)=>({_tag:"Seq",left:e,right:t}),gW=e=>{let t=aH(e),s=aK();for(;;){let[e,n]=aY(t,[g2(),aK()],([e,t],s)=>{let[n,i]=gG(s);return[g3(e,n),aV(t,i)]});if(s=gY(s,e),az(n))return aQ(s);t=n}throw Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},gG=e=>{let t=e,s=g2(),n=aK(),i=aK();for(;;)switch(t._tag){case"Empty":if(az(n))return[s,i];t=n.head,n=n.tail;break;case"Par":n=aJ(t.right,n),t=t.left;break;case"Seq":{let e=t.left,s=t.right;switch(e._tag){case"Empty":t=s;break;case"Par":{let n=e.left,i=e.right;t=gH(gV(n,s),gV(i,s));break}case"Seq":t=gV(e.left,gV(e.right,s));break;case"Single":t=e,i=aJ(s,i)}break}case"Single":if(s=g5(s,t),az(n))return[s,i];t=n.head,n=n.tail}throw Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},gY=(e,t)=>{if(az(e))return aH(g6(t));if(g4(t))return e;let s=bn(e.head),n=g8(t);return 1===s.length&&1===n.length&&ex(s[0],n[0])?aJ(bs(e.head,g6(t)),e.tail):aJ(g6(t),e)},gQ=Symbol.for("effect/RequestBlock/Entry"),gX={_R:e=>e},gZ=Symbol.for("effect/RequestBlock/RequestBlockParallel"),g0={_R:e=>e};class g1{map;[gZ]=g0;constructor(e){this.map=e}}let g2=()=>new g1(rI()),g5=(e,t)=>new g1(rD(e.map,t.dataSource,e=>nT(nC(e,i7(t.blockedRequest)),()=>iZ(t.blockedRequest)))),g3=(e,t)=>new g1(rJ(e.map,t.map,(e,t,s)=>rM(e,s,nk(rN(e,s),{onNone:()=>t,onSome:e=>rt(t,e)})))),g4=e=>aM(e.map),g8=e=>Array.from(rj(e.map)),g6=e=>bt(rz(e.map,e=>iZ(e))),g7=Symbol.for("effect/RequestBlock/RequestBlockSequential"),g9={_R:e=>e};class be{map;[g7]=g9;constructor(e){this.map=e}}let bt=e=>new be(e),bs=(e,t)=>new be(rJ(t.map,e.map,(e,t,s)=>rM(e,s,nk(rN(e,s),{onNone:()=>iQ(),onSome:e=>rt(e,t)})))),bn=e=>Array.from(rj(e.map)),bi=e=>Array.from(e.map),br=T(Symbol.for("effect/FiberRef/currentRequestMap"),()=>u$(new Map)),ba=(e,t,s,n)=>{switch(e){case void 0:return t();case"unbounded":return s();case"inherit":return uA(uX,e=>"unbounded"===e?s():e>1?n(e):t());default:return e>1?n(e):t()}},bo=(e,t,s)=>{switch(e){case void 0:return t();case"unbounded":return s();case"inherit":return uA(uX,e=>"unbounded"===e||e>1?s():t());default:return e>1?s():t()}},bl=e=>{let t=p8(e);return fK(e=>e.sleep(t))},bc=e=>t=>{let s=t.label.replace(/[\s="]/g,"_");return`${s}=${e-t.startTime}ms`},bu="effect/MetricLabel",bp=Symbol.for(bu);class bd{key;value;[bp]=bp;_hash;constructor(e,t){this.key=e,this.value=t,this._hash=ed(bu+this.key+this.value)}[er](){return this._hash}[eb](e){return bm(e)&&this.key===e.key&&this.value===e.value}pipe(){return eT(this,arguments)}}let bh=(e,t)=>new bd(e,t),bm=e=>q(e,bp),bf=e=>{let t,s;return"function"==typeof e?t=e:(t=e.try,s=e.catch),ua(()=>{try{return t()}catch(e){throw cf(lO(s?s(e):new ph(e)))}})},bg=b(3,(e,t,s)=>cM(e,z(t),s)),bb=b(2,(e,t)=>{let s;return cM(e,e=>(s??=Object.keys(t),q(e,"_tag")&&R(e._tag)&&s.includes(e._tag)),e=>t[e._tag](e))}),bx=e=>bN(e,by,gl),by=((e,t,s)=>cV(e,e=>t(e)?ui(e):s(e)),ck(e=>ui(e.getFiberRefs()))),bv=e=>(...t)=>{let s;let n=nI(e);for(let e=0,n=t.length;e<n;e++){let n=t[e];lA(n)&&(s=void 0!==s?lN(s,n):n,t=[...t.slice(0,e),...t.slice(e+1)],e--)}return 0===t.length?t="":1===t.length&&(t=t[0]),void 0===s&&(s=lE),ck(e=>(e.log(t,s,n),ud))},b_=bv(uO),bw=bv(uE),bS=bv(gT),bk=bv(gO),bE=b(2,(e,t)=>cX(e,{onFailure:e=>cJ(()=>t(e)),onSuccess:ui})),bO=e=>c4(e,e=>!e),bT=e=>bM((t,s)=>S(e,gu(t,s))),bI=b(3,(e,t,s)=>pB(n=>pJ(e,tr(n,t,s)))),bR=b(3,(e,t,s)=>pB(n=>cV(s,s=>pJ(e,S(n,tr(t,s)))))),bN=b(3,(e,t,s)=>cV(t,n=>cV(e,e=>c4(t,t=>[s(n,t),e])))),bA=b(2,(e,t)=>cX(e,{onFailure:e=>{let s=l$(e);switch(s._tag){case"Left":return uv(t(s.left),cB(e));case"Right":return cB(e)}},onSuccess:ui})),bC=e=>{let t,s;return("function"==typeof e?t=e:(t=e.try,s=e.catch),t.length>=1)?cN((e,n)=>{try{t(n).then(t=>e(pT(t)),t=>e(cq(s?s(t):new ph(t))))}catch(t){e(cq(s?s(t):new ph(t)))}}):cN(e=>{try{t().then(t=>e(pT(t)),t=>e(cq(s?s(t):new ph(t))))}catch(t){e(cq(s?s(t):new ph(t)))}})},bM=e=>ck(t=>(t.setFiberRefs(e(t.id(),t.getFiberRefs())),ud)),bF=b(2,(e,t)=>ur(()=>t()?c4(e,e3):ui(nS()))),bj=BigInt(0),bL=(e,t,s)=>{if(!1===e.getFiberRef(u3))return pG(t);let n=e.getFiberRef(uK),i=e.getFiberRef(fJ),r=ta(i,cl),a=ta(i,m8),o=e.getFiberRef(u4),l=e.getFiberRefs(),c=f7(l,u8),u=f7(l,u6),p=s.parent?e3(s.parent):s.root?nS():to(n,cc),d="Some"===u._tag?void 0!==s.links?[...i2(u.value),...s.links??[]]:i2(u.value):s.links??id(),h=r.span(t,p,s.context??tp(),d,o?a.unsafeCurrentTimeNanos():bj,s.kind??"internal");return"function"==typeof s.captureStackTrace&&l6.set(h,s.captureStackTrace),"Some"===c._tag&&rB(c.value,(e,t)=>h.attribute(t,e)),void 0!==s.attributes&&Object.entries(s.attributes).forEach(([e,t])=>h.attribute(e,t)),h},bP=(e,...t)=>{let s=cd(1===t.length?void 0:t[0]),n=t[t.length-1];return ck(t=>{let i=bL(t,e,s),r=t.getFiberRef(u4),a=ta(t.getFiberRef(fJ),m8);return c7(n(i),e=>ua(()=>{"Ended"!==i.status._tag&&(pf(e)&&l6.has(i)&&i.attribute("code.stacktrace",l6.get(i)()),i.end(r?a.unsafeCurrentTimeNanos():bj,e))}))})},bU=b(2,(e,t)=>bI(e,cc,t)),bD="InterruptSignal",b$="Stateful",bq="Resume",bz="YieldNow",bB=e=>({_tag:bD,cause:e}),bJ=e=>({_tag:b$,onFiber:e}),bK=e=>({_tag:bq,effect:e}),bH=()=>({_tag:bz}),bV=Symbol.for("effect/FiberScope");class bW{[bV]=bV;fiberId=aT;roots=new Set;add(e,t){this.roots.add(t),t.addObserver(()=>{this.roots.delete(t)})}}class bG{fiberId;parent;[bV]=bV;constructor(e,t){this.fiberId=e,this.parent=t}add(e,t){this.parent.tell(bJ(e=>{e.addChild(t),t.addObserver(()=>{e.removeChild(t)})}))}}let bY=e=>new bG(e.id(),e),bQ=T(Symbol.for("effect/FiberScope/Global"),()=>new bW),bX=Symbol.for("effect/Fiber"),bZ={_E:e=>e,_A:e=>e},b0={[bX]:bZ,pipe(){return eT(this,arguments)}},b1=Symbol.for("effect/Fiber"),b2=((e,t)=>e.interruptAsFork(t),e=>uy(cY(e.await),e.inheritAll)),b5=((e,t)=>b5(e,e=>ua(()=>t(e))),b(2,(e,t)=>({...b0,id:()=>e.id(),await:cV(e.await,pw(t)),children:e.children,inheritAll:e.inheritAll,poll:cV(e.poll,e=>{switch(e._tag){case"None":return ui(nS());case"Some":return S(pw(e.value,t),c4(e3))}}),interruptAsFork:t=>e.interruptAsFork(t)})));(e,t)=>({...b0,id:()=>aw(e.id(),t.id()),await:u_(e.await,t.await,(e,t)=>pg(e)?e:t),children:e.children,inheritAll:uv(t.inheritAll,e.inheritAll),poll:u_(e.poll,t.poll,(e,t)=>{switch(e._tag){case"None":return nS();case"Some":return pg(e.value)?e:t}}),interruptAsFork:s=>S(uS(e,s),uv(S(t,uS(s))),cT)});let b3="effect/FiberCurrent",b4=Symbol.for("effect/Logger"),b8={_Message:e=>e,_Output:e=>e},b6=e=>({[b4]:b8,log:e,pipe(){return eT(this,arguments)}}),b7=b(2,(e,t)=>b6(s=>t(e.log(s)))),b9=((e,t)=>b6(s=>[e.log(s),t.log(s)]),b6(({annotations:e,cause:t,date:s,fiberId:n,logLevel:i,message:r,spans:a})=>{let o=s.getTime(),l=`timestamp=${s.toISOString()} level=${i.label} fiber=${aE(n)}`;if(Array.isArray(r))for(let e=0;e<r.length;e++){let t=eE(r[e]);t.length>0&&(l+=" message=",l=xs(t,l))}else{let e=eE(r);e.length>0&&(l+=" message=",l=xs(e,l))}if(null!=t&&"Empty"!==t._tag&&(l+=" cause=",l=xs(l5(t),l)),aB(a)){l+=" ";let e=!0;for(let t of a)e?e=!1:l+=" ",l+=S(t,bc(o))}if(S(e,rL)>0){l+=" ";let t=!0;for(let[s,n]of e)t?t=!1:l+=" ",l+=xr(s)+"=",l=xs(eE(n),l)}return l})),xe=e=>`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,xt=/^[^\s"=]+$/,xs=(e,t)=>t+(e.match(xt)?e:xe(e)),xn=(({annotations:e,cause:t,date:s,fiberId:n,logLevel:i,message:r,spans:a})=>{let o=s.getTime(),l=`timestamp=${s.toISOString()} level=${i.label} fiber=${aE(n)}`;if(Array.isArray(r))for(let e=0;e<r.length;e++){let t=eE(r[e],0);t.length>0&&(l+=" message=",l=xo(t,l))}else{let e=eE(r,0);e.length>0&&(l+=" message=",l=xo(e,l))}if(null!=t&&"Empty"!==t._tag&&(l+=" cause=",l=xo(l5(t),l)),aB(a)){l+=" ";let e=!0;for(let t of a)e?e=!1:l+=" ",l+=S(t,xl(o))}if(S(e,rL)>0){l+=" ";let t=!0;for(let[s,n]of e)t?t=!1:l+=" ",l+=xr(s)+"=",l=xo(eE(n,0),l)}return l},b6(({annotations:e,cause:t,date:s,fiberId:n,logLevel:i,message:r,spans:a})=>{let o=s.getTime(),l={},c={};if(rL(e)>0)for(let[t,s]of e)l[t]=xi(s);if(aB(a))for(let e of a)c[e.label]=o-e.startTime;return{message:xi(r),logLevel:i.label,timestamp:s.toISOString(),cause:lM(t)?void 0:l5(t),annotations:l,spans:c,fiberId:aE(n)}})),xi=e=>{switch(typeof e){case"bigint":case"function":case"symbol":return String(e);default:return e}},xr=e=>e.replace(/[\s="]/g,"_"),xa=e=>JSON.stringify(e),xo=(e,t)=>t+(e.match(xt)?e:xa(e)),xl=e=>t=>{let s=xr(t.label);return`${s}=${e-t.startTime}ms`},xc=Symbol.for("effect/MetricKeyType"),xu="effect/MetricKeyType/Counter",xp=Symbol.for(xu),xd=Symbol.for("effect/MetricKeyType/Frequency"),xh=Symbol.for("effect/MetricKeyType/Gauge"),xm="effect/MetricKeyType/Histogram",xf=Symbol.for(xm),xg=Symbol.for("effect/MetricKeyType/Summary"),xb={_In:e=>e,_Out:e=>e};class xx{incremental;bigint;[xc]=xb;[xp]=xp;constructor(e,t){this.incremental=e,this.bigint=t,this._hash=ed(xu)}_hash;[er](){return this._hash}[eb](e){return x_(e)}pipe(){return eT(this,arguments)}}class xy{boundaries;[xc]=xb;[xf]=xf;constructor(e){this.boundaries=e,this._hash=S(ed(xm),el(ea(this.boundaries)))}_hash;[er](){return this._hash}[eb](e){return xk(e)&&ex(this.boundaries,e.boundaries)}pipe(){return eT(this,arguments)}}let xv=e=>new xx(e?.incremental??!1,e?.bigint??!1),x_=e=>q(e,xp),xw=e=>q(e,xd),xS=e=>q(e,xh),xk=e=>q(e,xf),xE=e=>q(e,xg),xO=Symbol.for("effect/MetricKey"),xT={_Type:e=>e},xI=n_(ex);class xR{name;keyType;description;tags;[xO]=xT;constructor(e,t,s,n=[]){this.name=e,this.keyType=t,this.description=s,this.tags=n,this._hash=S(ed(this.name+this.description),el(ea(this.keyType)),el(ef(this.tags)))}_hash;[er](){return this._hash}[eb](e){return xN(e)&&this.name===e.name&&ex(this.keyType,e.keyType)&&ex(this.description,e.description)&&xI(this.tags,e.tags)}pipe(){return eT(this,arguments)}}let xN=e=>q(e,xO),xA=(e,t)=>new xR(e,xv(t),nI(t?.description)),xC=b(2,(e,t)=>0===t.length?e:new xR(e.name,e.keyType,e.description,ip(e.tags,t))),xM=Symbol.for("effect/MutableHashMap"),xF={[xM]:xM,[Symbol.iterator](){return new xj(this)},toString(){return ek(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(eS)}},[ew](){return this.toJSON()},pipe(){return eT(this,arguments)}};class xj{self;referentialIterator;bucketIterator;constructor(e){this.self=e,this.referentialIterator=e.referential[Symbol.iterator]()}next(){if(void 0!==this.bucketIterator)return this.bucketIterator.next();let e=this.referentialIterator.next();return e.done?(this.bucketIterator=new xL(this.self.buckets.values()),this.next()):e}[Symbol.iterator](){return new xj(this.self)}}class xL{backing;constructor(e){this.backing=e}currentBucket;next(){if(void 0===this.currentBucket){let e=this.backing.next();if(e.done)return e;this.currentBucket=e.value[Symbol.iterator]()}let e=this.currentBucket.next();return e.done?(this.currentBucket=void 0,this.next()):e}}let xP=()=>{let e=Object.create(xF);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e},xU=b(2,(e,t)=>{if(!1===ev(t))return e.referential.has(t)?e3(e.referential.get(t)):nS();let s=t[er](),n=e.buckets.get(s);return void 0===n?nS():xD(e,n,t)}),xD=(e,t,s,n=!1)=>{for(let i=0,r=t.length;i<r;i++)if(s[eb](t[i][0])){let s=t[i][1];return n&&(t.splice(i,1),e.bucketsSize--),e3(s)}return nS()},x$=b(2,(e,t)=>e2(xU(e,t))),xq=b(3,(e,t,s)=>{if(!1===ev(t))return e.referential.set(t,s),e;let n=t[er](),i=e.buckets.get(n);return void 0===i?e.buckets.set(n,[[t,s]]):(xz(e,i,t),i.push([t,s])),e.bucketsSize++,e}),xz=(e,t,s)=>{for(let n=0,i=t.length;n<i;n++)if(s[eb](t[n][0])){t.splice(n,1),e.bucketsSize--;return}},xB=b(2,(e,t)=>{if(!1===ev(t))return e.referential.delete(t),e;let s=t[er](),n=e.buckets.get(s);return void 0===n||(xz(e,n,t),0===n.length&&e.buckets.delete(s)),e}),xJ=e=>e.referential.size+e.bucketsSize,xK=Symbol.for("effect/MetricState"),xH="effect/MetricState/Counter",xV=Symbol.for(xH),xW="effect/MetricState/Frequency",xG=Symbol.for(xW),xY="effect/MetricState/Gauge",xQ=Symbol.for(xY),xX="effect/MetricState/Histogram",xZ=Symbol.for(xX),x0="effect/MetricState/Summary",x1=Symbol.for(x0),x2={_A:e=>e};class x5{count;[xK]=x2;[xV]=xV;constructor(e){this.count=e}[er](){return S(ea(xH),el(ea(this.count)),eg(this))}[eb](e){return yi(e)&&this.count===e.count}pipe(){return eT(this,arguments)}}let x3=n_(ex);class x4{occurrences;[xK]=x2;[xG]=xG;constructor(e){this.occurrences=e}_hash;[er](){return S(ed(xW),el(ef(nK(this.occurrences.entries()))),eg(this))}[eb](e){return yr(e)&&x3(nK(this.occurrences.entries()),nK(e.occurrences.entries()))}pipe(){return eT(this,arguments)}}class x8{value;[xK]=x2;[xQ]=xQ;constructor(e){this.value=e}[er](){return S(ea(xY),el(ea(this.value)),eg(this))}[eb](e){return ya(e)&&this.value===e.value}pipe(){return eT(this,arguments)}}class x6{buckets;count;min;max;sum;[xK]=x2;[xZ]=xZ;constructor(e,t,s,n,i){this.buckets=e,this.count=t,this.min=s,this.max=n,this.sum=i}[er](){return S(ea(xX),el(ea(this.buckets)),el(ea(this.count)),el(ea(this.min)),el(ea(this.max)),el(ea(this.sum)),eg(this))}[eb](e){return yo(e)&&ex(this.buckets,e.buckets)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return eT(this,arguments)}}class x7{error;quantiles;count;min;max;sum;[xK]=x2;[x1]=x1;constructor(e,t,s,n,i,r){this.error=e,this.quantiles=t,this.count=s,this.min=n,this.max=i,this.sum=r}[er](){return S(ea(x0),el(ea(this.error)),el(ea(this.quantiles)),el(ea(this.count)),el(ea(this.min)),el(ea(this.max)),el(ea(this.sum)),eg(this))}[eb](e){return yl(e)&&this.error===e.error&&ex(this.quantiles,e.quantiles)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return eT(this,arguments)}}let x9=e=>new x5(e),ye=e=>new x4(e),yt=e=>new x8(e),ys=e=>new x6(e.buckets,e.count,e.min,e.max,e.sum),yn=e=>new x7(e.error,e.quantiles,e.count,e.min,e.max,e.sum),yi=e=>q(e,xV),yr=e=>q(e,xG),ya=e=>q(e,xQ),yo=e=>q(e,xZ),yl=e=>q(e,x1),yc=Symbol.for("effect/MetricHook"),yu={_In:e=>e,_Out:e=>e},yp=e=>({[yc]:yu,pipe(){return eT(this,arguments)},...e}),yd=BigInt(0),yh=e=>{let t=e.keyType.bigint?yd:0,s=e.keyType.incremental?e.keyType.bigint?e=>e>=yd:e=>e>=0:e=>!0;return yp({get:()=>x9(t),update:e=>{s(e)&&(t+=e)}})},ym=e=>{let t=new Map;for(let s of e.keyType.preregisteredWords)t.set(s,0);return yp({get:()=>ye(t),update:e=>{let s=t.get(e)??0;t.set(e,s+1)}})},yf=(e,t)=>{let s=t;return yp({get:()=>yt(s),update:e=>{s=e}})},yg=e=>{let t=e.keyType.boundaries.values,s=t.length,n=new Uint32Array(s+1),i=new Float32Array(s),r=0,a=0,o=Number.MAX_VALUE,l=Number.MIN_VALUE;S(t,is(n$),im((e,t)=>{i[t]=e}));let c=()=>{let e=nJ(s),t=0;for(let r=0;r<s;r++){let s=i[r];t+=n[r],e[r]=[s,t]}return e};return yp({get:()=>ys({buckets:c(),count:r,min:o,max:l,sum:a}),update:e=>{let t=0,c=s;for(;t!==c;){let s=Math.floor(t+(c-t)/2);e<=i[s]?c=s:t=s,c===t+1&&(e<=i[t]?c=t:t=c)}n[t]=n[t]+1,r+=1,a+=e,e<o&&(o=e),e>l&&(l=e)}})},yb=e=>{let{error:t,maxAge:s,maxSize:n,quantiles:i}=e.keyType,r=S(i,is(n$)),a=nJ(n),o=0,l=0,c=0,u=Number.MAX_VALUE,p=Number.MIN_VALUE,d=e=>{let i=[],o=0;for(;o!==n-1;){let t=a[o];if(null!=t){let[n,r]=t,a=da(e-n);dS(a,ds)&&a<=s&&i.push(r)}o+=1}return yx(t,r,is(i,n$))},h=(e,t)=>{n>0&&(a[(o+=1)%n]=[t,e]),l+=1,c+=e,e<u&&(u=e),e>p&&(p=e)};return yp({get:()=>yn({error:t,quantiles:d(Date.now()),count:l,min:u,max:p,sum:c}),update:([e,t])=>h(e,t)})},yx=(e,t,s)=>{let n=s.length;if(!nX(t))return id();let i=t[0],r=t.slice(1),a=yy(e,n,nS(),0,i,s),o=ih(a);return r.forEach(t=>{o.push(yy(e,n,a.value,a.consumed,t,a.rest))}),im(o,e=>[e.quantile,e.value])},yy=(e,t,s,n,i,r)=>{let a=e,o=t,l=s,c=n,u=i,p=r,d=e,h=t,m=s,f=n,g=i,b=r;for(;;){if(!nX(p))return{quantile:u,value:nS(),consumed:c,rest:[]};if(1===u)return{quantile:u,value:e3(n8(p)),consumed:c+p.length,rest:[]};let e=n9(p,e=>e<=p[0]),t=u*o,s=a/2*t,n=c+e[0].length,i=Math.abs(n-t);if(n<t-s){d=a,h=o,m=n5(p),f=n,g=u,b=e[1],a=d,o=h,l=m,c=f,u=g,p=b;continue}if(n>t+s)return{quantile:u,value:l,consumed:c,rest:p};switch(l._tag){case"None":d=a,h=o,m=n5(p),f=n,g=u,b=e[1],a=d,o=h,l=m,c=f,u=g,p=b;continue;case"Some":if(i<Math.abs(t-l.value)){d=a,h=o,m=n5(p),f=n,g=u,b=e[1],a=d,o=h,l=m,c=f,u=g,p=b;continue}return{quantile:u,value:e3(l.value),consumed:c,rest:p}}}throw Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")},yv=Symbol.for("effect/MetricPair"),y_={_Type:e=>e},yw=(e,t)=>({[yv]:y_,metricKey:e,metricState:t,pipe(){return eT(this,arguments)}}),yS=Symbol.for("effect/MetricRegistry");class yk{[yS]=yS;map=xP();snapshot(){let e=[];for(let[t,s]of this.map)e.push(yw(t,s.get()));return e}get(e){let t=S(this.map,xU(e),nR);if(null!=t)return t;if(x_(e.keyType))return this.getCounter(e);if(xS(e.keyType))return this.getGauge(e);if(xw(e.keyType))return this.getFrequency(e);if(xk(e.keyType))return this.getHistogram(e);if(xE(e.keyType))return this.getSummary(e);throw Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}getCounter(e){let t=S(this.map,xU(e),nR);if(null==t){let s=yh(e);S(this.map,x$(e))||S(this.map,xq(e,s)),t=s}return t}getFrequency(e){let t=S(this.map,xU(e),nR);if(null==t){let s=ym(e);S(this.map,x$(e))||S(this.map,xq(e,s)),t=s}return t}getGauge(e){let t=S(this.map,xU(e),nR);if(null==t){let s=yf(e,e.keyType.bigint?BigInt(0):0);S(this.map,x$(e))||S(this.map,xq(e,s)),t=s}return t}getHistogram(e){let t=S(this.map,xU(e),nR);if(null==t){let s=yg(e);S(this.map,x$(e))||S(this.map,xq(e,s)),t=s}return t}getSummary(e){let t=S(this.map,xU(e),nR);if(null==t){let s=yb(e);S(this.map,x$(e))||S(this.map,xq(e,s)),t=s}return t}}let yE=()=>new yk,yO=Symbol.for("effect/Metric"),yT={_Type:e=>e,_In:e=>e,_Out:e=>e},yI=T(Symbol.for("effect/Metric/globalMetricRegistry"),()=>yE()),yR=function(e,t,s){let n=Object.assign(e=>uo(e,e=>yF(n,e)),{[yO]:yT,keyType:e,unsafeUpdate:t,unsafeValue:s,register(){return this.unsafeValue([]),this},pipe(){return eT(this,arguments)}});return n},yN=(e,t)=>yA(xA(e,t)),yA=e=>{let t;let s=new WeakMap,n=n=>{if(0===n.length)return void 0!==t?t:t=yI.get(e);let i=s.get(n);return void 0!==i||(i=yI.get(xC(e,n)),s.set(n,i)),i};return yR(e.keyType,(e,t)=>n(t).update(e),e=>n(e).get())},yC=b(3,(e,t,s)=>yM(e,[bh(t,s)])),yM=b(2,(e,t)=>yR(e.keyType,(s,n)=>e.unsafeUpdate(s,ip(t,n)),s=>e.unsafeValue(ip(t,s)))),yF=b(2,(e,t)=>uA(u1,s=>ua(()=>e.unsafeUpdate(t,s)))),yj="effect/MetricBoundaries",yL=Symbol.for(yj);class yP{values;[yL]=yL;constructor(e){this.values=e,this._hash=S(ed(yj),el(ef(this.values)))}_hash;[er](){return this._hash}[eb](e){return yU(e)&&ex(this.values,e.values)}pipe(){return eT(this,arguments)}}let yU=e=>q(e,yL),yD=b(2,(e,t)=>uA(br,s=>ua(()=>{if(s.has(e)){let n=s.get(e);n.state.completed||(n.state.completed=!0,pD(n.result,t))}})));class y${count=0;observers=new Set;interrupted=!1;addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}increment(){this.count++,this.observers.forEach(e=>e(this.count))}decrement(){this.count--,this.observers.forEach(e=>e(this.count))}}let yq=Symbol.for("effect/Supervisor"),yz={_T:e=>e};class yB{underlying;value0;[yq]=yz;constructor(e,t){this.underlying=e,this.value0=t}get value(){return this.value0}onStart(e,t,s,n){this.underlying.onStart(e,t,s,n)}onEnd(e,t){this.underlying.onEnd(e,t)}onEffect(e,t){this.underlying.onEffect(e,t)}onSuspend(e){this.underlying.onSuspend(e)}onResume(e){this.underlying.onResume(e)}map(e){return new yB(this,S(this.value,c4(e)))}zip(e){return new yJ(this,e)}}class yJ{left;right;_tag="Zip";[yq]=yz;constructor(e,t){this.left=e,this.right=t}get value(){return ux(this.left.value,this.right.value)}onStart(e,t,s,n){this.left.onStart(e,t,s,n),this.right.onStart(e,t,s,n)}onEnd(e,t){this.left.onEnd(e,t),this.right.onEnd(e,t)}onEffect(e,t){this.left.onEffect(e,t),this.right.onEffect(e,t)}onSuspend(e){this.left.onSuspend(e),this.right.onSuspend(e)}onResume(e){this.left.onResume(e),this.right.onResume(e)}map(e){return new yB(this,S(this.value,c4(e)))}zip(e){return new yJ(this,e)}}let yK=e=>q(e,yq)&&z(e,"Zip");class yH{[yq]=yz;fibers=new Set;get value(){return ua(()=>Array.from(this.fibers))}onStart(e,t,s,n){this.fibers.add(n)}onEnd(e,t){this.fibers.delete(t)}onEffect(e,t){}onSuspend(e){}onResume(e){}map(e){return new yB(this,S(this.value,c4(e)))}zip(e){return new yJ(this,e)}onRun(e,t){return e()}}class yV{effect;[yq]=yz;constructor(e){this.effect=e}get value(){return this.effect}onStart(e,t,s,n){}onEnd(e,t){}onEffect(e,t){}onSuspend(e){}onResume(e){}map(e){return new yB(this,S(this.value,c4(e)))}zip(e){return new yJ(this,e)}onRun(e,t){return e()}}let yW=ua(()=>new yH),yG=e=>new yV(e),yY=T("effect/Supervisor/none",()=>yG(ud)),yQ="Empty",yX="AddSupervisor",yZ="RemoveSupervisor",y0="AndThen",y1={_tag:yQ},y2=(e,t)=>({_tag:y0,first:e,second:t}),y5=(e,t)=>{let s=e,n=t;for(;rn(n);){let e=rr(n);switch(e._tag){case yQ:n=ra(n);break;case yX:s=s.zip(e.supervisor),n=ra(n);break;case yZ:s=y3(s,e.supervisor),n=ra(n);break;case y0:n=i9(e.first)(i9(e.second)(ra(n)))}}return s},y3=(e,t)=>ex(e,t)?yY:yK(e)?y3(e.left,t).zip(y3(e.right,t)):e,y4=e=>ex(e,yY)?rQ():yK(e)?S(y4(e.left),r6(y4(e.right))):at(e),y8=o0({empty:y1,patch:(e,t)=>y5(t,iZ(e)),combine:y2,diff:(e,t)=>{if(ex(e,t))return y1;let s=y4(e),n=y4(t),i=S(n,r8(s),r9(y1,(e,t)=>y2(e,{_tag:yX,supervisor:t}))),r=S(s,r8(n),r9(y1,(e,t)=>y2(e,{_tag:yZ,supervisor:t})));return y2(i,r)}}),y6=yN("effect_fiber_started",{incremental:!0}),y7=yN("effect_fiber_active"),y9=yN("effect_fiber_successes",{incremental:!0}),ve=yN("effect_fiber_failures",{incremental:!0}),vt=yC(yA(new xR("effect_fiber_lifetimes",new xy(S(((e,t)=>{let s=Math.max(1,Math.floor(e)),n=Array(s);for(let e=0;e<s;e++)n[e]=t(e);return n})((o={start:.5,factor:2,count:35}).count-1,e=>o.start*Math.pow(o.factor,e)),i4,e=>new yP(S(e,nG(iZ(Number.POSITIVE_INFINITY)),iw)))),nI(l))),"time_unit","milliseconds"),vs="Continue",vn="Yield",vi={_E:e=>e,_A:e=>e},vr=e=>{throw Error(`BUG: FiberRuntime - ${eE(e)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},va=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),vo=T("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),vl={[eC]:(e,t,s)=>en(()=>t.effect_instruction_i1(s)),OnStep:(e,t,s)=>pT(pT(s)),[eM]:(e,t,s)=>en(()=>t.effect_instruction_i2(s)),[e$]:(e,t,s)=>(e.patchRuntimeFlags(e._runtimeFlags,t.patch),lr(e._runtimeFlags)&&e.isInterrupted())?p_(e.getInterruptedCause()):pT(s),[eP]:(e,t,s)=>(en(()=>t.effect_instruction_i2(s)),en(()=>t.effect_instruction_i0()))?(e.pushStack(t),en(()=>t.effect_instruction_i1())):ud},vc={[bD]:(e,t,s,n)=>(e.processNewInterruptSignal(n.cause),lr(t)?p_(n.cause):s),[bq]:(e,t,s,n)=>{throw Error("It is illegal to have multiple concurrent run loops in a single fiber")},[b$]:(e,t,s,n)=>(n.onFiber(e,gw(t)),s),[bz]:(e,t,s,n)=>cV(ub(),()=>s)},vu=e=>c1(gW(e),e=>vE(bi(e),([e,t])=>{let s=new Map,n=[];for(let e of t)for(let t of(n.push(i2(e)),e))s.set(t.request,t);let i=n.flat();return uU(vZ(e.runAll(n),i,()=>i.forEach(e=>{e.listeners.interrupted=!0})),br,s)},!1,!1));class vp{[bX]=bZ;[b1]=vi;pipe(){return eT(this,arguments)}_fiberRefs;_fiberId;_runtimeFlags;_queue=[];_children=null;_observers=[];_running=!1;_stack=[];_asyncInterruptor=null;_asyncBlockingOn=null;_exitValue=null;_steps=[];_supervisor;_scheduler;_tracer;currentOpCount=0;isYielding=!1;constructor(e,t,s){if(this._runtimeFlags=s,this._fiberId=e,this._fiberRefs=t,this._supervisor=this.getFiberRef(vW),this._scheduler=this.getFiberRef(gK),lu(s)){let e=this.getFiberRef(u1);y6.unsafeUpdate(1,e),y7.unsafeUpdate(1,e)}this._tracer=ta(this.getFiberRef(fJ),cl)}id(){return this._fiberId}resume(e){this.tell(bK(e))}get status(){return this.ask((e,t)=>t)}get runtimeFlags(){return this.ask((e,t)=>gk(t)?e._runtimeFlags:t.runtimeFlags)}scope(){return bY(this)}get children(){return this.ask(e=>Array.from(e.getChildren()))}getChildren(){return null===this._children&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(u5)}fiberRefs(){return this.ask(e=>e.getFiberRefs())}ask(e){return ur(()=>{let t=pA(this._fiberId);return this.tell(bJ((s,n)=>{pD(t,ua(()=>e(s,n)))})),pF(t)})}tell(e){this._queue.push(e),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return cN(e=>{let t=t=>e(ui(t));return this.tell(bJ((e,s)=>{null!==e._exitValue?t(this._exitValue):e.addObserver(t)})),ua(()=>this.tell(bJ((e,s)=>{e.removeObserver(t)})))},this.id())}get inheritAll(){return ck((e,t)=>{let s=e.id(),n=e.getFiberRefs(),i=t.runtimeFlags,r=f3(n,s,this.getFiberRefs());return e.setFiberRefs(r),uh(S(ld(i,e.getFiberRef(vV)),le(1),le(16)))})}get poll(){return ua(()=>nI(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(e){return ua(()=>this.tell(bB(lI(e))))}unsafeInterruptAsFork(e){this.tell(bB(lI(e)))}addObserver(e){null!==this._exitValue?e(this._exitValue):this._observers.push(e)}removeObserver(e){this._observers=this._observers.filter(t=>t!==e)}getFiberRefs(){return this.setFiberRef(vV,this._runtimeFlags),this._fiberRefs}unsafeDeleteFiberRef(e){this._fiberRefs=f6(this._fiberRefs,e)}getFiberRef(e){return this._fiberRefs.locals.has(e)?this._fiberRefs.locals.get(e)[0][1]:e.initial}setFiberRef(e,t){this._fiberRefs=ge(this._fiberRefs,{fiberId:this._fiberId,fiberRef:e,value:t}),this.refreshRefCache()}refreshRefCache(){this._tracer=ta(this.getFiberRef(fJ),cl),this._supervisor=this.getFiberRef(vW),this._scheduler=this.getFiberRef(gK)}setFiberRefs(e){this._fiberRefs=e,this.refreshRefCache()}addChild(e){this.getChildren().add(e)}removeChild(e){this.getChildren().delete(e)}drainQueueOnCurrentThread(){let e=!0;for(;e;){let t=vs,s=globalThis[b3];globalThis[b3]=this;try{for(;t===vs;)t=0===this._queue.length?"Done":this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[b3]=s}this._queue.length>0&&!this._running?(this._running=!0,t===vn?(this.drainQueueLaterOnExecutor(),e=!1):e=!0):e=!1}}drainQueueLaterOnExecutor(){this._scheduler.scheduleTask(this.run,this.getFiberRef(uH))}drainQueueWhileRunning(e,t){let s=t;for(;this._queue.length>0;){let t=this._queue.splice(0,1)[0];s=vc[t._tag](this,e,s,t)}return s}isInterrupted(){return!lM(this.getFiberRef(u5))}addInterruptedCause(e){let t=this.getFiberRef(u5);this.setFiberRef(u5,lN(t,e))}processNewInterruptSignal(e){this.addInterruptedCause(e),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(null===this._children||0===this._children.size)return!1;let e=!1;for(let t of this._children)t.tell(bB(lI(this.id()))),e=!0;return e}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){let e=this._children.values();this._children=null;let t=!1;return uf({while:()=>!t,body:()=>{let s=e.next();return s.done?ua(()=>{t=!0}):cT(s.value.await)},step:()=>{}})}return null}reportExitValue(e){if(lu(this._runtimeFlags)){let t=this.getFiberRef(u1),s=this.id().startTimeMillis,n=Date.now();switch(vt.unsafeUpdate(n-s,t),y7.unsafeUpdate(-1,t),e._tag){case eF:y9.unsafeUpdate(1,t);break;case eN:ve.unsafeUpdate(1,t)}}if("Failure"===e._tag){let t=this.getFiberRef(u0);lj(e.cause)||"Some"!==t._tag||this.log("Fiber terminated with an unhandled error",e.cause,t)}}setExitValue(e){this._exitValue=e,this.reportExitValue(e);for(let t=this._observers.length-1;t>=0;t--)this._observers[t](e)}getLoggers(){return this.getFiberRef(vg)}log(e,t,s){let n=e2(s)?s.value:this.getFiberRef(uG);if(gR(this.getFiberRef(vd),n))return;let i=this.getFiberRef(uY),r=this.getFiberRef(uW),a=this.getLoggers(),o=this.getFiberRefs();if(as(a)>0){let s=new Date(ta(this.getFiberRef(fJ),m8).unsafeCurrentTimeMillis());for(let l of a)l.log({fiberId:this.id(),logLevel:n,message:e,cause:t,context:o,spans:i,annotations:r,date:s})}}evaluateMessageWhileSuspended(e){switch(e._tag){case bz:return vn;case bD:return this.processNewInterruptSignal(e.cause),null!==this._asyncInterruptor&&(this._asyncInterruptor(p_(e.cause)),this._asyncInterruptor=null),vs;case bq:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(e.effect),vs;case b$:return e.onFiber(this,null!==this._exitValue?gv:gS(this._runtimeFlags,this._asyncBlockingOn)),vs;default:return vr(e)}}evaluateEffect(e){this._supervisor.onResume(this);try{let t=lr(this._runtimeFlags)&&this.isInterrupted()?p_(this.getInterruptedCause()):e;for(;null!==t;){let e=t,s=this.runLoop(e);if(s===va){let e=vo.currentOp;vo.currentOp=null,e._op===eD?ln(this._runtimeFlags)?(this.tell(bH()),this.tell(bK(pI)),t=null):t=pI:e._op===eI&&(t=null)}else{this._runtimeFlags=S(this._runtimeFlags,li(16));let e=this.interruptAllChildren();null!==e?t=cV(e,()=>s):(0===this._queue.length?this.setExitValue(s):this.tell(bK(s)),t=null)}}}finally{this._supervisor.onSuspend(this)}}start(e){if(this._running)this.tell(bK(e));else{this._running=!0;let t=globalThis[b3];globalThis[b3]=this;try{this.evaluateEffect(e)}finally{this._running=!1,globalThis[b3]=t,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(e){this.tell(bK(e))}patchRuntimeFlags(e,t){let s=lh(e,t);return globalThis[b3]=this,this._runtimeFlags=s,s}initiateAsync(e,t){let s=!1,n=e=>{s||(s=!0,this.tell(bK(e)))};lr(e)&&(this._asyncInterruptor=n);try{t(n)}catch(e){n(cB(lT(e)))}}pushStack(e){this._stack.push(e),"OnStep"===e._op&&this._steps.push({refs:this.getFiberRefs(),flags:this._runtimeFlags})}popStack(){let e=this._stack.pop();if(e)return"OnStep"===e._op&&this._steps.pop(),e}getNextSuccessCont(){let e=this.popStack();for(;e;){if(e._op!==eA)return e;e=this.popStack()}}getNextFailCont(){let e=this.popStack();for(;e;){if(e._op!==eC&&e._op!==eP)return e;e=this.popStack()}}Tag(e){return c4(uN(uK),t=>ta(t,e))}Left(e){return cq(e.left)}None(e){return cq(new pp)}Right(e){return pT(e.right)}Some(e){return pT(e.value)}Micro(e){return cR(t=>{let s=tH().pipe(tW(t1,this.getFiberRef(uK))),n=t;return e[tT](s,e=>{if("Right"===e._tag)return n(pT(e.right));switch(e.left._tag){case"Aborted":return n(p_(lI(aT)));case"Expected":return n(cq(e.left.error));case"Unexpected":return n(cP(e.left.defect))}}),cN(e=>{n=t=>{e(ud)},tV(s,tZ).abort()})})}[ej](e){let t=en(()=>e.effect_instruction_i0()),s=this.getNextSuccessCont();return void 0!==s?(s._op in vl||vr(s),vl[s._op](this,s,t)):(vo.currentOp=pT(t),va)}[eF](e){let t=this.getNextSuccessCont();return void 0!==t?(t._op in vl||vr(t),vl[t._op](this,t,e.effect_instruction_i0)):(vo.currentOp=e,va)}[eN](e){let t=e.effect_instruction_i0,s=this.getNextFailCont();if(void 0===s)return vo.currentOp=p_(t),va;switch(s._op){case eA:case eM:if(!(lr(this._runtimeFlags)&&this.isInterrupted()))return en(()=>s.effect_instruction_i1(t));return p_(lB(t));case"OnStep":if(!(lr(this._runtimeFlags)&&this.isInterrupted()))return pT(p_(t));return p_(lB(t));case e$:if(this.patchRuntimeFlags(this._runtimeFlags,s.patch),lr(this._runtimeFlags)&&this.isInterrupted())return p_(lN(t,this.getInterruptedCause()));return p_(t);default:vr(s)}}[eU](e){return en(()=>e.effect_instruction_i0(this,gw(this._runtimeFlags)))}Blocked(e){let t=this.getFiberRefs(),s=this._runtimeFlags;if(this._steps.length>0){let n=[],i=this._steps[this._steps.length-1],r=this.popStack();for(;r&&"OnStep"!==r._op;)n.push(r),r=this.popStack();this.setFiberRefs(i.refs),this._runtimeFlags=i.flags;let a=gl(i.refs,t),o=ld(i.flags,s);return pT(cg(e.effect_instruction_i0,ck(t=>{for(;n.length>0;)t.pushStack(n.pop());return t.setFiberRefs(gu(t.id(),t.getFiberRefs())(a)),t._runtimeFlags=lh(o)(t._runtimeFlags),e.effect_instruction_i1})))}return up(t=>cV(vT(cb(e.effect_instruction_i0)),()=>t(e.effect_instruction_i1)))}RunBlocked(e){return vu(e.effect_instruction_i0)}[eL](e){let t=e.effect_instruction_i0,s=this._runtimeFlags,n=lh(s,t);if(lr(n)&&this.isInterrupted())return p_(this.getInterruptedCause());if(this.patchRuntimeFlags(this._runtimeFlags,t),!e.effect_instruction_i1)return pI;{let t=ld(n,s);return this.pushStack(new cy(t,e)),en(()=>e.effect_instruction_i1(s))}}[eC](e){return this.pushStack(e),e.effect_instruction_i0}OnStep(e){return this.pushStack(e),e.effect_instruction_i0}[eA](e){return this.pushStack(e),e.effect_instruction_i0}[eM](e){return this.pushStack(e),e.effect_instruction_i0}[eI](e){return this._asyncBlockingOn=e.effect_instruction_i1,this.initiateAsync(this._runtimeFlags,e.effect_instruction_i0),vo.currentOp=e,va}[eD](e){return this.isYielding=!1,vo.currentOp=e,va}[eP](e){let t=e.effect_instruction_i0,s=e.effect_instruction_i1;return t()?(this.pushStack(e),s()):pI}[eR](e){return en(()=>e.commit())}runLoop(e){let t=e;for(this.currentOpCount=0;;){if((2&this._runtimeFlags)!=0&&this._supervisor.onEffect(this,t),this._queue.length>0&&(t=this.drainQueueWhileRunning(this._runtimeFlags,t)),!this.isYielding){this.currentOpCount+=1;let e=this._scheduler.shouldYield(this);if(!1!==e){this.isYielding=!0,this.currentOpCount=0;let s=t;t=cV(ub({priority:e}),()=>s)}}try{if("_op"in t&&t._op in this||vr(t),(t=this._tracer.context(()=>k()!==t[eq]._V?cU(`Cannot execute an Effect versioned ${t[eq]._V} with a Runtime of version ${k()}`):this[t._op](t),this))===va){let e=vo.currentOp;if(e._op===eD||e._op===eI)return va;return vo.currentOp=null,e._op===eF||e._op===eN?e:p_(lT(e))}}catch(e){t=cm(e)?p_(e.cause):pc(e)?p_(lN(lT(e),lI(aT))):cP(e)}}}run=()=>{this.drainQueueOnCurrentThread()}}let vd=T("effect/FiberRef/currentMinimumLogLevel",()=>u$(gN("Info"))),vh=e=>b6(t=>{ta(f9(t.context,fJ),fL).unsafe.log(e.log(t))}),vm=T(Symbol.for("effect/Logger/defaultLogger"),()=>vh(b9)),vf=T(Symbol.for("effect/Logger/tracerLogger"),()=>b6(({annotations:e,cause:t,context:s,fiberId:n,logLevel:i,message:r})=>{let a=nM(f7(s,uK),to(cc)),o=nC(f7(s,fJ),e=>ta(e,m8));if("None"===a._tag||"ExternalSpan"===a.value._tag||"None"===o._tag)return;let l=Object.fromEntries(rz(e,eE));l["effect.fiberId"]=aE(n),l["effect.logLevel"]=i.label,null!==t&&"Empty"!==t._tag&&(l["effect.cause"]=l5(t)),a.value.event(String(r),o.value.unsafeCurrentTimeNanos(),l)})),vg=T(Symbol.for("effect/FiberRef/currentLoggers"),()=>uq(at(vm,vf))),vb=b(e=>cS(e[0]),(e,t)=>uu(uo(e,e=>vx(s=>t(e,s))))),vx=e=>ck(t=>{let s=t.getFiberRefs(),n=t._runtimeFlags;return cV(vD,t=>pt(t,t=>ck(i=>{let r=i.getFiberRefs(),a=i._runtimeFlags,o=gl(r,s),l=ld(a,n),c=gl(s,r);return i.setFiberRefs(gu(o,i.id(),s)),vX(ug(e(t),l),ua(()=>{i.setFiberRefs(gu(c,i.id(),i.getFiberRefs()))}))})))}),vy=e=>{if(Array.isArray(e)||H(e))return[e,nS()];let t=Object.keys(e),s=t.length;return[t.map(t=>e[t]),e3(e=>{let n={};for(let i=0;i<s;i++)n[t[i]]=e[i];return n})]},vv=(e,t,s)=>{let n=[];for(let t of e)n.push(cD(t));return cV(vS(n,x,{concurrency:s?.concurrency,batching:s?.batching}),e=>{let n=nS(),i=e.length,r=Array(i),a=Array(i),o=!1;for(let t=0;t<i;t++){let s=e[t];"Left"===s._tag?(r[t]=e3(s.left),o=!0):(a[t]=s.right,r[t]=n)}return o?"Some"===t._tag?cq(t.value(r)):cq(r):s?.discard?ud:"Some"===t._tag?ui(t.value(a)):ui(a)})},v_=(e,t,s)=>{let n=[];for(let t of e)n.push(cD(t));return s?.discard?vS(n,x,{concurrency:s?.concurrency,batching:s?.batching,discard:!0}):c4(vS(n,x,{concurrency:s?.concurrency,batching:s?.batching}),e=>"Some"===t._tag?t.value(e):e)},vw=(e,t)=>{let[s,n]=vy(e);return t?.mode==="validate"?vv(s,n,t):t?.mode==="either"?v_(s,n,t):t?.discard!==!0&&"Some"===n._tag?c4(vS(s,x,t),n.value):vS(s,x,t)},vS=((e,t)=>Array.from({length:t},()=>e),b(e=>H(e[0]),(e,t,s)=>ck(n=>{let i=s?.batching===!0||s?.batching==="inherit"&&n.getFiberRef(uZ);return s?.discard?ba(s.concurrency,()=>vF(fY)(s=>i?vE(e,(e,n)=>s(t(e,n)),!0,!1,1):c1(e,(e,n)=>s(t(e,n)))),()=>vF(fZ)(s=>vE(e,(e,n)=>s(t(e,n)),i,!1)),s=>vF(f0(s))(n=>vE(e,(e,s)=>n(t(e,s)),i,!1,s))):ba(s?.concurrency,()=>vF(fY)(s=>i?vO(e,1,(e,n)=>s(t(e,n)),!0):c0(e,(e,n)=>s(t(e,n)))),()=>vF(fZ)(s=>vk(e,(e,n)=>s(t(e,n)),i)),s=>vF(f0(s))(n=>vO(e,s,(e,s)=>n(t(e,s)),i)))}))),vk=(e,t,s)=>ur(()=>{let n=nK(e),i=Array(n.length);return uv(vE(n,(e,s)=>cV(t(e,s),e=>ua(()=>i[s]=e)),s,!1),ui(i))}),vE=(e,t,s,n,i)=>up(r=>ul(a=>ck(o=>{let l=Array.from(e).reverse(),c=l.length;if(0===c)return ud;let u=0,p=!1,d=i?Math.min(l.length,i):l.length,h=new Set,m=[],f=()=>h.forEach(e=>{e._scheduler.scheduleTask(()=>{e.unsafeInterruptAsFork(o.id())},0)}),g=[],b=[],x=[],y=()=>{let e=m.filter(({exit:e})=>"Failure"===e._tag).sort((e,t)=>e.index<t.index?-1:e.index===t.index?0:1).map(({exit:e})=>e);return 0===e.length&&e.push(pI),e},v=(e,t=!1)=>{let s=uu(a(e)),n=vR(s,o,o._runtimeFlags,bQ);return o._scheduler.scheduleTask(()=>{t&&n.unsafeInterruptAsFork(o.id()),n.resume(s)},0),n},_=()=>{n||(c-=l.length,l=[]),p=!0,f()},w=s?cG:c$,S=v(cN(e=>{let n=(e,t)=>{"Blocked"===e._op?x.push(e):(m.push({index:t,exit:e}),"Failure"!==e._op||p||_())},a=()=>{if(l.length>0){let d=l.pop(),f=u++,_=()=>{let e=l.pop();return f=u++,cV(ub(),()=>cV(w(r(t(e,f))),S))},S=e=>l.length>0&&(n(e,f),l.length>0)?_():ui(e),k=v(cV(w(r(t(d,f))),S));g.push(k),h.add(k),p&&k._scheduler.scheduleTask(()=>{k.unsafeInterruptAsFork(o.id())},0),k.addObserver(t=>{let r;r="Failure"===t._op?t:t.effect_instruction_i0,b.push(k),h.delete(k),n(r,f),m.length===c?e(ui(nE(py(y(),{parallel:!0}),()=>pI))):x.length+m.length===c?e(ui(cg(x.map(e=>e.effect_instruction_i0).reduce(gH),vE([nE(py(y(),{parallel:!0}),()=>pI),...x.map(e=>e.effect_instruction_i1)],e=>e,s,!0,i)))):a()})}};for(let e=0;e<d;e++)a()}));return cT(c7(cY(r(b2(S))),pE({onFailure:()=>{_();let e=x.length+1,t=Math.min("number"==typeof i?i:x.length,x.length),s=Array.from(x);return cN(n=>{let i=[],r=0,a=0,o=(t,a)=>o=>{i[t]=o,++r===e&&n(nA(py(i,{parallel:!0}))),s.length>0&&a&&l()},l=()=>{v(s.pop(),!0).addObserver(o(a,!0)),a++};S.addObserver(o(a,!1)),a++;for(let e=0;e<t;e++)l()})},onSuccess:()=>c0(b,e=>e.inheritAll)})))}))),vO=(e,t,s,n)=>ur(()=>{let i=nK(e),r=Array(i.length);return uv(vE(i,(e,t)=>c4(s(e,t),e=>r[t]=e),n,!1,t),ui(r))}),vT=e=>vA(e,bQ),vI=(e,t,s,n=null)=>{let i=vN(e,t,s,n);return i.resume(e),i},vR=(e,t,s,n=null)=>vN(e,t,s,n),vN=(e,t,s,n=null)=>{let i=aA(),r=f4(t.getFiberRefs(),i),a=new vp(i,r,s),o=f9(r,uK),l=a._supervisor;return l.onStart(o,e,e3(t),a),a.addObserver(e=>l.onEnd(e,a)),(null!==n?n:S(t.getFiberRef(u2),nE(()=>t.scope()))).add(s,a),a},vA=(e,t)=>ck((s,n)=>ui(vI(e,s,n.runtimeFlags,t))),vC=(e=>F(e[2]),e=>pB(t=>nk(to(t,vU),{onNone:()=>e,onSome:t=>{switch(t.strategy._tag){case"Parallel":return e;case"Sequential":case"ParallelN":return cV(pn(t,fZ),t=>vJ(e,t))}}}))),vM=e=>t=>pB(s=>nk(to(s,vU),{onNone:()=>t,onSome:s=>"ParallelN"===s.strategy._tag&&s.strategy.parallelism===e?t:cV(pn(s,f0(e)),e=>vJ(t,e))})),vF=e=>t=>pB(s=>nk(to(s,vU),{onNone:()=>t(x),onSome:s=>{let n="Parallel"===e._tag?vC:"Sequential"===e._tag?vL:vM(e.parallelism);switch(s.strategy._tag){case"Parallel":return n(t(vC));case"Sequential":return n(t(vL));case"ParallelN":return n(t(vM(s.strategy.parallelism)))}}})),vj=e=>cV(vU,e),vL=e=>pB(t=>nk(to(t,vU),{onNone:()=>e,onSome:t=>{switch(t.strategy._tag){case"Sequential":return e;case"Parallel":case"ParallelN":return cV(pn(t,fY),t=>vJ(e,t))}}})),vP=(e=>cS(e[1]),b(e=>cS(e[1]),(e,t,s,n)=>c4(vw([e,t],{concurrency:n?.concurrent?2:1,batching:n?.batching}),([e,t])=>s(e,t)))),vU=tc("effect/Scope"),vD=vU,v$=(e,t)=>{"Open"===e.state._tag&&e.state.finalizers.add(t)},vq={[u7]:u7,[u9]:u9,pipe(){return eT(this,arguments)},fork(e){return ua(()=>{let t=vz(e);if("Closed"===this.state._tag)return t.state=this.state,t;let s=e=>t.close(e);return this.state.finalizers.add(s),v$(t,e=>ua(()=>{"Open"===this.state._tag&&this.state.finalizers.delete(s)})),t})},close(e){return ur(()=>{if("Closed"===this.state._tag)return ud;let t=Array.from(this.state.finalizers.values()).reverse();return(this.state={_tag:"Closed",exit:e},0===t.length)?ud:fQ(this.strategy)?S(c0(t,t=>c$(t(e))),cV(e=>S(py(e),nC(px),nE(()=>pI)))):fX(this.strategy)?S(vk(t,t=>c$(t(e)),!1),cV(e=>S(py(e,{parallel:!0}),nC(px),nE(()=>pI)))):S(vO(t,this.strategy.parallelism,t=>c$(t(e)),!1),cV(e=>S(py(e,{parallel:!0}),nC(px),nE(()=>pI))))})},addFinalizer(e){return ur(()=>"Closed"===this.state._tag?e(this.state.exit):(this.state.finalizers.add(e),ud))}},vz=(e=fY)=>{let t=Object.create(vq);return t.strategy=e,t.state={_tag:"Open",finalizers:new Set},t},vB=(e=fY)=>ua(()=>vz(e)),vJ=b(2,(e,t)=>pH(e,tl(ti(vU,t)))),vK=b(2,(e,t)=>cT(vb(cV(uN(e),s=>cO(uC(e,t),s)),t=>uC(e,t)))),vH=b(2,(e,t)=>uA(e,s=>vK(e,t(s)))),vV=uJ(lc,{differ:lm,fork:lm.empty}),vW=uJ(yY,{differ:y8,fork:y1}),vG=b(3,(e,t,s)=>vY(e,t,{onSelfWin:(e,t)=>cV(e.await,n=>{switch(n._tag){case eF:return cV(e.inheritAll,()=>s.onSelfDone(n,t));case eN:return s.onSelfDone(n,t)}}),onOtherWin:(e,t)=>cV(e.await,n=>{switch(n._tag){case eF:return cV(e.inheritAll,()=>s.onOtherDone(n,t));case eN:return s.onOtherDone(n,t)}})})),vY=((e,t)=>cH(s=>vG(e,t,{onSelfDone:(e,t)=>pO(e,{onFailure:e=>S(b2(t),bE(t=>lR(e,t))),onSuccess:e=>S(t,uS(s),cO(e))}),onOtherDone:(e,t)=>pO(e,{onFailure:e=>S(b2(t),bE(t=>lR(t,e))),onSuccess:e=>S(t,uS(s),cO(e))})})),b(3,(e,t,s)=>ck((n,i)=>{let r=i.runtimeFlags,a=ar(!0),o=vN(e,n,r,s.selfScope),l=vN(t,n,r,s.otherScope);return cN(n=>{o.addObserver(()=>vQ(o,l,s.onSelfWin,a,n)),l.addObserver(()=>vQ(l,o,s.onOtherWin,a,n)),o.startFork(e),l.startFork(t)},a_(o.id(),l.id()))}))),vQ=(e,t,s,n,i)=>{aa(!0,!1)(n)&&i(s(e,t))},vX=b(2,(e,t)=>up(s=>cX(s(e),{onFailure:e=>cX(t,{onFailure:t=>cB(lN(e,t)),onSuccess:()=>cB(e)}),onSuccess:e=>cO(t,e)}))),vZ=(e,t,s)=>cH(n=>cV(cV(vT(c5(e)),e=>cN(n=>{let i=t.map(e=>e.listeners.count),r=()=>{i.every(e=>0===e)&&t.every(e=>"Pending"===e.result.state.current._tag||!!("Done"===e.result.state.current._tag&&pm(e.result.state.current.effect)&&"Failure"===e.result.state.current.effect._tag&&lF(e.result.state.current.effect.cause)))&&(a.forEach(e=>e()),s?.(),n(uw(e)))};e.addObserver(e=>{a.forEach(e=>e()),n(e)});let a=t.map((e,t)=>{let s=e=>{i[t]=e,r()};return e.listeners.addObserver(s),()=>e.listeners.removeObserver(s)});return r(),ua(()=>{a.forEach(e=>e())})})),()=>ur(()=>c1(t.flatMap(e=>e.state.completed?[]:[e]),e=>yD(e.request,pS(n))))));class v0{s;stripped;index;length;constructor(e,t=!1){this.s=e,this.stripped=t,this.index=0,this.length=e.length}next(){if(this.done)return{done:!0,value:void 0};let e=this.index;for(;!this.done&&!v1(this.s[this.index]);)this.index=this.index+1;let t=this.index;if(!this.done){let e=this.s[this.index];this.index=this.index+1,!this.done&&v2(e,this.s[this.index])&&(this.index=this.index+1),this.stripped||(t=this.index)}return{done:!1,value:this.s.substring(e,t)}}[Symbol.iterator](){return new v0(this.s,this.stripped)}get done(){return this.index>=this.length}}let v1=e=>{let t=e.charCodeAt(0);return 13===t||10===t},v2=(e,t)=>13===e.charCodeAt(0)&&10===t.charCodeAt(0),v5=((e,t)=>v3(e.minutes,t.minutes)&&v3(e.hours,t.hours)&&v3(e.days,t.days)&&v3(e.months,t.months)&&v3(e.weekdays,t.weekdays),n_(nx)),v3=(e,t)=>v5(nK(e),nK(t)),v4=Symbol.for("effect/ScheduleInterval"),v8={[v4]:v4,startMillis:0,endMillis:0},v6=(e,t)=>e>t?v8:{[v4]:v4,startMillis:e,endMillis:t},v7=b(2,(e,t)=>v9(e,t)===e),v9=b(2,(e,t)=>e.endMillis<=t.startMillis?e:t.endMillis<=e.startMillis?t:e.startMillis<t.startMillis?e:t.startMillis<e.startMillis?t:e.endMillis<=t.endMillis?e:t),_e=b(2,(e,t)=>v6(Math.max(e.startMillis,t.startMillis),Math.min(e.endMillis,t.endMillis))),_t=e=>e.startMillis>=e.endMillis,_s=e=>da(e.endMillis-e.startMillis),_n=e=>v6(e,Number.POSITIVE_INFINITY),_i=Symbol.for("effect/ScheduleIntervals"),_r=e=>({[_i]:_i,intervals:e}),_a=b(2,(e,t)=>rn(t.intervals)?rn(e.intervals)?rr(e.intervals).startMillis<rr(t.intervals).startMillis?_o(ra(e.intervals),t.intervals,rr(e.intervals),iQ()):_o(e.intervals,ra(t.intervals),rr(t.intervals),iQ()):t:e),_o=(e,t,s,n)=>{let i=e,r=t,a=s,o=n;for(;rn(i)||rn(r);)if(!rn(i)&&rn(r))a.endMillis<rr(r).startMillis?(o=S(o,i9(a)),a=rr(r)):a=v6(a.startMillis,rr(r).endMillis),r=ra(r),i=iQ();else if(rn(i)&&rs(r))a.endMillis<rr(i).startMillis?(o=S(o,i9(a)),a=rr(i)):a=v6(a.startMillis,rr(i).endMillis),r=iQ(),i=ra(i);else if(rn(i)&&rn(r))rr(i).startMillis<rr(r).startMillis?(a.endMillis<rr(i).startMillis?(o=S(o,i9(a)),a=rr(i)):a=v6(a.startMillis,rr(i).endMillis),i=ra(i)):(a.endMillis<rr(r).startMillis?(o=S(o,i9(a)),a=rr(r)):a=v6(a.startMillis,rr(r).endMillis),r=ra(r));else throw Error(G("Intervals.unionLoop"));return _r(S(o,i9(a),i5))},_l=b(2,(e,t)=>_c(e.intervals,t.intervals,iQ())),_c=(e,t,s)=>{let n=e,i=t,r=s;for(;rn(n)&&rn(i);){let e=S(rr(n),_e(rr(i))),t=_t(e)?r:S(r,i9(e));S(rr(n),v7(rr(i)))?n=ra(n):i=ra(i),r=t}return _r(i5(r))},_u=e=>S(e.intervals,ri,nE(()=>v8)).startMillis,_p=b(2,(e,t)=>_u(e)<_u(t)),_d=b(2,(e,t)=>_p(e,t)?t:e),_h=e=>S(e.intervals,ri,nE(()=>v8)).endMillis,_m=e=>rn(e.intervals),_f="Continue",_g="Done",_b=e=>({_tag:_f,intervals:e}),_x=e=>({_tag:_f,intervals:_r(iZ(e))}),_y={_tag:_g},_v=e=>e._tag===_f,__=e=>e._tag===_g,_w=Symbol.for("effect/Schedule"),_S=e=>q(e,_w),_k=Symbol.for("effect/ScheduleDriver"),_E={_Out:e=>e,_In:e=>e,_R:e=>e},_O={_Out:e=>e,_In:e=>e,_R:e=>e};class _T{initial;step;[_w]=_E;constructor(e,t){this.initial=e,this.step=t}pipe(){return eT(this,arguments)}}class _I{schedule;ref;[_k]=_O;constructor(e,t){this.schedule=e,this.ref=t}get state(){return c4(gP(this.ref),e=>e[1])}get last(){return cV(gP(this.ref),([e,t])=>{switch(e._tag){case"None":return cz(()=>new pp);case"Some":return ui(e.value)}})}get reset(){return gU(this.ref,[nS(),this.schedule.initial])}next(e){return S(c4(gP(this.ref),e=>e[1]),cV(t=>S(fH,cV(s=>S(ur(()=>this.schedule.step(s,e,t)),cV(([e,t,n])=>{let i=gU(this.ref,[e3(t),e]);if(__(n))return uv(i,cq(nS()));let r=_u(n.intervals)-s;return r<=0?cO(i,t):S(i,uv(bl(da(r))),cO(t))}))))))}}let _R=(e,t)=>new _T(e,t),_N=b(2,(e,t)=>_A(e,e=>ua(()=>t(e)))),_A=b(2,(e,t)=>_B(e,(e,s)=>c4(t(e),e=>d_(s,p8(e))))),_C=((e,t)=>_R([e.initial,t.initial,!0],(s,n,i)=>i[2]?cV(e.step(s,n,i[0]),([e,r,a])=>__(a)?c4(t.step(s,n,i[1]),([t,s,n])=>[[e,t,!1],t_(s),n]):ui([[e,i[1],!0],tv(r),a])):c4(t.step(s,n,i[1]),([e,t,s])=>[[i[0],e,!1],t_(t),s])),b(2,(e,t)=>_M(e,(e,s)=>ua(()=>t(e,s))))),_M=b(2,(e,t)=>_R(e.initial,(s,n,i)=>cV(e.step(s,n,i),([e,s,i])=>__(i)?ui([e,s,_y]):c4(t(n,s),t=>t?[e,s,i]:[e,s,_y])))),_F=b(2,(e,t)=>_R([e.initial,t.initial],(s,n,i)=>cV(e.step(s,n,i[0]),([e,n,r])=>c4(t.step(s,n,i[1]),([t,s,n])=>__(r)?[[e,t],s,_y]:__(n)?[[e,t],s,_y]:[[e,t],s,_b(S(r.intervals,_d(n.intervals)))])))),_j=((e,t)=>_j(e,e=>ua(()=>t(e))),b(2,(e,t)=>_R(e.initial,(s,n,i)=>cV(t(n),t=>e.step(s,t,i))))),_L=((e,t)=>_B(e,(e,s)=>t(s)),e=>_N(e,e=>e)),_P=e=>S(gL([nS(),e.initial]),c4(t=>new _I(e,t))),_U=b(2,(e,t)=>_D(e,t,_l)),_D=b(3,(e,t,s)=>_R([e.initial,t.initial],(n,i,r)=>S(u_(e.step(n,i,r[0]),t.step(n,i,r[1]),(e,t)=>[e,t]),cV(([[n,r,a],[o,l,c]])=>_v(a)&&_v(c)?_$(e,t,i,n,r,a.intervals,o,l,c.intervals,s):ui([[n,o],[r,l],_y]))))),_$=(e,t,s,n,i,r,a,o,l,c)=>{let u=c(r,l);return _m(u)?ui([[n,a],[i,o],_b(u)]):S(r,_p(l))?cV(e.step(_h(r),s,n),([n,i,r])=>__(r)?ui([[n,a],[i,o],_y]):_$(e,t,s,n,i,r.intervals,a,o,l,c)):cV(t.step(_h(l),s,a),([a,o,l])=>__(l)?ui([[n,a],[i,o],_y]):_$(e,t,s,n,i,r,a,o,l.intervals,c))},_q=b(2,(e,t)=>_z(e,e=>ua(()=>t(e)))),_z=b(2,(e,t)=>_R(e.initial,(s,n,i)=>cV(e.step(s,n,i),([e,s,n])=>c4(t(s),t=>[e,t,n])))),_B=b(2,(e,t)=>_R(e.initial,(s,n,i)=>cV(e.step(s,n,i),([e,n,i])=>{if(__(i))return ui([e,n,i]);let r=i.intervals;return c4(t(n,_s(v6(s,_u(r)))),t=>{let i=p8(t),a=_u(r),o=s+dh(i),l=o-a;return[e,n,_x(v6(o,Math.max(0,_h(r)+l)))]})}))),_J=e=>_G(we,t=>t<e),_K=((e,t,s)=>_R([e.initial,t],(t,n,[i,r])=>cV(e.step(t,n,i),([e,t,n])=>__(n)?ui([[e,r],r,n]):c4(s(r,t),t=>[[e,t],r,n]))),b(2,(e,t)=>_H(e,t,_a))),_H=b(3,(e,t,s)=>_R([e.initial,t.initial],(n,i,r)=>u_(e.step(n,i,r[0]),t.step(n,i,r[1]),([e,t,n],[i,r,a])=>{if(__(n)&&__(a))return[[e,i],[t,r],_y];if(__(n)&&_v(a))return[[e,i],[t,r],_b(a.intervals)];if(_v(n)&&__(a))return[[e,i],[t,r],_b(n.intervals)];if(_v(n)&&_v(a))return[[e,i],[t,r],_b(s(n.intervals,a.intervals))];throw Error("BUG: Schedule.unionWith - please report an issue at https://github.com/Effect-TS/effect/issues")}))),_V=b(2,(e,t)=>_M(e,(e,s)=>bO(t(e)))),_W=b(2,(e,t)=>_M(e,(e,s)=>t(e))),_G=b(2,(e,t)=>_C(e,(e,s)=>t(s))),_Y=((e,t)=>_q(_U(e,t),e=>e[0]),Symbol.for("effect/Schedule/ScheduleDefect"));class _Q{error;[_Y];constructor(e){this.error=e,this[_Y]=_Y}}let _X=e=>q(e,_Y),_Z=e=>cC(e,e=>cP(new _Q(e))),_0=e=>cA(e,e=>nk(lG(e,e=>lC(e)&&_X(e.defect)?e3(e.defect):nS()),{onNone:()=>cB(e),onSome:e=>cq(e.error)})),_1=((e,t)=>_1(e,t,(e,t)=>cq(e)),b(3,(e,t,s)=>cV(_P(t),t=>cZ(e,{onFailure:e=>s(e,nS()),onSuccess:n=>_2(e,t,s,n)})))),_2=(e,t,s,n)=>cZ(t.next(n),{onFailure:()=>ut(t.last),onSuccess:n=>cZ(e,{onFailure:e=>s(e,e3(n)),onSuccess:n=>_2(e,t,s,n)})}),_5=b(2,(e,t)=>_4(e,t,(e,t)=>cq(e))),_3=b(2,(e,t)=>{if(_S(t))return _5(e,t);let s=t.schedule??we,n=t.while?_W(s,e=>{let s=t.while(e);return"boolean"==typeof s?ui(s):_Z(s)}):s,i=t.until?_V(n,e=>{let s=t.until(e);return"boolean"==typeof s?ui(s):_Z(s)}):n;return _0(_5(e,t.times?_U(i,_J(t.times)):i))}),_4=b(3,(e,t,s)=>cV(_P(t),t=>_8(e,t,s))),_8=(e,t,s)=>cC(e,n=>cZ(t.next(n),{onFailure:()=>S(t.last,ut,cV(e=>s(n,e))),onSuccess:()=>_8(e,t,s)})),_6=((e,t)=>_6(e,void 0,t),b(3,(e,t,s)=>cV(_P(s),s=>_7(e,t,s)))),_7=(e,t,s)=>cZ(s.next(t),{onFailure:()=>ut(s.last),onSuccess:()=>cV(e,t=>_7(e,t,s))}),_9=_R(nS(),(e,t,s)=>{switch(s._tag){case"None":return ui([e3(e),ds,_x(_n(e))]);case"Some":return ui([e3(s.value),da(e-s.value),_x(_n(e))])}}),we=(c=e=>e+1,_R(0,(e,t,s)=>ua(()=>[c(s),s,_x(_n(e))])));class wt{permits;waiters=new Set;taken=0;constructor(e){this.permits=e}get free(){return this.permits-this.taken}take=e=>cN(t=>{if(this.free<e){let s=()=>{this.free<e||(this.waiters.delete(s),this.taken+=e,t(ui(e)))};return this.waiters.add(s),ua(()=>{this.waiters.delete(s)})}return this.taken+=e,t(ui(e))});updateTaken=e=>ck(t=>(this.taken=e(this.taken),this.waiters.size>0&&t.getFiberRef(gK).scheduleTask(()=>{let e=this.waiters.values(),t=e.next();for(;!1===t.done&&this.free>0;)t.value(),t=e.next()},t.getFiberRef(uH)),ui(this.free)));release=e=>this.updateTaken(t=>t-e);releaseAll=this.updateTaken(e=>0);withPermits=e=>t=>up(s=>cV(s(this.take(e)),e=>vX(s(t),this.release(e))))}let ws=e=>new wt(e),wn=((e,t)=>{let s=p8(t);return cV(pz(),t=>c4(wp(nS()),n=>[pJ(wi(e,s,n),t),wr(n)]))},(e,t,s)=>{let n=dh(p8(t));return S(pC(),uo(t=>c3(e,t)),c4(e=>e3([s+n,e])))}),wi=(e,t,s)=>up(n=>S(fK(e=>e.currentTimeMillis),cV(n=>wh(s,s=>{switch(s._tag){case"None":return e3(wn(e,t,n));case"Some":{let[i]=s.value;return i-n<=0?e3(wn(e,t,n)):nS()}}})),cV(e=>e1(e)?cU("BUG: Effect.cachedInvalidate - please report an issue at https://github.com/Effect-TS/effect/issues"):n(pF(e.value[1]))))),wr=e=>gU(e,nS()),wa=((e,t)=>cV(yW,s=>S(wa(e,s),vX(cV(s.value,t)))),b(2,(e,t)=>uD(vW,e=>e.zip(t))(e))),wo=((e,{duration:t,onTimeout:s})=>cY(wo(e,{onTimeout:()=>cz(s),onSuccess:ui,duration:t})),b(2,(e,{duration:t,onSuccess:s,onTimeout:n})=>cH(i=>vY(e,c5(bl(t)),{onSelfWin:(e,t)=>cV(e.await,n=>"Success"===n._tag?cV(e.inheritAll,()=>cO(uS(t,i),s(n.value))):cV(uS(t,i),()=>p_(n.cause))),onOtherWin:(e,t)=>cV(e.await,s=>"Success"===s._tag?cV(e.inheritAll,()=>cO(uS(t,i),n())):cV(uS(t,i),()=>p_(s.cause))),otherScope:bQ})))),wl=Symbol.for("effect/Ref/SynchronizedRef"),wc={_A:e=>e};class wu{ref;withLock;[wl]=wc;[gC]=gM;[gA];constructor(e,t){this.ref=e,this.withLock=t,this[gA]=gA,this.get=gP(this.ref)}get;modify(e){return this.modifyEffect(t=>ui(e(t)))}modifyEffect(e){return this.withLock(S(cV(gP(this.ref),e),cV(([e,t])=>cO(gU(this.ref,t),e))))}pipe(){return eT(this,arguments)}}let wp=e=>ua(()=>wd(e)),wd=e=>new wu(gj(e),ws(1).withPermits(1)),wh=b(2,(e,t)=>e.modifyEffect(e=>{let s=t(e);switch(s._tag){case"None":return ui([e,e]);case"Some":return c4(s.value,e=>[e,e])}})),wm=((e,t,s)=>({[bX]:bZ,id:()=>S(e.id(),aw(t.id())),await:S(e.await,cY,vP(cY(t.await),s,{concurrent:!0}),c$),children:e.children,inheritAll:uv(t.inheritAll,e.inheritAll),poll:u_(e.poll,t.poll,(e,t)=>S(e,nM(e=>S(t,nC(t=>pR(e,t,{onSuccess:s,onFailure:lR})))))),interruptAsFork:s=>uv(e.interruptAsFork(s),t.interruptAsFork(s)),pipe(){return eT(this,arguments)}}),e=>(t,s)=>{let n=aA(),i=[[uK,[[n,e.context]]]];s?.scheduler&&i.push([gK,[[n,s.scheduler]]]);let r=gs(e.fiberRefs,{entries:i,forkAs:n});s?.updateRefs&&(r=s.updateRefs(r,n));let a=new vp(n,r,e.runtimeFlags),o=t;s?.scope&&(o=cV(pn(s.scope,fY),e=>uv(pe(e,cH(e=>ex(e,a.id())?ud:uS(a,e))),c7(t,t=>ps(e,t)))));let l=a._supervisor;return l!==yY&&(l.onStart(e.context,o,nS(),a),a.addObserver(e=>l.onEnd(e,a))),bQ.add(e.runtimeFlags,a),s?.immediate===!1?a.resume(o):a.start(o),a});class wf extends Error{fiber;_tag="AsyncFiberException";constructor(e){super(`Fiber #${e.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`),this.fiber=e,this.name=this._tag,this.stack=this.message}}let wg=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let s=new wf(e);return Error.stackTraceLimit=t,s},wb=Symbol.for("effect/Runtime/FiberFailure"),wx=Symbol.for("effect/Runtime/FiberFailure/Cause");class wy extends Error{[wb];[wx];constructor(e){super(),this[wb]=wb,this[wx]=e;let t=ce(e);if(t.length>0){let e=t[0];this.name=e.name,this.message=e.message,this.stack=e.stack}this.name=`(FiberFailure) ${this.name}`,(void 0===this.message||0===this.message.length)&&(this.message="An error has occurred")}toJSON(){return{_id:"FiberFailure",cause:this[wx].toJSON()}}toString(){return"(FiberFailure) "+(this.stack??this.message)}[ew](){return this.toString()}}let wv=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let s=new wy(e);return Error.stackTraceLimit=t,s},w_=e=>{switch(e._op){case"Failure":case"Success":return e;case"Left":return pv(e.left);case"Right":return pT(e.right);case"Some":return pT(e.value);case"None":return pv(pp())}},ww=e=>t=>{let s=w_(t);if(s)return s;let n=new gJ,i=wm(e)(t,{scheduler:n});n.flush();let r=i.unsafePoll();if(r)return r;throw wg(i)},wS=e=>(t,s)=>new Promise(n=>{let i=w_(t);i&&n(i);let r=wm(e)(t);r.addObserver(e=>{n(e)}),s?.signal!==void 0&&(s.signal.aborted?r.unsafeInterruptAsFork(r.id()):s.signal.addEventListener("abort",()=>{r.unsafeInterruptAsFork(r.id())},{once:!0}))});class wk{context;runtimeFlags;fiberRefs;constructor(e,t,s){this.context=e,this.runtimeFlags=t,this.fiberRefs=s}pipe(){return eT(this,arguments)}}let wE=ll(1,32,4),wO=new wk((u={context:tp(),runtimeFlags:wE,fiberRefs:new f2(new Map)}).context,u.runtimeFlags,u.fiberRefs),wT=(e,t)=>wS(wO)(e,t).then(e=>{switch(e._tag){case eF:return e.effect_instruction_i0;case eN:throw wv(e.effect_instruction_i0)}}),wI=e=>{let t=ww(wO)(e);if("Failure"!==t._tag)return t.effect_instruction_i0;throw wv(t.effect_instruction_i0)},wR=b(2,(e,t)=>e.modifyEffect(t)),wN=Symbol.for("effect/Layer"),wA={[wN]:{_RIn:e=>e,_E:e=>e,_ROut:e=>e},pipe(){return eT(this,arguments)}},wC=Symbol.for("effect/Layer/MemoMap"),wM=e=>q(e,wN),wF=e=>"Fresh"===e._tag;class wj{ref;[wC];constructor(e){this.ref=e,this[wC]=wC}getOrElseMemoize(e,t){return S(wR(this.ref,s=>{let n=s.get(e);if(void 0!==n){let[e,i]=n;return ui([S(e,cV(([e,t])=>S(bT(e),cO(t))),c7(pE({onFailure:()=>ud,onSuccess:()=>pt(t,i)}))),s])}return S(gL(0),cV(n=>S(pC(),cV(i=>S(gL(()=>ud),c4(r=>{let a=up(a=>S(vB(),cV(o=>S(a(cV(wU(e,o,!0),e=>bx(e(this)))),c$,cV(a=>{switch(a._tag){case eN:return S(pP(i,a.effect_instruction_i0),uv(ps(o,a)),uv(cB(a.effect_instruction_i0)));case eF:return S(gU(r,e=>S(ps(o,e),um(gD(n,e=>[1===e,e-1])),cT)),uv(g$(n,e=>e+1)),uv(pt(t,t=>S(ua(()=>s.delete(e)),uv(gP(r)),cV(e=>e(t))))),uv(pU(i,a.effect_instruction_i0)),cO(a.effect_instruction_i0[1]))}}))))),o=[S(pF(i),c7(pO({onFailure:()=>ud,onSuccess:()=>g$(n,e=>e+1)}))),e=>S(gP(r),cV(t=>t(e)))];return[a,wF(e)?s:s.set(e,o)]}))))))}),cY)}}let wL=ur(()=>c4(wp(new Map),e=>new wj(e))),wP=b(2,(e,t)=>cV(wL,s=>cV(wU(e,t),e=>e(s)))),wU=(e,t,s=!1)=>{switch(e._tag){case"Locally":return ua(()=>s=>e.f(s.getOrElseMemoize(e.self,t)));case"ExtendScope":return ua(()=>t=>vj(s=>t.getOrElseMemoize(e.layer,s)));case"Fold":return ua(()=>s=>S(s.getOrElseMemoize(e.layer,t),cX({onFailure:n=>s.getOrElseMemoize(e.failureK(n),t),onSuccess:n=>s.getOrElseMemoize(e.successK(n),t)})));case"Fresh":return ua(()=>s=>S(e.layer,wP(t)));case"FromEffect":return s?ua(()=>t=>e.effect):ua(()=>s=>s.getOrElseMemoize(e,t));case"Provide":return ua(()=>s=>S(s.getOrElseMemoize(e.first,t),cV(n=>S(s.getOrElseMemoize(e.second,t),pJ(n)))));case"Scoped":return s?ua(()=>s=>vJ(e.effect,t)):ua(()=>s=>s.getOrElseMemoize(e,t));case"Suspend":return ua(()=>s=>s.getOrElseMemoize(e.evaluate(),t));case"ProvideMerge":return ua(()=>s=>S(s.getOrElseMemoize(e.first,t),u_(s.getOrElseMemoize(e.second,t),e.zipK)));case"ZipWith":return ua(()=>s=>S(s.getOrElseMemoize(e.first,t),vP(s.getOrElseMemoize(e.second,t),e.zipK,{concurrent:!0})))}},wD=e=>w$(lO(e)),w$=e=>wB(cB(e)),wq=b(2,(e,t)=>wK(e,{onFailure:wD,onSuccess:t})),wz=b(2,(e,t)=>{let s=tu(e),n=s?e:t;return wB(c4(s?t:e,e=>ti(n,e)))});function wB(e){let t=Object.create(wA);return t._tag="FromEffect",t.effect=e,t}let wJ=b(2,(e,{onFailure:t,onSuccess:s})=>{let n=Object.create(wA);return n._tag="Fold",n.layer=e,n.failureK=t,n.successK=s,n}),wK=b(2,(e,{onFailure:t,onSuccess:s})=>wJ(e,{onFailure:e=>{let s=l$(e);switch(s._tag){case"Left":return t(s.left);case"Right":return w$(s.right)}},onSuccess:s})),wH=b(2,(e,t)=>{let s=tu(e),n=s?e:t;return wW(c4(s?t:e,e=>ti(n,e)))}),wV=e=>wW(S(e,cO(tp()))),wW=e=>{let t=Object.create(wA);return t._tag="Scoped",t.effect=e,t},wG=b(2,(e,t)=>cE(vB(),s=>cV(wP(t,s),t=>pK(e,t)),(e,t)=>ps(e,t))),wY=b(2,(e,t)=>{let s=gl(wO.fiberRefs,t.fiberRefs),n=ld(wO.runtimeFlags,t.runtimeFlags);return up(i=>ck(r=>{let a=r.getFiberRef(uK),o=r.getFiberRefs(),l=gu(r.id(),o)(s),c=r._runtimeFlags,u=lh(n)(c),p=gl(l,o),d=ld(u,c);return r.setFiberRefs(l),r._runtimeFlags=u,vX(pK(i(e),tl(a,t.context)),ck(e=>(e.setFiberRefs(gu(e.id(),e.getFiberRefs())(p)),e._runtimeFlags=lh(d)(e._runtimeFlags),ud)))}))}),wQ=b(2,(e,t)=>wM(t)?wG(e,t):ts(t)?pK(e,t):wY(e,t)),wX=Symbol.for("effect/MutableList"),wZ={[wX]:wX,[Symbol.iterator](){let e=!1,t=this.head;return{next(){if(e)return this.return();if(null==t)return e=!0,this.return();let s=t.value;return t=t.next,{done:e,value:s}},return:t=>(e||(e=!0),{done:!0,value:t})}},toString(){return ek(this.toJSON())},toJSON(){return{_id:"MutableList",values:Array.from(this).map(eS)}},[ew](){return this.toJSON()},pipe(){return eT(this,arguments)}},w0=e=>({value:e,removed:!1,prev:void 0,next:void 0}),w1=()=>{let e=Object.create(wZ);return e.head=void 0,e.tail=void 0,e._length=0,e},w2=e=>0===w5(e),w5=e=>e._length,w3=b(2,(e,t)=>{let s=w0(t);return void 0===e.head&&(e.head=s),void 0===e.tail||(e.tail.next=s,s.prev=e.tail),e.tail=s,e._length+=1,e}),w4=e=>{let t=e.head;if(void 0!==t)return w8(e,t),t.value},w8=(e,t)=>{!t.removed&&(t.removed=!0,void 0!==t.prev&&void 0!==t.next?(t.prev.next=t.next,t.next.prev=t.prev):void 0!==t.prev?(e.tail=t.prev,t.prev.next=void 0):void 0!==t.next?(e.head=t.next,t.next.prev=void 0):(e.tail=void 0,e.head=void 0),e._length>0&&(e._length-=1))},w6=Symbol.for("effect/MutableQueue"),w7=Symbol.for("effect/mutable/MutableQueue/Empty"),w9={[w6]:w6,[Symbol.iterator](){return Array.from(this.queue)[Symbol.iterator]()},toString(){return ek(this.toJSON())},toJSON(){return{_id:"MutableQueue",values:Array.from(this).map(eS)}},[ew](){return this.toJSON()},pipe(){return eT(this,arguments)}},Se=e=>{let t=Object.create(w9);return t.queue=w1(),t.capacity=e,t},St=()=>Se(void 0),Ss=b(2,(e,t)=>{let s=w5(e.queue);return(void 0===e.capacity||s!==e.capacity)&&(w3(t)(e.queue),!0)}),Sn=b(2,(e,t)=>w2(e.queue)?t:w4(e.queue)),Si=(e,t,s,n)=>a2({_tag:"Complete",key:e,exit:t,entryStats:s,timeToLiveMillis:n}),Sr=(e,t)=>a2({_tag:"Pending",key:e,deferred:t}),Sa=(e,t)=>a2({_tag:"Refreshing",deferred:e,complete:t}),So=Symbol.for("effect/Cache/MapKey");class Sl{current;[So]=So;previous=void 0;next=void 0;constructor(e){this.current=e}[er](){return S(ea(this.current),el(ea(this.previous)),el(ea(this.next)),eg(this))}[eb](e){return this===e||Su(e)&&ex(this.current,e.current)&&ex(this.previous,e.previous)&&ex(this.next,e.next)}}let Sc=e=>new Sl(e),Su=e=>q(e,So);class Sp{head=void 0;tail=void 0;add(e){if(e!==this.tail){if(void 0===this.tail)this.head=e,this.tail=e;else{let t=e.previous,s=e.next;void 0!==s&&(e.next=void 0,void 0!==t?(t.next=s,s.previous=t):(this.head=s,this.head.previous=void 0)),this.tail.next=e,e.previous=this.tail,this.tail=e}}}remove(){let e=this.head;if(void 0!==e){let t=e.next;void 0!==t?(e.next=void 0,this.head=t,this.head.previous=void 0):(this.head=void 0,this.tail=void 0)}return e}}let Sd=()=>new Sp,Sh=(e,t,s,n,i,r)=>({map:e,keys:t,accesses:s,updating:n,hits:i,misses:r}),Sm=()=>Sh(xP(),Sd(),St(),ar(!1),0,0),Sf=Symbol.for("effect/Cache"),Sg={_Key:e=>e,_Error:e=>e,_Value:e=>e},Sb=e=>e,Sx=e=>({loadedMillis:e});class Sy{capacity;context;fiberId;lookup;timeToLive;[Sf]=Sg;cacheState;constructor(e,t,s,n,i){this.capacity=e,this.context=t,this.fiberId=s,this.lookup=n,this.timeToLive=i,this.cacheState=Sm()}get(e){return c4(this.getEither(e),tS)}get cacheStats(){return ua(()=>Sb({hits:this.cacheState.hits,misses:this.cacheState.misses,size:xJ(this.cacheState.map)}))}getOption(e){return ur(()=>nk(xU(this.cacheState.map,e),{onNone:()=>{let t=Sc(e);return this.trackAccess(t),this.trackMiss(),ui(nS())},onSome:e=>this.resolveMapValue(e)}))}getOptionComplete(e){return ur(()=>nk(xU(this.cacheState.map,e),{onNone:()=>{let t=Sc(e);return this.trackAccess(t),this.trackMiss(),ui(nS())},onSome:e=>this.resolveMapValue(e,!0)}))}contains(e){return ua(()=>x$(this.cacheState.map,e))}entryStats(e){return ua(()=>{let t=xU(this.cacheState.map,e);if(e2(t))switch(t.value._tag){case"Complete":return e3(Sx(t.value.entryStats.loadedMillis));case"Pending":break;case"Refreshing":return e3(Sx(t.value.complete.entryStats.loadedMillis))}return nS()})}getEither(e){return ur(()=>{let t,s;let n=nR(xU(this.cacheState.map,e));return(void 0===n&&(s=pA(this.fiberId),t=Sc(e),x$(this.cacheState.map,e)?n=nR(xU(this.cacheState.map,e)):xq(this.cacheState.map,e,Sr(t,s))),void 0===n)?(this.trackAccess(t),this.trackMiss(),c4(this.lookupValueOf(e,s),t_)):cV(this.resolveMapValue(n),nk({onNone:()=>this.getEither(e),onSome:e=>ui(tv(e))}))})}invalidate(e){return ua(()=>{xB(this.cacheState.map,e)})}invalidateWhen(e,t){return ua(()=>{let s=xU(this.cacheState.map,e);e2(s)&&"Complete"===s.value._tag&&"Success"===s.value.exit._tag&&t(s.value.exit.value)&&xB(this.cacheState.map,e)})}get invalidateAll(){return ua(()=>{this.cacheState.map=xP()})}refresh(e){return fK(t=>ur(()=>{let s=pA(this.fiberId),n=nR(xU(this.cacheState.map,e));if(void 0===n&&(x$(this.cacheState.map,e)?n=nR(xU(this.cacheState.map,e)):xq(this.cacheState.map,e,Sr(Sc(e),s))),void 0===n)return cT(this.lookupValueOf(e,s));switch(n._tag){case"Complete":if(this.hasExpired(t,n.timeToLiveMillis))return ex(nR(xU(this.cacheState.map,e)),n)&&xB(this.cacheState.map,e),cT(this.get(e));return S(this.lookupValueOf(e,s),bF(()=>{if(ex(nR(xU(this.cacheState.map,e)),n)){let t=Sa(s,n);return xq(this.cacheState.map,e,t),!0}return!1}),cT);case"Pending":case"Refreshing":return pF(n.deferred)}}))}set(e,t){return fK(s=>ua(()=>{let n=s.unsafeCurrentTimeMillis(),i=pT(t),r=Si(Sc(e),i,Sx(n),n+dh(p8(this.timeToLive(i))));xq(this.cacheState.map,e,r)}))}get size(){return ua(()=>xJ(this.cacheState.map))}get values(){return ua(()=>{let e=[];for(let t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push(t[1].exit.value);return e})}get entries(){return ua(()=>{let e=[];for(let t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push([t[0],t[1].exit.value]);return e})}get keys(){return ua(()=>{let e=[];for(let t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push(t[0]);return e})}resolveMapValue(e,t=!1){return fK(s=>{switch(e._tag){case"Complete":if(this.trackAccess(e.key),this.hasExpired(s,e.timeToLiveMillis))return xB(this.cacheState.map,e.key.current),ui(nS());return this.trackHit(),c4(e.exit,e3);case"Pending":if(this.trackAccess(e.key),this.trackHit(),t)return ui(nS());return c4(pF(e.deferred),e3);case"Refreshing":if(this.trackAccess(e.complete.key),this.trackHit(),this.hasExpired(s,e.complete.timeToLiveMillis)){if(t)return ui(nS());return c4(pF(e.deferred),e3)}return c4(e.complete.exit,e3)}})}trackHit(){this.cacheState.hits=this.cacheState.hits+1}trackMiss(){this.cacheState.misses=this.cacheState.misses+1}trackAccess(e){if(Ss(this.cacheState.accesses,e),aa(this.cacheState.updating,!1,!0)){let e=!0;for(;e;){let t=Sn(this.cacheState.accesses,w7);t===w7?e=!1:this.cacheState.keys.add(t)}let t=xJ(this.cacheState.map);for(e=t>this.capacity;e;){let s=this.cacheState.keys.remove();void 0!==s?x$(this.cacheState.map,s.current)&&(xB(this.cacheState.map,s.current),t-=1,e=t>this.capacity):e=!1}al(this.cacheState.updating,!1)}}hasExpired(e,t){return e.unsafeCurrentTimeMillis()>t}lookupValueOf(e,t){return fK(s=>ur(()=>S(this.lookup(e),pJ(this.context),c$,cV(n=>{let i=s.unsafeCurrentTimeMillis(),r=Sx(i),a=Si(Sc(e),n,r,i+dh(p8(this.timeToLive(n))));return xq(this.cacheState.map,e,a),uv(pL(t,n),n)}),c9(()=>uv(fV(t),ua(()=>{xB(this.cacheState.map,e)}))))))}}let Sv=(e,t,s)=>new Sy(e,tp(),ax,t,e=>p8(s(e))),S_=(()=>u$(Sv(65536,()=>c4(pC(),e=>({listeners:new y$,handle:e})),()=>dl(60))),function(){let e;return e=1==arguments.length?arguments[0]:arguments[1].bind(arguments[0]),ur(()=>{let t=e(S),s=en(()=>t.next()),n=e=>e.done?ui(e.value):cV(et(e.value),e=>n(en(()=>t.next(e))));return n(s)})}),Sw=function(){let e="string"!=typeof arguments[0],t=e?arguments[1]:arguments[0],s=cd(e?arguments[2]:arguments[1]);if(e){let e=arguments[0];return bP(t,s,t=>bU(e,t))}return e=>bP(t,s,t=>bU(e,t))},SS=(e,t=[])=>({value:e,forest:t}),Sk=e=>c4(SJ(e),e=>SO(e)),SE=e=>wI(Sk(e)),SO=e=>e.value+ST("\n",e.forest),ST=(e,t)=>{let s,n="",i=t.length;for(let r=0;r<i;r++){s=t[r];let a=r===i-1;n+=e+(a?"":"")+" "+s.value+ST(e+(i>1&&!a?"  ":"   "),s.forest)}return n},SI=e=>{switch(e){case"Encoded":return"Encoded side transformation failure";case"Transformation":return"Transformation process failure";case"Type":return"Type side transformation failure"}},SR=e=>{switch(e){case"From":return"From side refinement failure";case"Predicate":return"Predicate refinement failure"}},SN=e=>"ast"in e?e3(e.ast):nS(),SA=e=>SN(e).pipe(nM(hy),cV(t=>{let s=t(e);return R(s)?ui({message:s,override:!1}):cS(s)?c4(s,e=>({message:e,override:!1})):R(s.message)?ui({message:s.message,override:s.override}):c4(s.message,e=>({message:e,override:s.override}))})),SC=e=>t=>t._tag===e,SM=SC("Composite"),SF=SC("Refinement"),Sj=SC("Transformation"),SL=e=>SA(e).pipe(cV(t=>!t.override&&(SM(e)||SF(e)&&"From"===e.kind||Sj(e)&&"Transformation"!==e.kind)?Sj(e)||SF(e)?SL(e.issue):nS():ui(t.message))),SP=e=>SN(e).pipe(nM(hO),nF(t=>nI(t(e)))),SU=e=>SL(e).pipe(ue(()=>SP(e)),cC(()=>ui(e.message??`Expected ${String(e.ast)}, actual ${dY(e.actual)}`))),SD=e=>nE(SP(e),()=>String(e.ast)),S$=e=>e.message??"is forbidden",Sq=e=>e.message??"is unexpected",Sz=e=>hv(e.ast).pipe(cV(e=>{let t=e();return R(t)?ui(t):t}),cC(()=>ui(e.message??"is missing"))),SB=(e,t)=>cZ(SL(e),{onFailure:t,onSuccess:e=>ui(SS(e))}),SJ=e=>{switch(e._tag){case"Type":return c4(SU(e),SS);case"Forbidden":return ui(SS(SD(e),[SS(S$(e))]));case"Unexpected":return ui(SS(Sq(e)));case"Missing":return c4(Sz(e),SS);case"Transformation":return SB(e,()=>c4(SJ(e.issue),t=>SS(SD(e),[SS(SI(e.kind),[t])])));case"Refinement":return SB(e,()=>c4(SJ(e.issue),t=>SS(SD(e),[SS(SR(e.kind),[t])])));case"Pointer":return c4(SJ(e.issue),t=>SS(d1(e.path),[t]));case"Composite":{let t=SD(e);return SB(e,()=>dX(e.issues)?c4(vS(e.issues,SJ),e=>SS(t,e)):c4(SJ(e.issues),e=>SS(t,[e])))}}};class SK{path;actual;issue;_tag="Pointer";constructor(e,t,s){this.path=e,this.actual=t,this.issue=s}}class SH{actual;message;_tag="Unexpected";constructor(e,t){this.actual=e,this.message=t}}class SV{ast;message;_tag="Missing";actual=void 0;constructor(e,t){this.ast=e,this.message=t}}class SW{ast;actual;issues;output;_tag="Composite";constructor(e,t,s,n){this.ast=e,this.actual=t,this.issues=s,this.output=n}}class SG{ast;actual;kind;issue;_tag="Refinement";constructor(e,t,s,n){this.ast=e,this.actual=t,this.kind=s,this.issue=n}}class SY{ast;actual;kind;issue;_tag="Transformation";constructor(e,t,s,n){this.ast=e,this.actual=t,this.kind=s,this.issue=n}}class SQ{ast;actual;message;_tag="Type";constructor(e,t,s){this.ast=e,this.actual=t,this.message=s}}class SX{ast;actual;message;_tag="Forbidden";constructor(e,t,s){this.ast=e,this.actual=t,this.message=s}}let SZ=Symbol.for("@effect/schema/ParseErrorTypeId");class S0 extends pQ("ParseError"){[SZ]=SZ;get message(){return this.toString()}toString(){return SE(this.issue)}toJSON(){return{_id:"ParseError",message:this.toString()}}[ew](){return this.toJSON()}}let S1=e=>new S0({issue:e}),S2=t_,S5=tv,S3=tw,S4=b(2,(e,t)=>"Left"===e._tag?e:"Right"===e._tag?t(e.right):cV(e,t)),S8=b(2,(e,t)=>"Left"===e._tag?e:"Right"===e._tag?t_(t(e.right)):c4(e,t)),S6=b(2,(e,t)=>"Left"===e._tag?tv(t(e.left)):"Right"===e._tag?e:c6(e,t)),S7=e=>{if("Left"===e._tag||"Right"===e._tag)return e},S9=b(2,(e,t)=>"Left"===e._tag?tv(t.onFailure(e.left)):"Right"===e._tag?t_(t.onSuccess(e.right)):c8(e,t)),ke=(e,t)=>void 0===t||N(t)?e:void 0===e?t:{...e,...t},kt=(e,t,s)=>{let n=ku(e,t);return(e,t)=>n(e,ke(s,t))},ks=(e,t,s)=>{let n=kt(e,t,s);return(e,t)=>tk(n(e,t),S1)},kn=(e,t,s)=>{let n=ku(e,t);return(e,t)=>n(e,{...ke(s,t),isEffectAllowed:!0})},ki=(e,t)=>kn(e.ast,!0,t),kr=(e,t)=>kn(e.ast,!1,t),ka=(e,t)=>ks(mL(e.ast),!0,t),ko=(e,t)=>{let s=ku(mL(e.ast),!0);return(e,n)=>ty(s(e,{exact:!0,...ke(t,n)}))},kl=T(Symbol.for("@effect/schema/Parser/decodeMemoMap"),()=>new WeakMap),kc=T(Symbol.for("@effect/schema/Parser/encodeMemoMap"),()=>new WeakMap),ku=(e,t)=>{let s=t?kl:kc,n=s.get(e);if(n)return n;let i=kh(e,t),r=hT(e),a=e2(r)?(e,t)=>i(e,ke(t,r.value)):i;return s.set(e,a),a},kp=e=>nR(hk(e)),kd=e=>nR(hE(e)),kh=(e,t)=>{switch(e._tag){case"Refinement":if(t){let t=ku(e.from,!0);return(s,n)=>kx(S4(S6(t(s,n),t=>new SG(e,s,"From",t)),t=>nk(e.filter(t,n??mS,e),{onNone:()=>t_(t),onSome:t=>tv(new SG(e,s,"Predicate",t))})),e,s,n)}{let t=ku(mL(e),!0),s=ku(kb(e.from),!1);return(n,i)=>kx(S4(t(n,i),e=>s(e,i)),e,n,i)}case"Transformation":{let s=k_(e.transformation,t),n=t?ku(e.from,!0):ku(e.to,!1),i=t?ku(e.to,!0):ku(e.from,!1);return(r,a)=>kx(S4(S6(n(r,a),s=>new SY(e,r,t?"Encoded":"Type",s)),n=>S4(S6(s(n,a??mS,e),t=>new SY(e,r,"Transformation",t)),s=>S6(i(s,a),s=>new SY(e,r,t?"Type":"Encoded",s)))),e,r,a)}case"Declaration":{let s=t?e.decodeUnknown(...e.typeParameters):e.encodeUnknown(...e.typeParameters);return(t,n)=>kx(s(t,n??mS,e),e,t,n)}case"Literal":return km(e,t=>t===e.literal);case"UniqueSymbol":return km(e,t=>t===e.symbol);case"UndefinedKeyword":case"VoidKeyword":return km(e,j);case"NeverKeyword":return km(e,U);case"UnknownKeyword":case"AnyKeyword":return t_;case"StringKeyword":return km(e,R);case"NumberKeyword":return km(e,N);case"BooleanKeyword":return km(e,A);case"BigIntKeyword":return km(e,C);case"SymbolKeyword":return km(e,M);case"ObjectKeyword":return km(e,$);case"Enums":return km(e,t=>e.enums.some(([e,s])=>s===t));case"TemplateLiteral":{let t=mC(e);return km(e,e=>R(e)&&t.test(e))}case"TupleType":{let s=e.elements.map(e=>ku(e.type,t)),n=e.rest.map(e=>ku(e.type,t)),i=e.elements.filter(e=>!e.isOptional);e.rest.length>0&&(i=i.concat(e.rest.slice(1)));let r=i.length,a=e.elements.length>0?e.elements.map((e,t)=>t).join(" | "):"never",o=kp(e),l=kd(e);return(t,c)=>{let u;if(!nY(t))return tv(new SQ(e,t));let p=c?.errors==="all",d=[],h=0,m=[],f=t.length;for(let s=f;s<=r-1;s++){let n=new SK(s,t,new SV(i[s-f]));if(!p)return tv(new SW(e,t,n,m));d.push([h++,n])}if(0===e.rest.length)for(let s=e.elements.length;s<=f-1;s++){let n=new SK(s,t,new SH(t[s],`is unexpected, expected: ${a}`));if(!p)return tv(new SW(e,t,n,m));d.push([h++,n])}let g=0;for(;g<s.length;g++)if(f<g+1){if(e.elements[g].isOptional)continue}else{let n=(0,s[g])(t[g],c),i=S7(n);if(i){if(tx(i)){let s=new SK(g,t,i.left);if(!p)return tv(new SW(e,t,s,kv(m)));d.push([h++,s]);continue}m.push([h++,i.right])}else{let s=h++,i=g;u||(u=[]),u.push(({es:r,output:a})=>cV(cD(n),n=>{if(tx(n)){let o=new SK(i,t,n.left);return p?(r.push([s,o]),ud):tv(new SW(e,t,o,kv(a)))}return a.push([s,n.right]),ud}))}}if(nX(n)){let[s,...i]=n;for(;g<f-i.length;g++){let n=s(t[g],c),i=S7(n);if(i){if(tx(i)){let s=new SK(g,t,i.left);if(!p)return tv(new SW(e,t,s,kv(m)));d.push([h++,s]);continue}m.push([h++,i.right])}else{let s=h++,i=g;u||(u=[]),u.push(({es:r,output:a})=>cV(cD(n),n=>{if(!tx(n))return a.push([s,n.right]),ud;{let o=new SK(i,t,n.left);return p?(r.push([s,o]),ud):tv(new SW(e,t,o,kv(a)))}}))}}for(let s=0;s<i.length;s++)if(!(f<(g+=s)+1)){let n=i[s](t[g],c),r=S7(n);if(r){if(tx(r)){let s=new SK(g,t,r.left);if(!p)return tv(new SW(e,t,s,kv(m)));d.push([h++,s]);continue}m.push([h++,r.right])}else{let s=h++,i=g;u||(u=[]),u.push(({es:r,output:a})=>cV(cD(n),n=>{if(tx(n)){let o=new SK(i,t,n.left);return p?(r.push([s,o]),ud):tv(new SW(e,t,o,kv(a)))}return a.push([s,n.right]),ud}))}}}let b=({es:s,output:n})=>nw(s)?tv(new SW(e,t,kv(s),kv(n))):t_(kv(n));if(u&&u.length>0){let e=u;return ur(()=>{let t={es:ic(d),output:ic(m)};return cV(vS(e,e=>e(t),{concurrency:o,batching:l,discard:!0}),()=>b(t))})}return b({output:m,es:d})}}case"TypeLiteral":{if(0===e.propertySignatures.length&&0===e.indexSignatures.length)return km(e,J);let s=[],n={},i=[];for(let r of e.propertySignatures)s.push([ku(r.type,t),r]),n[r.name]=null,i.push(r.name);let r=e.indexSignatures.map(e=>[ku(e.parameter,t),ku(e.type,t),e.parameter]),a=mf.make(e.indexSignatures.map(e=>e.parameter).concat(i.map(e=>M(e)?new hP(e):new hF(e)))),o=ku(a,t),l=kp(e),c=kd(e);return(t,u)=>{let p,d;if(!V(t))return tv(new SQ(e,t));let h=u?.errors==="all",m=[],f=0,g=u?.onExcessProperty==="error",b=u?.onExcessProperty==="preserve",x={};if(g||b){for(let s of p=dW(t))if(tx(S7(o(s,u)))){if(g){let n=new SK(s,t,new SH(t[s],`is unexpected, expected: ${String(a)}`));if(!h)return tv(new SW(e,t,n,x));m.push([f++,n]);continue}x[s]=t[s]}}let y=u?.exact===!0;for(let n=0;n<s.length;n++){let i=s[n][1],r=i.name,a=Object.prototype.hasOwnProperty.call(t,r);if(!a){if(i.isOptional)continue;if(y){let s=new SK(r,t,new SV(i));if(!h)return tv(new SW(e,t,s,x));m.push([f++,s]);continue}}let o=(0,s[n][0])(t[r],u),l=S7(o);if(l){if(tx(l)){let s=new SK(r,t,a?l.left:new SV(i));if(!h)return tv(new SW(e,t,s,x));m.push([f++,s]);continue}x[r]=l.right}else{let s=f++;d||(d=[]),d.push(({es:n,output:l})=>cV(cD(o),o=>{if(tx(o)){let c=new SK(r,t,a?o.left:new SV(i));return h?(n.push([s,c]),ud):tv(new SW(e,t,c,l))}return l[r]=o.right,ud}))}}for(let s=0;s<r.length;s++){let i=r[s],a=i[0],o=i[1];for(let s of dV(t,i[2])){let i=S7(a(s,u));if(i&&ty(i)){let i=o(t[s],u),r=S7(i);if(r){if(tx(r)){let n=new SK(s,t,r.left);if(!h)return tv(new SW(e,t,n,x));m.push([f++,n]);continue}Object.prototype.hasOwnProperty.call(n,s)||(x[s]=r.right)}else{let r=f++,a=s;d||(d=[]),d.push(({es:o,output:l})=>cV(cD(i),i=>{if(!tx(i))return Object.prototype.hasOwnProperty.call(n,s)||(l[s]=i.right),ud;{let s=new SK(a,t,i.left);return h?(o.push([r,s]),ud):tv(new SW(e,t,s,l))}}))}}}}let v=({es:s,output:n})=>{if(nw(s))return tv(new SW(e,t,kv(s),n));if(u?.propertyOrder==="original"){let e=p||dW(t);for(let t of i)-1===e.indexOf(t)&&e.push(t);let s={};for(let t of e)Object.prototype.hasOwnProperty.call(n,t)&&(s[t]=n[t]);return t_(s)}return t_(n)};if(d&&d.length>0){let e=d;return ur(()=>{let t={es:ic(m),output:Object.assign({},x)};return cV(vS(e,e=>e(t),{concurrency:l,batching:c,discard:!0}),()=>v(t))})}return v({es:m,output:x})}}case"Union":{let s=kg(e.types,t),n=dW(s.keys),i=n.length,r=new Map;for(let s=0;s<e.types.length;s++)r.set(e.types[s],ku(e.types[s],t));let a=kp(e)??1,o=kd(e);return(t,l)=>{let c;let u=[],p=0,d=[];if(i>0){if(V(t))for(let e=0;e<i;e++){let i=n[e],r=s.keys[i].buckets;if(Object.prototype.hasOwnProperty.call(t,i)){let e=String(t[i]);if(Object.prototype.hasOwnProperty.call(r,e))d=d.concat(r[e]);else{let e=mf.make(s.keys[i].literals);u.push([p++,new SW(new mo([new mi(i,e,!1,!0)],[]),t,new SK(i,t,new SQ(e,t[i])))])}}else{let e=mf.make(s.keys[i].literals),n=new mi(i,e,!1,!0);u.push([p++,new SW(new mo([n],[]),t,new SK(i,t,new SV(n)))])}}else u.push([p++,new SQ(e,t)])}s.otherwise.length>0&&(d=d.concat(s.otherwise));for(let e=0;e<d.length;e++){let s=d[e],n=r.get(s)(t,l),i=c&&0!==c.length?void 0:S7(n);if(i){if(ty(i))return t_(i.right);u.push([p++,i.left])}else{let e=p++;c||(c=[]),c.push(t=>ur(()=>"finalResult"in t?ud:cV(cD(n),s=>(ty(s)?t.finalResult=t_(s.right):t.es.push([e,s.left]),ud))))}}let h=s=>nw(s)?1===s.length&&"Type"===s[0][1]._tag?tv(s[0][1]):tv(new SW(e,t,kv(s))):tv(new SQ(e,t));if(c&&c.length>0){let e=c;return ur(()=>{let t={es:ic(u)};return cV(vS(e,e=>e(t),{concurrency:a,batching:o,discard:!0}),()=>"finalResult"in t?t.finalResult:h(t.es))})}return h(u)}}case"Suspend":{let s=dG(()=>ku(mA(e.f(),e.annotations),t));return(e,t)=>s()(e,t)}}},km=(e,t)=>s=>t(s)?t_(s):tv(new SQ(e,s)),kf=(e,t)=>{switch(e._tag){case"Declaration":{let s=hI(e);if(e2(s))return kf(s.value,t);break}case"TypeLiteral":{let s=[];for(let n=0;n<e.propertySignatures.length;n++){let i=e.propertySignatures[n],r=t?mq(i.type):mL(i.type);hj(r)&&!i.isOptional&&s.push([i.name,r])}return s}case"Refinement":return kf(e.from,t);case"Suspend":return kf(e.f(),t);case"Transformation":return kf(t?e.from:e.to,t)}return[]},kg=(e,t)=>{let s={},n=[];for(let i=0;i<e.length;i++){let r=e[i],a=kf(r,t);if(a.length>0)for(let e=0;e<a.length;e++){let[t,n]=a[e],i=String(n.literal);s[t]=s[t]||{buckets:{},literals:[]};let o=s[t].buckets;if(Object.prototype.hasOwnProperty.call(o,i)){if(e<a.length-1)continue;o[i].push(r),s[t].literals.push(n)}else{o[i]=[r],s[t].literals.push(n);break}}else n.push(r)}return{keys:s,otherwise:n}},kb=e=>mw(e)?kb(e.from):e,kx=(e,t,s,n)=>{let i=S7(e);if(i)return i;if(n?.isEffectAllowed===!0)return e;try{return wI(cD(e))}catch(e){return tv(new SX(t,s,"cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work"))}},ky=([e],[t])=>e>t?1:e<t?-1:0;function kv(e){return e.sort(ky).map(e=>e[1])}let k_=(e,t)=>{switch(e._tag){case"FinalTransformation":return t?e.decode:e.encode;case"ComposeTransformation":return t_;case"TypeLiteralTransformation":return s=>{let n=t_(s);for(let s of e.propertySignatureTransformations){let[e,i]=t?[s.from,s.to]:[s.to,s.from],r=t?s.decode:s.encode;n=S8(n,t=>{let s=r(Object.prototype.hasOwnProperty.call(t,e)?e3(t[e]):nS());return delete t[e],e2(s)&&(t[i]=s.value),t})}return n}}},kw=Symbol.for("@effect/schema/PrettyHookId"),kS=hx(kw),kk=Symbol.for("@effect/schema/Schema"),kE=e=>class{[kk]=kO;static Type;static Encoded;static [kk]=kO;static ast=e;static annotations(e){return kE(kI(this.ast,e))}static pipe(){return eT(this,arguments)}static toString(){return String(e)}},kO={_A:e=>e,_I:e=>e,_R:e=>e},kT=e=>{if(!e)return{};let t={};for(let s of Object.getOwnPropertySymbols(e))t[s]=e[s];if(void 0!==e.typeId){let s=e.typeId;"object"==typeof s?(t[hs]=s.id,t[s.id]=s.annotation):t[hs]=s}let s=(s,n)=>{void 0!==e[s]&&(t[n]=e[s])};return s("message",hn),s("missingMessage",hi),s("identifier",hr),s("title",ha),s("description",ho),s("examples",hl),s("default",hc),s("documentation",hp),s("jsonSchema",hu),s("arbitrary",dC),s("pretty",kw),s("equivalence",mQ),s("concurrency",hd),s("batching",hh),s("parseIssueTitle",hm),s("parseOptions",hf),t},kI=(e,t)=>mA(e,kT(t)),kR=e=>String(e.ast),kN=e=>kE(mq(e.ast)),kA=e=>kE(mL(e.ast)),kC=(e,t)=>{let s=ki(e,t);return(e,t)=>S6(s(e,t),S1)},kM=e=>q(e,kk)&&$(e[kk]),kF=e=>mb(e)?mf.make(mg(e,e=>new hF(e))):new hF(e[0]),kj=(e,t=kF(e))=>class extends kE(t){static annotations(e){return kj(this.literals,kI(this.ast,e))}static literals=[...e]};function kL(...e){return nX(e)?kj(e):kJ}let kP=e=>{switch(e._tag){case"Literal":return[String(e.literal)];case"NumberKeyword":case"StringKeyword":return[new AST.TemplateLiteral("",[new AST.TemplateLiteralSpan(e,"")])];case"Union":return array_.flatMap(e.types,kP)}throw Error(errors_.getSchemaUnsupportedLiteralSpanErrorMessage(e))},kU=(e,t,s)=>kE(new hC(e.map(e=>e.ast),(...e)=>t.decode(...e.map(kE)),(...e)=>t.encode(...e.map(kE)),kT(s))),kD=(e,t)=>{let s=()=>(t,s,n)=>e(t)?S2(t):S5(new SQ(n,t));return kE(new hC([],s,s,kT(t)))},k$=function(){if(Array.isArray(arguments[0])){let e=arguments[0],t=arguments[1],s=arguments[2];return kU(e,t,s)}let e=arguments[0],t=arguments[1];return kD(e,t)};class kq extends kE(hD){static annotations=super.annotations}class kz extends kE(hq){static annotations=super.annotations}class kB extends kE(hL){static annotations=super.annotations}class kJ extends kE(hB){static annotations=super.annotations}class kK extends kE(hK){static annotations=super.annotations}class kH extends kE(hV){static annotations=super.annotations}class kV extends kE(h5){static annotations=super.annotations}class kW extends kE(h4){static annotations=super.annotations}class kG extends kE(hG){static annotations=super.annotations}class kY extends kE(hX){static annotations=super.annotations}class kQ extends kE(h1){static annotations=super.annotations}class kX extends kE(h7){static annotations=super.annotations}let kZ=e=>mf.members(e.map(e=>e.ast)),k0=(e,t=kZ(e))=>class extends kE(t){static annotations(e){return k0(this.members,kI(this.ast,e))}static members=[...e]};function k1(...e){return mb(e)?k0(e):nX(e)?e[0]:kJ}let k2=e=>k1(e,kB),k5=e=>k1(e,kq),k3=e=>k1(e,kB,kq);class k4{ast;from;[kk];_Token;constructor(e,t){this.ast=e,this.from=t}annotations(e){return new k4(new AST.OptionalType(this.ast.type,this.ast.isOptional,{...this.ast.annotations,...kT(e)}),this.from)}toString(){return`${this.ast.type}${this.ast.isOptional?"?":""}`}}let k8=(e,t)=>new ms(e.map(e=>kM(e)?new me(e.ast,!1):e.ast),t.map(e=>kM(e)?new h9(e.ast):e.ast),!0),k6=(e,t,s=k8(e,t))=>class extends kE(s){static annotations(e){return k6(this.elements,this.rest,kI(this.ast,e))}static elements=[...e];static rest=[...t]},k7=(e,t)=>class extends k6([],[e],t){static annotations(e){return k7(this.value,kI(this.ast,e))}static value=e},k9=e=>k7(e),Ee=e=>e?'"?:"':'":"';class Et extends me{isReadonly;defaultValue;_tag="PropertySignatureDeclaration";constructor(e,t,s,n,i){super(e,t,n),this.isReadonly=s,this.defaultValue=i}toString(){let e=Ee(this.isOptional),t=String(this.type);return`PropertySignature<${e}, ${t}, never, ${e}, ${t}>`}}class Es extends me{isReadonly;fromKey;constructor(e,t,s,n,i){super(e,t,n),this.isReadonly=s,this.fromKey=i}}class En extends me{isReadonly;defaultValue;constructor(e,t,s,n,i){super(e,t,n),this.isReadonly=s,this.defaultValue=i}}let Ei=e=>void 0===e?"never":R(e)?JSON.stringify(e):String(e);class Er{from;to;decode;encode;_tag="PropertySignatureTransformation";constructor(e,t,s,n){this.from=e,this.to=t,this.decode=s,this.encode=n}toString(){return`PropertySignature<${Ee(this.to.isOptional)}, ${this.to.type}, ${Ei(this.from.fromKey)}, ${Ee(this.from.isOptional)}, ${this.from.type}>`}}let Ea=(e,t)=>{switch(e._tag){case"PropertySignatureDeclaration":return new Et(e.type,e.isOptional,e.isReadonly,{...e.annotations,...t},e.defaultValue);case"PropertySignatureTransformation":return new Er(new Es(e.from.type,e.from.isOptional,e.from.isReadonly,e.from.annotations),new En(e.to.type,e.to.isOptional,e.to.isReadonly,{...e.to.annotations,...t},e.to.defaultValue),e.decode,e.encode)}},Eo=Symbol.for("@effect/schema/PropertySignature");class El{ast;[kk];[Eo]=null;_TypeToken;_Key;_EncodedToken;_HasDefault;constructor(e){this.ast=e}pipe(){return eT(this,arguments)}annotations(e){return new El(Ea(this.ast,kT(e)))}toString(){return String(this.ast)}}let Ec=e=>new El(e);class Eu extends El{from;constructor(e,t){super(e),this.from=t}annotations(e){return new Eu(Ea(this.ast,kT(e)),this.from)}}let Ep=b(2,(e,t)=>{let s=e.ast;switch(s._tag){case"PropertySignatureDeclaration":return Ec(new Et(s.type,s.isOptional,s.isReadonly,s.annotations,t));case"PropertySignatureTransformation":return Ec(new Er(s.from,new En(s.to.type,s.to.isOptional,s.to.isReadonly,s.to.annotations,t),s.decode,s.encode))}}),Ed=(e,t,s)=>Ec(new Er(new Es(e.ast,!0,!0,{},void 0),new En(t.ast,!1,!0,{},void 0),e=>e3(s.decode(e)),nM(s.encode))),Eh=(e,t,s)=>Ec(new Er(new Es(e.ast,!0,!0,{},void 0),new En(t.ast,!0,!0,{},void 0),s.decode,s.encode)),Em=(e,t)=>{let s=t?.exact,n=t?.default,i=t?.nullable,r=t?.as=="Option",a=t?.onNoneEncoding?nO(t.onNoneEncoding):x;return s?n?i?Ep(Ed(k2(e),kA(e),{decode:nk({onNone:n,onSome:e=>null===e?n():e}),encode:e3}),n).ast:Ep(Ed(e,kA(e),{decode:nk({onNone:n,onSome:x}),encode:e3}),n).ast:r?i?Ed(k2(e),OK(kA(e)),{decode:nj(P),encode:a}).ast:Ed(e,OK(kA(e)),{decode:x,encode:x}).ast:i?Eh(k2(e),kA(e),{decode:nj(P),encode:x}).ast:new Et(e.ast,!0,!0,{},void 0):n?i?Ep(Ed(k3(e),kA(e),{decode:nk({onNone:n,onSome:e=>null==e?n():e}),encode:e3}),n).ast:Ep(Ed(k5(e),kA(e),{decode:nk({onNone:n,onSome:e=>void 0===e?n():e}),encode:e3}),n).ast:r?i?Ed(k3(e),OK(kA(e)),{decode:nj(e=>null!=e),encode:a}).ast:Ed(k5(e),OK(kA(e)),{decode:nj(L),encode:a}).ast:i?Eh(k3(e),k5(kA(e)),{decode:nj(P),encode:x}).ast:new Et(k5(e).ast,!0,!0,{},void 0)},Ef=b(e=>kM(e[0]),(e,t)=>new Eu(Em(e,t),e)),Eg=e=>q(e,Eo),Eb=(e,t)=>{let s=dW(e),n=[];if(s.length>0){let i=[],r=[],a=[];for(let t=0;t<s.length;t++){let o=s[t],l=e[o];if(Eg(l)){let e=l.ast;switch(e._tag){case"PropertySignatureDeclaration":{let t=e.type,s=e.isOptional,a=e.annotations;i.push(new mi(o,t,s,!0)),r.push(new mi(o,mL(t),s,!0,a)),n.push(new mi(o,t,s,!0,a));break}case"PropertySignatureTransformation":{let t=e.from.fromKey??o;i.push(new mi(t,e.from.type,e.from.isOptional,!0,e.from.annotations)),r.push(new mi(o,e.to.type,e.to.isOptional,!0,e.to.annotations)),a.push(new mI(t,o,e.decode,e.encode))}}}else i.push(new mi(o,l.ast,!1,!0)),r.push(new mi(o,mL(l.ast),!1,!0)),n.push(new mi(o,l.ast,!1,!0))}if(nX(a)){let e=[],s=[];for(let n of t){let{indexSignatures:t,propertySignatures:a}=mF(n.key.ast,n.value.ast);a.forEach(e=>{i.push(e),r.push(new mi(e.name,mL(e.type),e.isOptional,e.isReadonly,e.annotations))}),t.forEach(t=>{e.push(t),s.push(new ma(t.parameter,mL(t.type),t.isReadonly))})}return new mk(new mo(i,e,{[ha]:"Struct (Encoded side)"}),new mo(r,s,{[ha]:"Struct (Type side)"}),new mR(a))}}let i=[];for(let e of t){let{indexSignatures:t,propertySignatures:s}=mF(e.key.ast,e.value.ast);s.forEach(e=>n.push(e)),t.forEach(e=>i.push(e))}return new mo(n,i)},Ex=(e,t)=>{for(let s of dW(e)){let n=e[s];if(void 0===t[s]&&Eg(n)){let e=n.ast,i="PropertySignatureDeclaration"===e._tag?e.defaultValue:e.to.defaultValue;void 0!==i&&(t[s]=i())}}return t},Ey=(e,t,s=Eb(e,t))=>class extends kE(s){static annotations(e){return Ey(this.fields,this.records,kI(this.ast,e))}static fields={...e};static records=[...t];static make=(t,s)=>{let n=Ex(e,{...t});return O4(s)?n:ka(this)(n)}};function Ev(e,...t){return Ey(e,t)}let E_=(e,t,s)=>class extends Ey({},[{key:e,value:t}],s){static annotations(s){return E_(e,t,kI(this.ast,s))}static key=e;static value=t},Ew=(e,t)=>E_(e,t),ES=(e,t,s)=>{if(mc(e)&&mc(t)){let n=[...e.propertySignatures];for(let e of t.propertySignatures){let t=e.name,i=n.findIndex(e=>e.name===t);if(-1===i)n.push(e);else{let{isOptional:r,type:a}=n[i];n[i]=new mi(t,EO(a,e.type,s.concat(t)),r,!0)}}return new mo(n,e.indexSignatures.concat(t.indexSignatures))}throw Error(d3(e,t,s))},Ek=(p=[hn,hu],e=>{let t;for(let s of p)Object.prototype.hasOwnProperty.call(e.annotations,s)&&(void 0===t&&(t={}),t[s]=e.annotations[s]);return t}),EE=(e,t)=>t.map(t=>new m_(t,e.filter,Ek(e))),EO=(e,t,s)=>mf.make(EI([e],[t],s)),ET=e=>mx(e)?e.types:[e],EI=(e,t,s)=>ig(e,e=>ig(t,t=>{switch(e._tag){case"Union":return EI(e.types,ET(t),s);case"Suspend":return[new mv(()=>EO(e.f(),t,s))];case"Refinement":return EE(e,EI(ET(e.from),ET(t),s));case"TypeLiteral":switch(t._tag){case"Union":return EI([e],t.types,s);case"Suspend":return[new mv(()=>EO(e,t.f(),s))];case"Refinement":return EE(t,EI([e],ET(t.from),s));case"TypeLiteral":return[ES(e,t,s)];case"Transformation":if(mN(t.transformation))return[new mk(ES(e,t.from,s),ES(mL(e),t.to,s),new mR(t.transformation.propertySignatureTransformations))]}break;case"Transformation":if(mN(e.transformation))switch(t._tag){case"TypeLiteral":return[new mk(ES(e.from,t,s),ES(e.to,mL(t),s),new mR(e.transformation.propertySignatureTransformations))];case"Transformation":if(mN(t.transformation))return[new mk(ES(e.from,t.from,s),ES(e.to,t.to,s),new mR(e.transformation.propertySignatureTransformations.concat(t.transformation.propertySignatureTransformations)))]}}throw Error(d3(e,t,s))})),ER=b(2,(e,t)=>kE(EO(e.ast,t.ast,[]))),EN=e=>kE(new mv(()=>e().ast)),EA=Symbol.for("@effect/schema/refine"),EC=(e,t,s)=>class extends kE(s){static annotations(e){return EC(this.from,this.filter,kI(this.ast,e))}static [EA]=e;static from=e;static filter=t;static make=(e,t)=>O4(t)?e:ka(this)(e)},EM=(e,t,s)=>{if(A(e))return e?nS():e3(new SQ(t,s));if(R(e))return e3(new SQ(t,s,e));if(void 0!==e){if("_tag"in e)return e3(e);let n=new SQ(t,s,e.message);return e3(nX(e.path)?new SK(e.path,s,n):n)}return nS()},EF=(e,t,s)=>{if(dZ(e))return EM(e,t,s);if(nX(e)){let n=ix(e,e=>EM(e,t,s));if(nX(n))return e3(1===n.length?n[0]:new SW(t,s,n))}return nS()};function Ej(e,t){return s=>{function n(t,s,n){return EF(e(t,s,n),n,t)}let i=new m_(s.ast,n,kT(t));return EC(s,n,i)}}let EL=(e,t,s)=>class extends kE(s){static annotations(e){return EL(this.from,this.to,kI(this.ast,e))}static from=e;static to=t},EP=b(e=>kM(e[0])&&kM(e[1]),(e,t,s)=>EL(e,t,new mk(e.ast,t.ast,new mO(s.decode,s.encode)))),EU=b(e=>kM(e[0])&&kM(e[1]),(e,t,s)=>EP(e,t,{decode:e=>S2(s.decode(e)),encode:e=>S2(s.encode(e))})),ED=Symbol.for("@effect/schema/TypeId/Trimmed"),E$=e=>t=>t.pipe(Ej(e=>e===e.trim(),{typeId:ED,description:"a string with no leading or trailing whitespace",jsonSchema:{pattern:"^\\S[\\s\\S]*\\S$|^\\S$|^$"},...e})),Eq=(e,t)=>s=>s.pipe(Ej(t=>t.length>=e,{typeId:m5,description:`a string at least ${e} character(s) long`,jsonSchema:{minLength:e},...t})),Ez=Symbol.for("@effect/schema/TypeId/Pattern"),EB=(e,t)=>s=>{let n=e.source;return s.pipe(Ej(t=>(e.lastIndex=0,e.test(t)),{typeId:{id:Ez,annotation:{regex:e}},description:`a string matching the pattern ${n}`,jsonSchema:{pattern:n},arbitrary:()=>t=>t.stringMatching(e),...t}))},EJ=Symbol.for("@effect/schema/TypeId/Lowercased"),EK=e=>t=>t.pipe(Ej(e=>e===e.toLowerCase(),{typeId:EJ,description:"a lowercase string",...e}));class EH extends kG.pipe(EK({identifier:"Lowercased",title:"Lowercased"})){static annotations=super.annotations}let EV=Symbol.for("@effect/schema/TypeId/Uppercased"),EW=e=>t=>t.pipe(Ej(e=>e===e.toUpperCase(),{typeId:EV,description:"an uppercase string",...e}));class EG extends kG.pipe(EW({identifier:"Uppercased",title:"Uppercased"})){static annotations=super.annotations}let EY=(e,t)=>s=>{let n=$(e)?Math.max(0,Math.floor(e.min)):Math.max(0,Math.floor(e)),i=$(e)?Math.max(n,Math.floor(e.max)):n;return n!==i?s.pipe(Ej(e=>e.length>=n&&e.length<=i,{typeId:m3,description:`a string at least ${n} character(s) and at most ${i} character(s) long`,jsonSchema:{minLength:n,maxLength:i},...t})):s.pipe(Ej(e=>e.length===n,{typeId:m3,description:1===n?"a single character":`a string ${n} character(s) long`,jsonSchema:{minLength:n,maxLength:n},...t}))};class EQ extends kG.pipe(EY(1,{identifier:"Char"})){static annotations=super.annotations}let EX=e=>Eq(1,{description:"a non empty string",...e});class EZ extends EU(kG,EH,{decode:e=>e.toLowerCase(),encode:x}).annotations({identifier:"Lowercase"}){static annotations=super.annotations}class E0 extends EU(kG,EG,{decode:e=>e.toUpperCase(),encode:x}).annotations({identifier:"Uppercase"}){static annotations=super.annotations}class E1 extends kG.pipe(E$({identifier:"Trimmed",title:"Trimmed"})){static annotations=super.annotations}class E2 extends EU(kG,E1,{decode:e=>e.trim(),encode:x}).annotations({identifier:"Trim"}){static annotations=super.annotations}class E5 extends kG.pipe(EX({identifier:"NonEmpty",title:"NonEmpty"})){static annotations=super.annotations}let E3=Symbol.for("@effect/schema/TypeId/UUID"),E4=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;class E8 extends kG.pipe(EB(E4,{typeId:E3,identifier:"UUID",title:"UUID",description:"a Universally Unique Identifier",arbitrary:()=>e=>e.uuid()})){static annotations=super.annotations}let E6=Symbol.for("@effect/schema/TypeId/ULID"),E7=/^[0-7][0-9A-HJKMNP-TV-Z]{25}$/i;class E9 extends kG.pipe(EB(E7,{typeId:E6,identifier:"ULID",title:"ULID",description:"a Universally Unique Lexicographically Sortable Identifier",arbitrary:()=>e=>e.ulid()})){static annotations=super.annotations}let Oe=Symbol.for("@effect/schema/TypeId/Finite"),Ot=e=>t=>t.pipe(Ej(e=>Number.isFinite(e),{typeId:Oe,description:"a finite number",...e})),Os=(e,t)=>s=>s.pipe(Ej(t=>t>e,{typeId:mX,description:0===e?"a positive number":`a number greater than ${e}`,jsonSchema:{exclusiveMinimum:e},...t})),On=(e,t)=>s=>s.pipe(Ej(t=>t>=e,{typeId:mZ,description:0===e?"a non-negative number":`a number greater than or equal to ${e}`,jsonSchema:{minimum:e},...t})),Oi=e=>t=>t.pipe(Ej(e=>Number.isSafeInteger(e),{typeId:m2,title:"integer",description:"an integer",jsonSchema:{type:"integer"},...e})),Or=(e,t)=>s=>s.pipe(Ej(t=>t<e,{typeId:m0,description:0===e?"a negative number":`a number less than ${e}`,jsonSchema:{exclusiveMaximum:e},...t})),Oa=(e,t)=>s=>s.pipe(Ej(t=>t<=e,{typeId:m1,description:0===e?"a non-positive number":`a number less than or equal to ${e}`,jsonSchema:{maximum:e},...t})),Oo=Symbol.for("@effect/schema/TypeId/NonNaN"),Ol=e=>t=>t.pipe(Ej(e=>!Number.isNaN(e),{typeId:Oo,description:"a number excluding NaN",...e})),Oc=e=>Os(0,e),Ou=e=>Or(0,e),Op=e=>Oa(0,e),Od=e=>On(0,e),Oh=e=>EP(e,kY,{strict:!1,decode:(e,t,s)=>S3(dA(e),()=>new SQ(s,e)),encode:e=>S2(String(e))});class Om extends Oh(kG).annotations({identifier:"NumberFromString"}){static annotations=super.annotations}class Of extends kY.pipe(Ot({identifier:"Finite",title:"Finite"})){static annotations=super.annotations}class Og extends kY.pipe(Oi({identifier:"Int",title:"Int"})){static annotations=super.annotations}class Ob extends kY.pipe(Ol({identifier:"NonNaN",title:"NonNaN"})){static annotations=super.annotations}class Ox extends kY.pipe(Oc({identifier:"Positive",title:"Positive"})){static annotations=super.annotations}class Oy extends kY.pipe(Ou({identifier:"Negative",title:"Negative"})){static annotations=super.annotations}class Ov extends kY.pipe(Op({identifier:"NonPositive",title:"NonPositive"})){static annotations=super.annotations}class O_ extends kY.pipe(Od({identifier:"NonNegative",title:"NonNegative"})){static annotations=super.annotations}let Ow=Symbol.for("@effect/schema/TypeId/JsonNumber");class OS extends kY.pipe(Ej(e=>!Number.isNaN(e)&&Number.isFinite(e),{typeId:Ow,identifier:"JsonNumber",title:"JSON-compatible number",description:"a JSON-compatible number, excluding NaN, +Infinity, and -Infinity",jsonSchema:{type:"number"}})){static annotations=super.annotations}class Ok extends EU(kQ,kQ,{decode:iB,encode:iB}){static annotations=super.annotations}class OE extends EU(kG,kW,{strict:!1,decode:e=>Symbol.for(e),encode:e=>e.description}).annotations({identifier:"symbol"}){static annotations=super.annotations}class OO extends EP(kG,kV,{decode:(e,t,s)=>S3(iq(e),()=>new SQ(s,e)),encode:e=>S2(String(e))}).annotations({identifier:"bigint"}){static annotations=super.annotations}class OT extends EP(kY,kV,{decode:(e,t,s)=>S3(iz(e),()=>new SQ(s,e)),encode:(e,t,s)=>S3(i$(e),()=>new SQ(s,e))}).annotations({identifier:"BigintFromNumber"}){static annotations=super.annotations}let OI=(e,t,s,n)=>S9(e,{onFailure:e=>new SW(s,n,e),onSuccess:t});class OR extends k$(dt,{identifier:"DurationFromSelf",pretty:()=>String,arbitrary:()=>e=>e.oneof(e.constant(dn),e.bigUint().map(e=>di(e)),e.bigUint().map(e=>dr(e)),e.maxSafeNat().map(e=>da(e)),e.maxSafeNat().map(e=>dl(e)),e.maxSafeNat().map(e=>dc(e)),e.maxSafeNat().map(e=>du(e)),e.maxSafeNat().map(e=>dp(e)),e.maxSafeNat().map(e=>dd(e))),equivalence:()=>dy}){static annotations=super.annotations}class ON extends EP(kV,OR,{decode:e=>S2(di(e)),encode:(e,t,s)=>nk(dm(e),{onNone:()=>S5(new SQ(s,e)),onSome:e=>S2(e)})}).annotations({identifier:"DurationFromNanos"}){static annotations=super.annotations}class OA extends EU(kY,OR,{decode:e=>da(e),encode:e=>dh(e)}).annotations({identifier:"DurationFromMillis"}){static annotations=super.annotations}let OC=function(...e){return Array.isArray(e[0])?k6(e[0],e.slice(1)):k6(e,[])}(O_.pipe(Ot({[ha]:"seconds",[ho]:"seconds"})),O_.pipe(Ot({[ha]:"nanos",[ho]:"nanos"})));class OM extends EU(OC,OR,{decode:([e,t])=>di(BigInt(e)*BigInt(1e9)+BigInt(t)),encode:e=>dg(e)}).annotations({identifier:"Duration"}){static annotations=super.annotations}let OF=Symbol.for("@effect/schema/TypeId/ValidDate"),Oj=e=>t=>t.pipe(Ej(e=>!Number.isNaN(e.getTime()),{typeId:OF,description:"a valid Date",...e}));class OL extends k$(K,{identifier:"DateFromSelf",description:"a potentially invalid Date instance",pretty:()=>e=>`new Date(${JSON.stringify(e)})`,arbitrary:()=>e=>e.date({noInvalidDate:!1}),equivalence:()=>nv}){static annotations=super.annotations}class OP extends OL.pipe(Oj({identifier:"ValidDateFromSelf",description:"a valid Date instance"})){static annotations=super.annotations}class OU extends EU(kG,OL,{decode:e=>new Date(e),encode:e=>e.toISOString()}).annotations({identifier:"DateFromString"}){static annotations=super.annotations}class OD extends OU.pipe(Oj({identifier:"Date"})){static annotations=super.annotations}class O$ extends EU(kY,OL,{decode:e=>new Date(e),encode:e=>e.getTime()}).annotations({identifier:"DateFromNumber"}){static annotations=super.annotations}let Oq=e=>"None"===e._tag?nS():e3(e.value),Oz=e=>t=>t.oneof(t.record({_tag:t.constant("None")}),t.record({_tag:t.constant("Some"),value:e(t)})).map(Oq),OB=e=>nk({onNone:()=>"none()",onSome:t=>`some(${e(t)})`}),OJ=e=>(t,s,n)=>e0(t)?e1(t)?S2(nS()):OI(e(t.value,s),e3,n,t):S5(new SQ(n,t)),OK=e=>k$([e],{decode:e=>OJ(ki(e)),encode:e=>OJ(kr(e))},{description:`Option<${kR(e)}>`,pretty:OB,arbitrary:Oz,equivalence:nL}),OH=()=>e=>`BigDecimal(${iU(iC(e))})`,OV=()=>e=>e.tuple(e.bigInt(),e.integer()).map(([e,t])=>iT(e,t));class OW extends k$(iO,{identifier:"BigDecimalFromSelf",pretty:OH,arbitrary:OV,equivalence:()=>iF}){static annotations=super.annotations}class OG extends EP(kG,OW,{decode:(e,t,s)=>iP(e).pipe(nk({onNone:()=>S5(new SQ(s,e)),onSome:e=>S2(iC(e))})),encode:e=>S2(iU(iC(e)))}).annotations({identifier:"BigDecimal"}){static annotations=super.annotations}class OY extends EP(kY,OW,{decode:e=>S2(iL(e)),encode:e=>S2(iD(e))}).annotations({identifier:"BigDecimalFromNumber"}){static annotations=super.annotations}let OQ=e=>kM(e)||Eg(e),OX=e=>dW(e).every(t=>OQ(e[t])),OZ=e=>"fields"in e?e.fields:OZ(e[EA]),O0=e=>OX(e)?Ev(e):kM(e)?e:Ev(OZ(e)),O1=e=>OX(e)?e:OZ(e),O2=e=>(t,s)=>O8({kind:"Class",identifier:e,schema:O0(t),fields:O1(t),Base:a1,annotations:s}),O5=(e,t)=>{let s={...e};for(let n of dW(t)){if(n in e)throw Error(ht(n));s[n]=t[n]}return s},O3=(e,t)=>e1(h_(e.ast))?e.annotations({title:t}):e,O4=e=>A(e)?e:e?.disableValidation??!1,O8=({Base:e,annotations:t,fields:s,identifier:n,kind:i,schema:r,toStringOverride:a})=>{let o=Symbol.for(`@effect/schema/${i}/${n}`),l=O3(r,`${n} (Constructor)`),c=O3(r,`${n} (Encoded side)`),u=O3(kA(r),`${n} (Type side)`),p=e=>q(e,o)&&ko(u)(e);return class extends e{constructor(e={},t=!1){e={...e},"Class"!==i&&delete e._tag,e=Ex(s,e),O4(t)||(e=ka(l)(e)),super(e,!0)}static [kk]=kO;static get ast(){return EU(c,k$([u],{decode:()=>(e,t,s)=>e instanceof this||p(e)?S2(e):S5(new SQ(s,e)),encode:()=>(e,t)=>e instanceof this?S2(e):S8(kr(u)(e,t),e=>new this(e,!0))},{identifier:n,title:n,description:`an instance of ${n}`,pretty:e=>t=>`${n}(${e(t)})`,arbitrary:e=>t=>e(t).map(e=>new this(e)),equivalence:x,[hg]:u.ast,...t}),{decode:e=>new this(e,!0),encode:x}).annotations({[hg]:r.ast}).ast}static pipe(){return eT(this,arguments)}static annotations(e){return kE(this.ast).annotations(e)}static toString(){return`(${String(c)} <-> ${n})`}static make(...e){return new this(...e)}static fields={...s};static identifier=n;static extend(e){return(t,n)=>{let a=O1(t),o=O0(t),l=O5(s,a);return O8({kind:i,identifier:e,schema:ER(r,o),fields:l,Base:this,annotations:n})}}static transformOrFail(e){return(t,n,a)=>{let o=O5(s,t);return O8({kind:i,identifier:e,schema:EP(r,kA(Ev(o)),n),fields:o,Base:this,annotations:a})}}static transformOrFailFrom(e){return(t,n,a)=>{let o=O5(s,t);return O8({kind:i,identifier:e,schema:EP(kN(r),Ev(o),n),fields:o,Base:this,annotations:a})}}get[o](){return o}toString(){if(void 0!==a){let e=a(this);if(void 0!==e)return e}return`${n}({ ${dW(s).map(e=>`${dQ(e)}: ${dY(this[e])}`).join(", ")} })`}}},O6=k1(Ev({_tag:kL("None")}).annotations({identifier:"FiberIdNoneEncoded"}),Ev({_tag:kL("Runtime"),id:Og.annotations({title:"id",description:"id"}),startTimeMillis:Og.annotations({title:"startTimeMillis",description:"startTimeMillis"})}).annotations({identifier:"FiberIdRuntimeEncoded"}),Ev({_tag:kL("Composite"),left:EN(()=>O6),right:EN(()=>O6)}).annotations({identifier:"FiberIdCompositeEncoded"})).annotations({identifier:"FiberIdEncoded"}),O7=e=>e.letrec(t=>({None:e.record({_tag:e.constant("None")}),Runtime:e.record({_tag:e.constant("Runtime"),id:e.integer(),startTimeMillis:e.integer()}),Composite:e.record({_tag:e.constant("Composite"),left:t("FiberId"),right:t("FiberId")}),FiberId:e.oneof(t("None"),t("Runtime"),t("Composite"))})).FiberId.map(Tt),O9=e=>{switch(e._tag){case"None":return"FiberId.none";case"Runtime":return`FiberId.runtime(${e.id}, ${e.startTimeMillis})`;case"Composite":return`FiberId.composite(${O9(e.right)}, ${O9(e.left)})`}};class Te extends k$(aN,{identifier:"FiberIdFromSelf",pretty:()=>O9,arbitrary:()=>O7}){static annotations=super.annotations}let Tt=e=>{switch(e._tag){case"None":return aT;case"Runtime":return aI(e.id,e.startTimeMillis);case"Composite":return aR(Tt(e.left),Tt(e.right))}},Ts=e=>{switch(e._tag){case"None":return{_tag:"None"};case"Runtime":return{_tag:"Runtime",id:e.id,startTimeMillis:e.startTimeMillis};case"Composite":return{_tag:"Composite",left:Ts(e.left),right:Ts(e.right)}}};class Tn extends EU(O6,Te,{decode:Tt,encode:Ts}).annotations({identifier:"FiberId"}){static annotations=super.annotations}class Ti extends EU(kK,kQ,{decode:I,encode:x}).annotations({identifier:"BooleanFromUnknown"}){static annotations=super.annotations}let Tr=(e,t=2)=>{let s=p8(e);return _L(_q(we,e=>dv(s,Math.pow(t,e))))},Ta=e=>_N(we,()=>e),To={silent:Number.NEGATIVE_INFINITY,fatal:0,error:0,warn:1,log:2,info:3,success:3,fail:3,ready:3,start:3,box:3,debug:4,trace:5,verbose:Number.POSITIVE_INFINITY},Tl={silent:{level:-1},fatal:{level:To.fatal},error:{level:To.error},warn:{level:To.warn},log:{level:To.log},info:{level:To.info},success:{level:To.success},fail:{level:To.fail},ready:{level:To.info},start:{level:To.info},box:{level:To.info},debug:{level:To.debug},trace:{level:To.trace},verbose:{level:To.verbose}};function Tc(e){return null!==e&&"object"==typeof e}let Tu=(...e)=>e.reduce((e,t)=>(function e(t,s,n=".",i){if(!Tc(s))return e(t,{},n,i);let r=Object.assign({},s);for(let s in t){if("__proto__"===s||"constructor"===s)continue;let a=t[s];null==a||i&&i(r,s,a,n)||(Array.isArray(a)&&Array.isArray(r[s])?r[s]=[...a,...r[s]]:Tc(a)&&Tc(r[s])?r[s]=e(a,r[s],(n?`${n}.`:"")+s.toString(),i):r[s]=a)}return r})(e,t,"",void 0),{}),Tp=!1,Td=[];class Th{constructor(e={}){let t=e.types||Tl;for(let s in this.options=Tu({...e,defaults:{...e.defaults},level:Tm(e.level,t),reporters:[...e.reporters||[]]},{types:Tl,throttle:1e3,throttleMin:5,formatOptions:{date:!0,colors:!1,compact:!0}}),t){let e={type:s,...this.options.defaults,...t[s]};this[s]=this._wrapLogFn(e),this[s].raw=this._wrapLogFn(e,!0)}this.options.mockFn&&this.mockTypes(),this._lastLog={}}get level(){return this.options.level}set level(e){this.options.level=Tm(e,this.options.types,this.options.level)}prompt(e,t){if(!this.options.prompt)throw Error("prompt is not supported!");return this.options.prompt(e,t)}create(e){let t=new Th({...this.options,...e});return this._mockFn&&t.mockTypes(this._mockFn),t}withDefaults(e){return this.create({...this.options,defaults:{...this.options.defaults,...e}})}withTag(e){return this.withDefaults({tag:this.options.defaults.tag?this.options.defaults.tag+":"+e:e})}addReporter(e){return this.options.reporters.push(e),this}removeReporter(e){if(e){let t=this.options.reporters.indexOf(e);if(t>=0)return this.options.reporters.splice(t,1)}else this.options.reporters.splice(0);return this}setReporters(e){return this.options.reporters=Array.isArray(e)?e:[e],this}wrapAll(){this.wrapConsole(),this.wrapStd()}restoreAll(){this.restoreConsole(),this.restoreStd()}wrapConsole(){for(let e in this.options.types)console["__"+e]||(console["__"+e]=console[e]),console[e]=this[e].raw}restoreConsole(){for(let e in this.options.types)console["__"+e]&&(console[e]=console["__"+e],delete console["__"+e])}wrapStd(){this._wrapStream(this.options.stdout,"log"),this._wrapStream(this.options.stderr,"log")}_wrapStream(e,t){e&&(e.__write||(e.__write=e.write),e.write=e=>{this[t].raw(String(e).trim())})}restoreStd(){this._restoreStream(this.options.stdout),this._restoreStream(this.options.stderr)}_restoreStream(e){e&&e.__write&&(e.write=e.__write,delete e.__write)}pauseLogs(){Tp=!0}resumeLogs(){for(let e of(Tp=!1,Td.splice(0)))e[0]._logFn(e[1],e[2])}mockTypes(e){let t=e||this.options.mockFn;if(this._mockFn=t,"function"==typeof t)for(let e in this.options.types)this[e]=t(e,this.options.types[e])||this[e],this[e].raw=this[e]}_wrapLogFn(e,t){return(...s)=>{if(Tp){Td.push([this,e,s,t]);return}return this._logFn(e,s,t)}}_logFn(e,t,s){var n,i;if((e.level||0)>this.level)return!1;let r={date:new Date,args:[],...e,level:Tm(e.level,this.options.types)};s||1!==t.length||((i=n=t[0],"[object Object]"===Object.prototype.toString.call(i)&&(n.message||n.args)&&!n.stack)?0:1)?r.args=[...t]:Object.assign(r,t[0]),r.message&&(r.args.unshift(r.message),delete r.message),r.additional&&(Array.isArray(r.additional)||(r.additional=r.additional.split("\n")),r.args.push("\n"+r.additional.join("\n")),delete r.additional),r.type="string"==typeof r.type?r.type.toLowerCase():"log",r.tag="string"==typeof r.tag?r.tag:"";let a=(e=!1)=>{let t=(this._lastLog.count||0)-this.options.throttleMin;if(this._lastLog.object&&t>0){let e=[...this._lastLog.object.args];t>1&&e.push(`(repeated ${t} times)`),this._log({...this._lastLog.object,args:e}),this._lastLog.count=1}e&&(this._lastLog.object=r,this._log(r))};clearTimeout(this._lastLog.timeout);let o=this._lastLog.time&&r.date?r.date.getTime()-this._lastLog.time.getTime():0;if(this._lastLog.time=r.date,o<this.options.throttle)try{let e=JSON.stringify([r.type,r.tag,r.args]),t=this._lastLog.serialized===e;if(this._lastLog.serialized=e,t&&(this._lastLog.count=(this._lastLog.count||0)+1,this._lastLog.count>this.options.throttleMin)){this._lastLog.timeout=setTimeout(a,this.options.throttle);return}}catch{}a(!0)}_log(e){for(let t of this.options.reporters)t.log(e,{options:this.options})}}function Tm(e,t={},s=3){return void 0===e?s:"number"==typeof e?e:t[e]&&void 0!==t[e].level?t[e].level:s}Th.prototype.add=Th.prototype.addReporter,Th.prototype.remove=Th.prototype.removeReporter,Th.prototype.clear=Th.prototype.removeReporter,Th.prototype.withScope=Th.prototype.withTag,Th.prototype.mock=Th.prototype.mockTypes,Th.prototype.pause=Th.prototype.pauseLogs,Th.prototype.resume=Th.prototype.resumeLogs;let Tf=b(2,(e,t)=>uU(vd,t)(e)),Tg=e=>wV(vH(vg,r3(e))),Tb=e=>wV(vH(vg,r4(e))),Tx=b(2,(e,t)=>wq(Tb(e),()=>Tg(t))),Ty=Symbol("uploadthing-custom-id-symbol"),Tv=["upload","failure","multipart-complete"],T_=e=>"string"==typeof e&&Tv.includes(e),Tw=["callback"],TS=e=>"string"==typeof e&&Tw.includes(e);var Tk="6.13.2";let TE=kL("inline","attachment");kL("public-read","private");class TO extends O2("FileUploadData")({name:kG,size:kY,type:kG}){}class TT extends TO.extend("FileUploadDataWithCustomId")({customId:k2(kG)}){}class TI extends TT.extend("UploadedFileData")({key:kG,url:kG}){}class TR extends O2("PresignedBaseSchema")({key:kG,fileName:kG,fileType:kG,fileUrl:kG,pollingJwt:kG,pollingUrl:kG,contentDisposition:TE,customId:k2(kG)}){}class TN extends TR.extend("MPUResponseSchema")({urls:k9(kG),uploadId:kG,chunkSize:kY,chunkCount:kY}){}class TA extends TR.extend("PSPResponseSchema")({url:kG,fields:Ew(kG,kG)}){}let TC=k9(k1(TA,TN));class TM extends O2("PollUploadResponse")({status:kG,fileData:Ef(Ev({fileKey:k2(kG),fileName:kG,fileSize:kY,fileType:kG,metadata:k2(kG),customId:k2(kG),callbackUrl:Ef(kG),callbackSlug:Ef(kG)}))}){}class TF extends O2("FailureCallbackResponse")({success:kQ,message:Ef(kG)}){}class Tj extends O2("ServerCallbackPostResponse")({status:kG}){}class TL extends O2("UploadActionPayload")({files:k9(TO),input:kK}){}class TP extends O2("FailureActionPayload")({fileKey:kG,uploadId:k2(kG),storageProviderError:Ef(kG),fileName:kG}){}class TU extends O2("MultipartCompleteActionPayload")({fileKey:kG,uploadId:kG,etags:k9(Ev({tag:kG,partNumber:kY}))}){}let TD=e=>!!(e.ok&&!(e.status>=400)&&e.headers.has("x-uploadthing-version")),T$=(e,t)=>S_(function*(){let s=yield*nu(ne(`/api/pollUpload/${e}`)).pipe(cW(np),cW(kC(TM)),cW(e=>"done"===e.status&&e.fileData?ui(e.fileData):cq(new s5)),_3({while:e=>e instanceof s5,schedule:Tr(10,4).pipe(_K(Ta(1e3)),_F(_9),_G(dw(dc(1))))}),bg("RetryError",()=>new nl({code:"UPLOAD_FAILED",message:"File took too long to upload"}))),n=s.callbackUrl+`?slug=${s.callbackSlug}`;n.startsWith("http")||(n="http://"+n),yield*bw("SIMULATING FILE UPLOAD WEBHOOK CALLBACK",n);let i=JSON.stringify({status:"uploaded",metadata:JSON.parse(s.metadata??"{}"),file:new TI({url:`https://utfs.io/f/${encodeURIComponent(e)}`,key:e,name:s.fileName,size:s.fileSize,customId:s.customId,type:s.fileType})}),r=yield*bC({try:()=>nf(i,t),catch:e=>new nl({code:"INTERNAL_SERVER_ERROR",message:"Failed to sign payload",cause:e})});return TD((yield*nu(n,{method:"POST",body:i,headers:{"Content-Type":"application/json","uploadthing-hook":"callback","x-uploadthing-signature":r}}).pipe(bg("FetchError",()=>ui(new Response(null,{status:500}))))))?yield*bw("Successfully simulated callback for file",e):yield*bk(`
Failed to simulate callback for file '${s.fileKey}'. Is your webhook configured correctly?
  - Make sure the URL '${n}' is accessible without any authentication. You can verify this by running 'curl -X POST ${n}' in your terminal
  - Still facing issues? Read https://docs.uploadthing.com/faq for common issues
`.trim()),s}),Tq=(e,t)=>{switch(t){case"error":case"fatal":return`\x1b[41m\x1b[30m${e}\x1b[0m`;case"warn":return`\x1b[43m\x1b[30m${e}\x1b[0m`;case"info":case"log":return`\x1b[44m\x1b[30m${e}\x1b[0m`;case"debug":case"trace":return`\x1b[47m\x1b[30m${e}\x1b[0m`;case"success":return`\x1b[42m\x1b[30m${e}\x1b[0m`;default:return e}},Tz={fatal:"",error:"",warn:"",info:"",log:"",debug:"",trace:"",success:""},TB=function(e={}){return new Th(e)}({reporters:[{log:e=>{let{type:t,tag:s,date:n,args:i}=e,r=Tz[t],a=Tq(` ${r} ${s} ${n.toLocaleTimeString()} `,t);console.log(i.map(e=>nr(e)&&"string"==typeof e.stack?e.message+"\n"+function(e){let t="cwd"in sq&&"function"==typeof sq.cwd?sq.cwd():"__UnknownCWD__";return"  "+e.split("\n").splice(1).map(e=>e.trim().replace("file://","").replace(t+"/","")).join("\n  ")}(e.stack):e).map(e=>"string"==typeof e?e:JSON.stringify(e,null,4)).join(" ").split("\n").map(e=>a+" "+e).join("\n"))}}],defaults:{tag:"UPLOADTHING"}}),TJ={All:"verbose",Fatal:"error",Error:"error",Info:"info",Debug:"debug",Trace:"trace",Warning:"warn",None:"silent"},TK=(e="info")=>(TB.level=To[e],Tf({silent:uT,error:gO,warn:gT,info:uE,debug:uO,trace:gI,verbose:uk}[e])),TH=Tx(vm,b6(({logLevel:e,message:t})=>{TB[TJ[e._tag]](t)})),TV=(e,t)=>nu(ne("/api/completeMultipart"),{method:"POST",body:JSON.stringify({fileKey:e.key,uploadId:e.uploadId,etags:t}),headers:{"Content-Type":"application/json"}}).pipe(cW(np),cW(kC(Ev({success:kQ,message:Ef(kG)}))),Sw("completeMultipartUpload",{attributes:{etags:t,presigned:e}})),TW=e=>nu(ne("/api/failureCallback"),{method:"POST",body:JSON.stringify({fileKey:e.key,uploadId:e.uploadId}),headers:{"Content-Type":"application/json"}}).pipe(cW(np),cW(kC(TF)),Sw("abortMultipartUpload",{attributes:{presigned:e}})),TG=e=>e||(sq.env.UPLOADTHING_SECRET?sq.env.UPLOADTHING_SECRET:void 0);class TY extends pY{constructor(e,t,s){super({reason:`You uploaded a ${e} file that was ${nn(s)}, but the limit for that type is ${t}`}),this._tag="FileSizeMismatch",this.name="FileSizeMismatchError"}}class TQ extends pY{constructor(e,t,s,n){super({reason:`You uploaded ${n} file(s) of type '${e}', but the ${t} for that type is ${s}`}),this._tag="FileCountMismatch",this.name="FileCountMismatchError"}}let TX=(e,t)=>S_(function*(){let s={};for(let n of e){let e=yield*s9(n.name,ni(t));s[e]=(s[e]??0)+1;let i=t[e]?.maxFileSize;if(!i)return yield*new sX(e,"maxFileSize");let r=yield*ns(i);if(n.size>r)return yield*new TY(e,i,n.size)}for(let e in s){let n=t[e];if(!n)return yield*new sX(e);let i=s[e],r=n.minFileCount,a=n.maxFileCount;if(r>a)return yield*new nl({code:"BAD_REQUEST",message:"Invalid config during file count - minFileCount > maxFileCount",cause:`minFileCount must be less than maxFileCount for key ${e}. got: ${r} > ${a}`});if(i<r)return yield*new TQ(e,"minimum",r,i);if(i>a)return yield*new TQ(e,"maximum",a,i)}return null});class TZ extends td("uploadthing/RequestInput")(){}let T0=(e,t,s)=>S_(function*(){let n=yield*cS(e.req)?e.req:ui(e.req),i=new URL(n.url),r=n.headers,a=i.searchParams,o=a.get("actionType"),l=a.get("slug"),c=r.get("uploadthing-hook"),u=r.get("x-uploadthing-package")??"unknown",p=r.get("x-uploadthing-version"),d=TG(t.config?.uploadthingSecret);if(null!=p&&p!==Tk)return yield*bk(`Client version mismatch. Server version: ${Tk}, Client version: ${p}`),yield*new nl({code:"BAD_REQUEST",message:"Client version mismatch",cause:`Server version: ${Tk}, Client version: ${p}`});if(!l)return yield*bk("No slug provided in params:",a),yield*new nl({code:"BAD_REQUEST",message:"No slug provided in params"});if(l&&"string"!=typeof l){let e=`Expected slug to be of type 'string', got '${typeof l}'`;return yield*bk(e),yield*new nl({code:"BAD_REQUEST",message:"`slug` must be a string",cause:e})}if(!d){let e="No secret provided, please set UPLOADTHING_SECRET in your env file or in the config";return yield*bk(e),yield*new nl({code:"MISSING_ENV",message:"No secret provided",cause:e})}if(!d.startsWith("sk_")){let e="Invalid secret provided, UPLOADTHING_SECRET must start with 'sk_'";return yield*bk(e),yield*new nl({code:"MISSING_ENV",message:"Invalid API key. API keys must start with 'sk_'.",cause:e})}if(u&&"string"!=typeof u){let e=`Expected x-uploadthing-package to be of type 'string', got '${typeof u}'`;return yield*bk(e),yield*new nl({code:"BAD_REQUEST",message:"`x-uploadthing-package` must be a string. eg. '@uploadthing/react'",cause:e})}let h=t.router[l];if(!h){let e=`No file route found for slug ${l}`;return yield*bk(e),yield*new nl({code:"NOT_FOUND",message:e})}if(o&&!T_(o)){let e=`Expected ${Tv.map(e=>`"${e}"`).join(", ").replace(/,(?!.*,)/," or")} but got "${o}"`;return yield*bk("Invalid action type",e),yield*new nl({code:"BAD_REQUEST",cause:`Invalid action type ${o}`,message:e})}if(c&&!TS(c)){let e=`Expected ${Tw.map(e=>`"${e}"`).join(", ").replace(/,(?!.*,)/," or")} but got "${c}"`;return yield*bk("Invalid uploadthing hook",e),yield*new nl({code:"BAD_REQUEST",cause:`Invalid uploadthing hook ${c}`,message:e})}if(!o&&!c||o&&c){let e="Exactly one of 'actionType' or 'uploadthing-hook' must be provided";return yield*bk(e),yield*new nl({code:"BAD_REQUEST",message:e})}yield*b_(" All request input is valid");let m=yield*nc;m.baseHeaders["x-uploadthing-api-key"]=d,m.baseHeaders["x-uploadthing-fe-package"]=u,m.baseHeaders["x-uploadthing-be-adapter"]=s;let{isDev:f=sL}=t.config??{};f&&(yield*bw("UploadThing dev server is now running!"));let g={req:n,config:t.config??{},middlewareArgs:e.middlewareArgs,isDev:f,apiKey:d,slug:l,uploadable:h,hook:null,action:null};return o?{...g,action:o}:{...g,hook:c}}),T1=S_(function*(){let{config:e,req:t,isDev:s}=yield*TZ,n=new URL(t.url);if(e?.callbackUrl?n=yield*na(e.callbackUrl):sq.env.UPLOADTHING_URL&&(n=yield*na(sq.env.UPLOADTHING_URL)),s||!n.host.includes("localhost"))return n;let i=t.headers.get("origin")??t.headers.get("referer")??t.headers.get("host")??t.headers.get("x-forwarded-host");return(i&&!i.includes("http")&&(i=(t.headers.get("x-forwarded-proto")??"https")+"://"+i),!i||i.includes("localhost"))?(bS("You are using a localhost callback url in production which is not supported.","Read more and learn how to fix it here: https://docs.uploadthing.com/faq#my-callback-runs-in-development-but-not-in-production"),n):yield*na(i)}),T2=(e,t,s)=>e(t).pipe(TK(s?.logLevel),wQ(TH),bI(nc,{fetch:s?.fetch??globalThis.fetch,baseHeaders:{"x-uploadthing-version":Tk,"x-uploadthing-api-key":void 0,"x-uploadthing-be-adapter":void 0,"x-uploadthing-fe-package":void 0}}),T5,wT),T5=e=>cC(e,e=>ui({success:!1,error:e})),T3=TZ.pipe(cW(({action:e,hook:t})=>{if("callback"===t)return T8;switch(e){case"upload":return T7;case"multipart-complete":return T9;case"failure":return Ie}}),c4(e=>({success:!0,...e}))),T4=(e,t)=>s=>T3.pipe(bR(TZ,T0(s,e,t)),bb({InvalidJson:e=>new nl({code:"INTERNAL_SERVER_ERROR",message:"An error occured while parsing input/output",cause:e}),BadRequestError:e=>new nl({code:"INTERNAL_SERVER_ERROR",message:e.getMessage(),cause:e,data:e.json}),FetchError:e=>new nl({code:"INTERNAL_SERVER_ERROR",message:"string"==typeof e.error?e.error:e.message,cause:e,data:e.error}),ParseError:e=>new nl({code:"INTERNAL_SERVER_ERROR",message:"An error occured while parsing input/output",cause:e})}),bA(e=>bk(e.message))),T8=S_(function*(){let{req:e,uploadable:t,apiKey:s}=yield*TZ,n=yield*bC({try:async()=>ng(await e.clone().text(),e.headers.get("x-uploadthing-signature"),s),catch:()=>new nl({code:"BAD_REQUEST",message:"Invalid signature"})});if(yield*b_("Signature verified:",n),!n)return yield*bk("Invalid signature"),yield*new nl({code:"BAD_REQUEST",message:"Invalid signature"});let i=yield*cV(nd(e),kC(Ev({status:kG,file:TI,metadata:Ew(kG,kK)})));yield*b_("Handling callback request with input:",i);let r=yield*bC({try:async()=>t.resolver({file:i.file,metadata:i.metadata}),catch:e=>new nl({code:"INTERNAL_SERVER_ERROR",message:"Failed to run onUploadComplete",cause:e})}).pipe(bA(e=>bk("Failed to run onUploadComplete. You probably shouldn't be throwing errors here.",e))),a={fileKey:i.file.key,callbackData:r??null};return yield*b_("'onUploadComplete' callback finished. Sending response to UploadThing:",a),yield*nu(ne("/api/serverCallback"),{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).pipe(cW(np),cW(kC(Tj))),{body:null}}),T6=e=>S_(function*(){let{uploadable:t,middlewareArgs:s}=yield*TZ,{files:n,input:i}=e;yield*b_("Running middleware");let r=yield*bC({try:async()=>t._def.middleware({...s,input:i,files:n}),catch:e=>e instanceof nl?e:new nl({code:"INTERNAL_SERVER_ERROR",message:"Failed to run middleware",cause:e})}).pipe(bA(e=>bk("An error occured in your middleware function",e)));if(r[Ty]&&r[Ty].length!==n.length){let e=`Expected files override to have the same length as original files, got ${r[Ty].length} but expected ${n.length}`;return yield*bk(e),yield*new nl({code:"BAD_REQUEST",message:"Files override must have the same length as files",cause:e})}let a=yield*vS(n,(e,t)=>S_(function*(){let s=r[Ty]?.[t];return s&&s.size!==e.size&&(yield*bS("File size mismatch. Reverting to original size")),{name:s?.name??e.name,size:e.size,customId:s?.customId}}));return{metadata:r,filesWithCustomIds:a}}),T7=S_(function*(){let e;let t=yield*TZ,{files:s,input:n}=yield*cV(nd(t.req),kC(TL));yield*b_("Handling upload request with input:",{files:s,input:n}),yield*b_("Parsing user input");let i=t.uploadable._def.inputParser,r=yield*bC({try:async()=>(function(e){if("function"==typeof e.parse)return e.parse;throw Error("Invalid parser")})(i)(n),catch:e=>new nl({code:"BAD_REQUEST",message:"Invalid input",cause:e})}).pipe(bA(e=>bk("An error occured trying to parse input",e)));yield*b_("Input parsed successfully",r);let{metadata:a,filesWithCustomIds:o}=yield*T6({input:r,files:s});yield*b_("Parsing route config",t.uploadable._def.routerConfig);let l=yield*s7(t.uploadable._def.routerConfig).pipe(bg("InvalidRouteConfig",e=>new nl({code:"BAD_REQUEST",message:"Invalid config",cause:e})));yield*b_("Route config parsed successfully",l),yield*b_("Validating files meet the config requirements",s),yield*TX(s,l).pipe(c6(e=>new nl({code:"BAD_REQUEST",message:`Invalid config: ${e._tag}`,cause:"reason"in e?e.reason:e.message})));let c=yield*T1.pipe(bA(e=>bk("Failed to resolve callback URL",e)),bg("InvalidURL",e=>new nl({code:"INTERNAL_SERVER_ERROR",message:e.message})));yield*b_("Retrieving presigned URLs from UploadThing. Callback URL is:",c.href);let u=yield*nu(ne("/api/prepareUpload"),{method:"POST",body:JSON.stringify({files:o,routeConfig:l,metadata:a,callbackUrl:c.origin+c.pathname,callbackSlug:t.slug}),headers:{"Content-Type":"application/json"}}).pipe(cW(np),cW(kC(TC)));if(yield*b_("UploadThing responded with:",u),yield*b_("Sending presigned URLs to client"),t.isDev){let s=yield*nc;e=vS(u,e=>T$(e.key,t.apiKey).pipe(cD),{concurrency:10}).pipe(wQ(TH),bI(nc,s),wT)}return{body:u,cleanup:e}}),T9=S_(function*(){let e=yield*TZ,t=yield*cV(nd(e.req),kC(TU));yield*b_("Handling multipart-complete request with input:",t),yield*b_("Notifying UploadThing that multipart upload is complete");let s=yield*TV({key:t.fileKey,uploadId:t.uploadId},t.etags);return yield*b_("UploadThing responded with:",s),{body:null}}),Ie=S_(function*(){let{req:e,uploadable:t}=yield*TZ,{fileKey:s,uploadId:n}=yield*cV(nd(e),kC(TP));yield*b_("Handling failure request with input:",{fileKey:s,uploadId:n}),yield*b_("Notifying UploadThing that upload failed");let i=yield*TW({key:s,uploadId:n});return yield*b_("UploadThing responded with:",i),yield*b_("Running 'onUploadError' callback"),yield*bf({try:()=>{t._def.onUploadError({error:new nl({code:"UPLOAD_FAILED",message:`Upload failed for ${s}`}),fileKey:s})},catch:e=>new nl({code:"INTERNAL_SERVER_ERROR",message:"Failed to run onUploadError",cause:e})}).pipe(bA(e=>bk("Failed to run onUploadError. You probably shouldn't be throwing errors here.",e))),{body:null}}),It=e=>()=>ni(e.router).map(t=>{let s=wI(s7(e.router[t]._def.routerConfig));return{slug:t,config:s}}),Is=(e,t)=>{!function(){let e,t;if(void 0===sq)return;let s=sq.versions?.node?.split(".");s&&([e,t]=s.map(e=>parseInt(e,10)));let n=sq.env?.NODE;if(!e&&n){let s=/v(\d+)\.(\d+)\.(\d+)/.exec(n)?.[0];s&&([e,t]=s.substring(1).split(".").map(e=>parseInt(e,10)))}e&&t&&!(e>18)&&(18===e&&t>=13||(wI(bk(`YOU ARE USING A LEGACY (${e}.${t}) NODE VERSION WHICH ISN'T OFFICIALLY SUPPORTED. PLEASE UPGRADE TO NODE ^18.13.`)),sq.exit?.(1)))}();let s=T4(e,t),n=It(e);return{GET:e=>Response.json(n(),{headers:{"x-uploadthing-version":Tk}}),POST:async t=>{let n=t instanceof Request?t:t.request,i=await T2(s,{req:n,middlewareArgs:{req:n,event:void 0,res:void 0}},e.config);if(!1===i.success)return Response.json(function(e,t){return(t[Object.keys(t)[0]]?._def.errorFormatter??function(e){return{message:e.message}})(e)}(i.error,e.router),{status:no[i.error.code]??500,headers:{"x-uploadthing-version":Tk}});let r=Response.json(i.body,{headers:{"x-uploadthing-version":Tk}});return r.cleanup=i.cleanup,r}}};function In(e){return{message:e.message}}var Ii={TokenExpired:"token-expired",TokenInvalid:"token-invalid",TokenInvalidAlgorithm:"token-invalid-algorithm",TokenInvalidAuthorizedParties:"token-invalid-authorized-parties",TokenInvalidSignature:"token-invalid-signature",TokenNotActiveYet:"token-not-active-yet",TokenVerificationFailed:"token-verification-failed"},Ir={EnsureClerkJWT:"Make sure that this is a valid Clerk generate JWT."},Ia=class e extends Error{constructor({action:t,message:s,reason:n}){super(s),Object.setPrototypeOf(this,e.prototype),this.reason=n,this.message=s,this.action=t}getFullMessage(){return`${[this.message,this.action].filter(e=>e).join(" ")} (reason=${this.reason}, token-carrier=${this.tokenCarrier})`}},Io=class extends Error{};let Il=require("node:crypto");var Ic=e=>"undefined"!=typeof atob&&"function"==typeof atob?atob(e):"undefined"!=typeof global&&global.Buffer?new global.Buffer(e,"base64").toString():e,Iu=(Object.getOwnPropertyDescriptor,Object.getOwnPropertyNames,Object.prototype.hasOwnProperty,fetch.bind(globalThis)),Ip={crypto:Il.webcrypto,fetch:Iu,AbortController:globalThis.AbortController,Blob:globalThis.Blob,FormData:globalThis.FormData,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response},Id={parse:(e,t)=>(function(e,t,s={}){if(!t.codes){t.codes={};for(let e=0;e<t.chars.length;++e)t.codes[t.chars[e]]=e}if(!s.loose&&e.length*t.bits&7)throw SyntaxError("Invalid padding");let n=e.length;for(;"="===e[n-1];)if(--n,!s.loose&&!((e.length-n)*t.bits&7))throw SyntaxError("Invalid padding");let i=new(s.out??Uint8Array)(n*t.bits/8|0),r=0,a=0,o=0;for(let s=0;s<n;++s){let n=t.codes[e[s]];if(void 0===n)throw SyntaxError("Invalid character "+e[s]);a=a<<t.bits|n,(r+=t.bits)>=8&&(r-=8,i[o++]=255&a>>r)}if(r>=t.bits||255&a<<8-r)throw SyntaxError("Unexpected end of data");return i})(e,Ih,t),stringify:(e,t)=>(function(e,t,s={}){let{pad:n=!0}=s,i=(1<<t.bits)-1,r="",a=0,o=0;for(let s=0;s<e.length;++s)for(o=o<<8|255&e[s],a+=8;a>t.bits;)a-=t.bits,r+=t.chars[i&o>>a];if(a&&(r+=t.chars[i&o<<t.bits-a]),n)for(;r.length*t.bits&7;)r+="=";return r})(e,Ih,t)},Ih={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bits:6},Im={RS256:"SHA-256",RS384:"SHA-384",RS512:"SHA-512"},If="RSASSA-PKCS1-v1_5",Ig={RS256:If,RS384:If,RS512:If},Ib=Object.keys(Im);function Ix(e){let t=Im[e],s=Ig[e];if(!t||!s)throw Error(`Unsupported algorithm ${e}, expected one of ${Ib.join(",")}.`);return{hash:{name:Im[e]},name:Ig[e]}}var Iy=e=>Array.isArray(e)&&e.length>0&&e.every(e=>"string"==typeof e),Iv=(e,t)=>{let s=[t].flat().filter(e=>!!e),n=[e].flat().filter(e=>!!e);if(s.length>0&&n.length>0){if("string"==typeof e){if(!s.includes(e))throw new Ia({action:Ir.EnsureClerkJWT,reason:Ii.TokenVerificationFailed,message:`Invalid JWT audience claim (aud) ${JSON.stringify(e)}. Is not included in "${JSON.stringify(s)}".`})}else if(Iy(e)&&!e.some(e=>s.includes(e)))throw new Ia({action:Ir.EnsureClerkJWT,reason:Ii.TokenVerificationFailed,message:`Invalid JWT audience claim array (aud) ${JSON.stringify(e)}. Is not included in "${JSON.stringify(s)}".`})}},I_=e=>{if(void 0!==e&&"JWT"!==e)throw new Ia({action:Ir.EnsureClerkJWT,reason:Ii.TokenInvalid,message:`Invalid JWT type ${JSON.stringify(e)}. Expected "JWT".`})},Iw=e=>{if(!Ib.includes(e))throw new Ia({action:Ir.EnsureClerkJWT,reason:Ii.TokenInvalidAlgorithm,message:`Invalid JWT algorithm ${JSON.stringify(e)}. Supported: ${Ib}.`})},IS=e=>{if("string"!=typeof e)throw new Ia({action:Ir.EnsureClerkJWT,reason:Ii.TokenVerificationFailed,message:`Subject claim (sub) is required and must be a string. Received ${JSON.stringify(e)}.`})},Ik=(e,t)=>{if(e&&t&&0!==t.length&&!t.includes(e))throw new Ia({reason:Ii.TokenInvalidAuthorizedParties,message:`Invalid JWT Authorized party claim (azp) ${JSON.stringify(e)}. Expected "${t}".`})},IE=(e,t)=>{if("number"!=typeof e)throw new Ia({action:Ir.EnsureClerkJWT,reason:Ii.TokenVerificationFailed,message:`Invalid JWT expiry date claim (exp) ${JSON.stringify(e)}. Expected number.`});let s=new Date(Date.now()),n=new Date(0);if(n.setUTCSeconds(e),n.getTime()<=s.getTime()-t)throw new Ia({reason:Ii.TokenExpired,message:`JWT is expired. Expiry date: ${n.toUTCString()}, Current date: ${s.toUTCString()}.`})},IO=(e,t)=>{if(void 0===e)return;if("number"!=typeof e)throw new Ia({action:Ir.EnsureClerkJWT,reason:Ii.TokenVerificationFailed,message:`Invalid JWT not before date claim (nbf) ${JSON.stringify(e)}. Expected number.`});let s=new Date(Date.now()),n=new Date(0);if(n.setUTCSeconds(e),n.getTime()>s.getTime()+t)throw new Ia({reason:Ii.TokenNotActiveYet,message:`JWT cannot be used prior to not before date claim (nbf). Not before date: ${n.toUTCString()}; Current date: ${s.toUTCString()};`})},IT=(e,t)=>{if(void 0===e)return;if("number"!=typeof e)throw new Ia({action:Ir.EnsureClerkJWT,reason:Ii.TokenVerificationFailed,message:`Invalid JWT issued at date claim (iat) ${JSON.stringify(e)}. Expected number.`});let s=new Date(Date.now()),n=new Date(0);if(n.setUTCSeconds(e),n.getTime()>s.getTime()+t)throw new Ia({reason:Ii.TokenNotActiveYet,message:`JWT issued at date claim (iat) is in the future. Issued at date: ${n.toUTCString()}; Current date: ${s.toUTCString()};`})};function II(e,t,s){if("object"==typeof e)return Ip.crypto.subtle.importKey("jwk",e,t,!1,[s]);let n=function(e){let t=Ic(e.replace(/-----BEGIN.*?-----/g,"").replace(/-----END.*?-----/g,"").replace(/\s/g,"")),s=new Uint8Array(new ArrayBuffer(t.length));for(let e=0,n=t.length;e<n;e++)s[e]=t.charCodeAt(e);return s}(e),i="sign"===s?"pkcs8":"spki";return Ip.crypto.subtle.importKey(i,n,t,!1,[s])}async function IR(e,t){let{header:s,signature:n,raw:i}=e,r=new TextEncoder().encode([i.header,i.payload].join(".")),a=Ix(s.alg);try{let e=await II(t,a,"verify");return{data:await Ip.crypto.subtle.verify(a.name,e,n,r)}}catch(e){return{errors:[new Ia({reason:Ii.TokenInvalidSignature,message:e?.message})]}}}function IN(e){let t=(e||"").toString().split(".");if(3!==t.length)return{errors:[new Ia({reason:Ii.TokenInvalid,message:"Invalid JWT form. A JWT consists of three parts separated by dots."})]};let[s,n,i]=t,r=new TextDecoder,a=JSON.parse(r.decode(Id.parse(s,{loose:!0})));return{data:{header:a,payload:JSON.parse(r.decode(Id.parse(n,{loose:!0}))),signature:Id.parse(i,{loose:!0}),raw:{header:s,payload:n,signature:i,text:e}}}}async function IA(e,t){let{audience:s,authorizedParties:n,clockSkewInMs:i,key:r}=t,a=i||5e3,{data:o,errors:l}=IN(e);if(l)return{errors:l};let{header:c,payload:u}=o;try{let{typ:e,alg:t}=c;I_(e),Iw(t);let{azp:i,sub:r,aud:o,iat:l,exp:p,nbf:d}=u;IS(r),Iv([o],[s]),Ik(i,n),IE(p,a),IO(d,a),IT(l,a)}catch(e){return{errors:[e]}}let{data:p,errors:d}=await IR(o,r);return d?{errors:[new Ia({action:Ir.EnsureClerkJWT,reason:Ii.TokenVerificationFailed,message:`Error verifying JWT signature. ${d[0]}`})]}:p?{data:u}:{errors:[new Ia({reason:Ii.TokenInvalidSignature,message:"JWT signature is invalid."})]}}function IC(e){var t,s,n,i,r;return{code:e.code,message:e.message,longMessage:e.long_message,meta:{paramName:null==(t=null==e?void 0:e.meta)?void 0:t.param_name,sessionId:null==(s=null==e?void 0:e.meta)?void 0:s.session_id,emailAddresses:null==(n=null==e?void 0:e.meta)?void 0:n.email_addresses,identifiers:null==(i=null==e?void 0:e.meta)?void 0:i.identifiers,zxcvbn:null==(r=null==e?void 0:e.meta)?void 0:r.zxcvbn}}}var IM=class e extends Error{constructor(t,{data:s,status:n,clerkTraceId:i}){super(t),this.toString=()=>{let e=`[${this.name}]
Message:${this.message}
Status:${this.status}
Serialized errors: ${this.errors.map(e=>JSON.stringify(e))}`;return this.clerkTraceId&&(e+=`
Clerk Trace ID: ${this.clerkTraceId}`),e},Object.setPrototypeOf(this,e.prototype),this.status=n,this.message=t,this.clerkTraceId=i,this.clerkError=!0,this.errors=function(e=[]){return e.length>0?e.map(IC):[]}(s)}},IF=Object.freeze({InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingSecretKeyErrorMessage:"Missing secretKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingClerkProvider:"{{source}} can only be used within the <ClerkProvider /> component. Learn more: https://clerk.com/docs/components/clerk-provider"}),Ij=s(1727),IL=[".lcl.dev",".lclstage.dev",".lclclerk.com"],IP=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"],IU=[".lcl.dev","lclstage.dev",".lclclerk.com",".accounts.lclclerk.com"],ID=[".accountsstage.dev"],I$="https://api.clerk.com",Iq="pk_live_";function Iz(e,t={}){if(!(e=e||"")||!function(e){let t=(e=e||"").startsWith(Iq)||e.startsWith("pk_test_"),s=Ic(e.split("_")[2]||"").endsWith("$");return t&&s}(e)){if(t.fatal)throw Error("Publishable key not valid.");return null}let s=e.startsWith(Iq)?"production":"development",n=Ic(e.split("_")[2]);return n=n.slice(0,-1),t.proxyUrl?n=t.proxyUrl:"development"!==s&&t.domain&&(n=`clerk.${t.domain}`),{instanceType:s,frontendApi:n}}var IB=s(3183),IJ="https://api.clerk.com",IK={Session:"__session",ClientUat:"__client_uat",Handshake:"__clerk_handshake",DevBrowser:"__clerk_db_jwt"},IH={ClerkSynced:"__clerk_synced",ClerkRedirectUrl:"__clerk_redirect_url",DevBrowser:IK.DevBrowser,Handshake:IK.Handshake,HandshakeHelp:"__clerk_help",LegacyDevBrowser:"__dev_session"},IV={Attributes:{AuthToken:"__clerkAuthToken",AuthSignature:"__clerkAuthSignature",AuthStatus:"__clerkAuthStatus",AuthReason:"__clerkAuthReason",AuthMessage:"__clerkAuthMessage",ClerkUrl:"__clerkUrl"},Cookies:IK,Headers:{AuthToken:"x-clerk-auth-token",AuthSignature:"x-clerk-auth-signature",AuthStatus:"x-clerk-auth-status",AuthReason:"x-clerk-auth-reason",AuthMessage:"x-clerk-auth-message",ClerkUrl:"x-clerk-clerk-url",EnableDebug:"x-clerk-debug",ClerkRequestData:"x-clerk-request-data",ClerkRedirectTo:"x-clerk-redirect-to",CloudFrontForwardedProto:"cloudfront-forwarded-proto",Authorization:"authorization",ForwardedPort:"x-forwarded-port",ForwardedProto:"x-forwarded-proto",ForwardedHost:"x-forwarded-host",Accept:"accept",Referrer:"referer",UserAgent:"user-agent",Origin:"origin",Host:"host",ContentType:"content-type",SecFetchDest:"sec-fetch-dest",Location:"location"},ContentTypes:{Json:"application/json"},QueryParameters:IH},IW=class{constructor(e){this.request=e}requireId(e){if(!e)throw Error("A valid resource ID is required.")}},IG=RegExp("(?<!:)/{1,}","g");function IY(...e){return e.filter(e=>e).join("/").replace(IG,"/")}var IQ="/allowlist_identifiers",IX=class extends IW{async getAllowlistIdentifierList(){return this.request({method:"GET",path:IQ,queryParams:{paginated:!0}})}async createAllowlistIdentifier(e){return this.request({method:"POST",path:IQ,bodyParams:e})}async deleteAllowlistIdentifier(e){return this.requireId(e),this.request({method:"DELETE",path:IY(IQ,e)})}},IZ="/clients",I0=class extends IW{async getClientList(e={}){return this.request({method:"GET",path:IZ,queryParams:{...e,paginated:!0}})}async getClient(e){return this.requireId(e),this.request({method:"GET",path:IY(IZ,e)})}verifyClient(e){return this.request({method:"POST",path:IY(IZ,"verify"),bodyParams:{token:e}})}},I1=class extends IW{async deleteDomain(e){return this.request({method:"DELETE",path:IY("/domains",e)})}},I2="/email_addresses",I5=class extends IW{async getEmailAddress(e){return this.requireId(e),this.request({method:"GET",path:IY(I2,e)})}async createEmailAddress(e){return this.request({method:"POST",path:I2,bodyParams:e})}async updateEmailAddress(e,t={}){return this.requireId(e),this.request({method:"PATCH",path:IY(I2,e),bodyParams:t})}async deleteEmailAddress(e){return this.requireId(e),this.request({method:"DELETE",path:IY(I2,e)})}},I3="/invitations",I4=class extends IW{async getInvitationList(e={}){return this.request({method:"GET",path:I3,queryParams:{...e,paginated:!0}})}async createInvitation(e){return this.request({method:"POST",path:I3,bodyParams:e})}async revokeInvitation(e){return this.requireId(e),this.request({method:"POST",path:IY(I3,e,"revoke")})}},I8="/organizations",I6=class extends IW{async getOrganizationList(e){return this.request({method:"GET",path:I8,queryParams:e})}async createOrganization(e){return this.request({method:"POST",path:I8,bodyParams:e})}async getOrganization(e){let t="organizationId"in e?e.organizationId:e.slug;return this.requireId(t),this.request({method:"GET",path:IY(I8,t)})}async updateOrganization(e,t){return this.requireId(e),this.request({method:"PATCH",path:IY(I8,e),bodyParams:t})}async updateOrganizationLogo(e,t){this.requireId(e);let s=new Ip.FormData;return s.append("file",t?.file),s.append("uploader_user_id",t?.uploaderUserId),this.request({method:"PUT",path:IY(I8,e,"logo"),formData:s})}async deleteOrganizationLogo(e){return this.requireId(e),this.request({method:"DELETE",path:IY(I8,e,"logo")})}async updateOrganizationMetadata(e,t){return this.requireId(e),this.request({method:"PATCH",path:IY(I8,e,"metadata"),bodyParams:t})}async deleteOrganization(e){return this.request({method:"DELETE",path:IY(I8,e)})}async getOrganizationMembershipList(e){let{organizationId:t,limit:s,offset:n}=e;return this.requireId(t),this.request({method:"GET",path:IY(I8,t,"memberships"),queryParams:{limit:s,offset:n}})}async createOrganizationMembership(e){let{organizationId:t,userId:s,role:n}=e;return this.requireId(t),this.request({method:"POST",path:IY(I8,t,"memberships"),bodyParams:{userId:s,role:n}})}async updateOrganizationMembership(e){let{organizationId:t,userId:s,role:n}=e;return this.requireId(t),this.request({method:"PATCH",path:IY(I8,t,"memberships",s),bodyParams:{role:n}})}async updateOrganizationMembershipMetadata(e){let{organizationId:t,userId:s,publicMetadata:n,privateMetadata:i}=e;return this.request({method:"PATCH",path:IY(I8,t,"memberships",s,"metadata"),bodyParams:{publicMetadata:n,privateMetadata:i}})}async deleteOrganizationMembership(e){let{organizationId:t,userId:s}=e;return this.requireId(t),this.request({method:"DELETE",path:IY(I8,t,"memberships",s)})}async getOrganizationInvitationList(e){let{organizationId:t,status:s,limit:n,offset:i}=e;return this.requireId(t),this.request({method:"GET",path:IY(I8,t,"invitations"),queryParams:{status:s,limit:n,offset:i}})}async createOrganizationInvitation(e){let{organizationId:t,...s}=e;return this.requireId(t),this.request({method:"POST",path:IY(I8,t,"invitations"),bodyParams:{...s}})}async getOrganizationInvitation(e){let{organizationId:t,invitationId:s}=e;return this.requireId(t),this.requireId(s),this.request({method:"GET",path:IY(I8,t,"invitations",s)})}async revokeOrganizationInvitation(e){let{organizationId:t,invitationId:s,requestingUserId:n}=e;return this.requireId(t),this.request({method:"POST",path:IY(I8,t,"invitations",s,"revoke"),bodyParams:{requestingUserId:n}})}},I7="/phone_numbers",I9=class extends IW{async getPhoneNumber(e){return this.requireId(e),this.request({method:"GET",path:IY(I7,e)})}async createPhoneNumber(e){return this.request({method:"POST",path:I7,bodyParams:e})}async updatePhoneNumber(e,t={}){return this.requireId(e),this.request({method:"PATCH",path:IY(I7,e),bodyParams:t})}async deletePhoneNumber(e){return this.requireId(e),this.request({method:"DELETE",path:IY(I7,e)})}},Re="/redirect_urls",Rt=class extends IW{async getRedirectUrlList(){return this.request({method:"GET",path:Re,queryParams:{paginated:!0}})}async getRedirectUrl(e){return this.requireId(e),this.request({method:"GET",path:IY(Re,e)})}async createRedirectUrl(e){return this.request({method:"POST",path:Re,bodyParams:e})}async deleteRedirectUrl(e){return this.requireId(e),this.request({method:"DELETE",path:IY(Re,e)})}},Rs="/sessions",Rn=class extends IW{async getSessionList(e={}){return this.request({method:"GET",path:Rs,queryParams:{...e,paginated:!0}})}async getSession(e){return this.requireId(e),this.request({method:"GET",path:IY(Rs,e)})}async revokeSession(e){return this.requireId(e),this.request({method:"POST",path:IY(Rs,e,"revoke")})}async verifySession(e,t){return this.requireId(e),this.request({method:"POST",path:IY(Rs,e,"verify"),bodyParams:{token:t}})}async getToken(e,t){return this.requireId(e),this.request({method:"POST",path:IY(Rs,e,"tokens",t||"")})}},Ri="/sign_in_tokens",Rr=class extends IW{async createSignInToken(e){return this.request({method:"POST",path:Ri,bodyParams:e})}async revokeSignInToken(e){return this.requireId(e),this.request({method:"POST",path:IY(Ri,e,"revoke")})}},Ra="/users",Ro=class extends IW{async getUserList(e={}){let{limit:t,offset:s,orderBy:n,...i}=e,[r,a]=await Promise.all([this.request({method:"GET",path:Ra,queryParams:e}),this.getCount(i)]);return{data:r,totalCount:a}}async getUser(e){return this.requireId(e),this.request({method:"GET",path:IY(Ra,e)})}async createUser(e){return this.request({method:"POST",path:Ra,bodyParams:e})}async updateUser(e,t={}){return this.requireId(e),this.request({method:"PATCH",path:IY(Ra,e),bodyParams:t})}async updateUserProfileImage(e,t){this.requireId(e);let s=new Ip.FormData;return s.append("file",t?.file),this.request({method:"POST",path:IY(Ra,e,"profile_image"),formData:s})}async updateUserMetadata(e,t){return this.requireId(e),this.request({method:"PATCH",path:IY(Ra,e,"metadata"),bodyParams:t})}async deleteUser(e){return this.requireId(e),this.request({method:"DELETE",path:IY(Ra,e)})}async getCount(e={}){return this.request({method:"GET",path:IY(Ra,"count"),queryParams:e})}async getUserOauthAccessToken(e,t){return this.requireId(e),this.request({method:"GET",path:IY(Ra,e,"oauth_access_tokens",t),queryParams:{paginated:!0}})}async disableUserMFA(e){return this.requireId(e),this.request({method:"DELETE",path:IY(Ra,e,"mfa")})}async getOrganizationMembershipList(e){let{userId:t,limit:s,offset:n}=e;return this.requireId(t),this.request({method:"GET",path:IY(Ra,t,"organization_memberships"),queryParams:{limit:s,offset:n}})}async verifyPassword(e){let{userId:t,password:s}=e;return this.requireId(t),this.request({method:"POST",path:IY(Ra,t,"verify_password"),bodyParams:{password:s}})}async verifyTOTP(e){let{userId:t,code:s}=e;return this.requireId(t),this.request({method:"POST",path:IY(Ra,t,"verify_totp"),bodyParams:{code:s}})}async banUser(e){return this.requireId(e),this.request({method:"POST",path:IY(Ra,e,"ban")})}async unbanUser(e){return this.requireId(e),this.request({method:"POST",path:IY(Ra,e,"unban")})}async lockUser(e){return this.requireId(e),this.request({method:"POST",path:IY(Ra,e,"lock")})}async unlockUser(e){return this.requireId(e),this.request({method:"POST",path:IY(Ra,e,"unlock")})}},Rl="/saml_connections",Rc=class extends IW{async getSamlConnectionList(e={}){return this.request({method:"GET",path:Rl,queryParams:e})}async createSamlConnection(e){return this.request({method:"POST",path:Rl,bodyParams:e})}async getSamlConnection(e){return this.requireId(e),this.request({method:"GET",path:IY(Rl,e)})}async updateSamlConnection(e,t={}){return this.requireId(e),this.request({method:"PATCH",path:IY(Rl,e),bodyParams:t})}async deleteSamlConnection(e){return this.requireId(e),this.request({method:"DELETE",path:IY(Rl,e)})}},Ru=class extends IW{async createTestingToken(){return this.request({method:"POST",path:"/testing_tokens"})}},Rp=function({packageName:e,customMessages:t}){let s=e,n={...IF,...t};function i(e,t){if(!t)return`${s}: ${e}`;let n=e;for(let s of e.matchAll(/{{([a-zA-Z0-9-_]+)}}/g)){let e=(t[s[1]]||"").toString();n=n.replace(`{{${s[1]}}}`,e)}return`${s}: ${n}`}return{setPackageName({packageName:e}){return"string"==typeof e&&(s=e),this},setMessages({customMessages:e}){return Object.assign(n,e||{}),this},throwInvalidPublishableKeyError(e){throw Error(i(n.InvalidPublishableKeyErrorMessage,e))},throwInvalidProxyUrl(e){throw Error(i(n.InvalidProxyUrlErrorMessage,e))},throwMissingPublishableKeyError(){throw Error(i(n.MissingPublishableKeyErrorMessage))},throwMissingSecretKeyError(){throw Error(i(n.MissingSecretKeyErrorMessage))},throwMissingClerkProviderError(e){throw Error(i(n.MissingClerkProvider,e))},throw(e){throw Error(i(e))}}}({packageName:"@clerk/backend"}),{isDevOrStagingUrl:Rd}=function(){let e=new Map;return{isDevOrStagingUrl:t=>{if(!t)return!1;let s="string"==typeof t?t:t.hostname,n=e.get(s);return void 0===n&&(n=IP.some(e=>s.endsWith(e)),e.set(s,n)),n}}}(),Rh=class e{constructor(e,t,s,n,i){this.id=e,this.identifier=t,this.createdAt=s,this.updatedAt=n,this.invitationId=i}static fromJSON(t){return new e(t.id,t.identifier,t.created_at,t.updated_at,t.invitation_id)}},Rm=class e{constructor(e,t,s,n,i,r,a,o,l){this.id=e,this.clientId=t,this.userId=s,this.status=n,this.lastActiveAt=i,this.expireAt=r,this.abandonAt=a,this.createdAt=o,this.updatedAt=l}static fromJSON(t){return new e(t.id,t.client_id,t.user_id,t.status,t.last_active_at,t.expire_at,t.abandon_at,t.created_at,t.updated_at)}},Rf=class e{constructor(e,t,s,n,i,r,a,o){this.id=e,this.sessionIds=t,this.sessions=s,this.signInId=n,this.signUpId=i,this.lastActiveSessionId=r,this.createdAt=a,this.updatedAt=o}static fromJSON(t){return new e(t.id,t.session_ids,t.sessions.map(e=>Rm.fromJSON(e)),t.sign_in_id,t.sign_up_id,t.last_active_session_id,t.created_at,t.updated_at)}},Rg=class e{constructor(e,t,s,n){this.object=e,this.id=t,this.slug=s,this.deleted=n}static fromJSON(t){return new e(t.object,t.id||null,t.slug||null,t.deleted)}},Rb=class e{constructor(e,t,s,n,i,r,a,o,l,c,u){this.id=e,this.fromEmailName=t,this.emailAddressId=s,this.toEmailAddress=n,this.subject=i,this.body=r,this.bodyPlain=a,this.status=o,this.slug=l,this.data=c,this.deliveredByClerk=u}static fromJSON(t){return new e(t.id,t.from_email_name,t.email_address_id,t.to_email_address,t.subject,t.body,t.body_plain,t.status,t.slug,t.data,t.delivered_by_clerk)}},Rx=class e{constructor(e,t){this.id=e,this.type=t}static fromJSON(t){return new e(t.id,t.type)}},Ry=class e{constructor(e,t,s=null,n=null,i=null,r=null){this.status=e,this.strategy=t,this.externalVerificationRedirectURL=s,this.attempts=n,this.expireAt=i,this.nonce=r}static fromJSON(t){return new e(t.status,t.strategy,t.external_verification_redirect_url?new URL(t.external_verification_redirect_url):null,t.attempts,t.expire_at,t.nonce)}},Rv=class e{constructor(e,t,s,n){this.id=e,this.emailAddress=t,this.verification=s,this.linkedTo=n}static fromJSON(t){return new e(t.id,t.email_address,t.verification&&Ry.fromJSON(t.verification),t.linked_to.map(e=>Rx.fromJSON(e)))}},R_=class e{constructor(e,t,s,n,i,r,a,o,l,c,u={},p,d){this.id=e,this.provider=t,this.identificationId=s,this.externalId=n,this.approvedScopes=i,this.emailAddress=r,this.firstName=a,this.lastName=o,this.imageUrl=l,this.username=c,this.publicMetadata=u,this.label=p,this.verification=d}static fromJSON(t){return new e(t.id,t.provider,t.identification_id,t.provider_user_id,t.approved_scopes,t.email_address,t.first_name,t.last_name,t.image_url||"",t.username,t.public_metadata,t.label,t.verification&&Ry.fromJSON(t.verification))}},Rw=class e{constructor(e,t,s,n,i,r,a){this.id=e,this.emailAddress=t,this.publicMetadata=s,this.createdAt=n,this.updatedAt=i,this.status=r,this.revoked=a}static fromJSON(t){return new e(t.id,t.email_address,t.public_metadata,t.created_at,t.updated_at,t.status,t.revoked)}},RS={AllowlistIdentifier:"allowlist_identifier",Client:"client",Email:"email",EmailAddress:"email_address",Invitation:"invitation",OauthAccessToken:"oauth_access_token",Organization:"organization",OrganizationInvitation:"organization_invitation",OrganizationMembership:"organization_membership",PhoneNumber:"phone_number",RedirectUrl:"redirect_url",Session:"session",SignInToken:"sign_in_token",SmsMessage:"sms_message",User:"user",Token:"token",TotalCount:"total_count"},Rk=class e{constructor(e,t,s,n={},i,r,a){this.externalAccountId=e,this.provider=t,this.token=s,this.publicMetadata=n,this.label=i,this.scopes=r,this.tokenSecret=a}static fromJSON(t){return new e(t.external_account_id,t.provider,t.token,t.public_metadata,t.label||"",t.scopes,t.token_secret)}},RE=class e{constructor(e,t,s,n,i,r,a,o,l={},c={},u,p,d){this.id=e,this.name=t,this.slug=s,this.imageUrl=n,this.hasImage=i,this.createdBy=r,this.createdAt=a,this.updatedAt=o,this.publicMetadata=l,this.privateMetadata=c,this.maxAllowedMemberships=u,this.adminDeleteEnabled=p,this.membersCount=d}static fromJSON(t){return new e(t.id,t.name,t.slug,t.image_url||"",t.has_image,t.created_by,t.created_at,t.updated_at,t.public_metadata,t.private_metadata,t.max_allowed_memberships,t.admin_delete_enabled,t.members_count)}},RO=class e{constructor(e,t,s,n,i,r,a,o={},l={}){this.id=e,this.emailAddress=t,this.role=s,this.organizationId=n,this.createdAt=i,this.updatedAt=r,this.status=a,this.publicMetadata=o,this.privateMetadata=l}static fromJSON(t){return new e(t.id,t.email_address,t.role,t.organization_id,t.created_at,t.updated_at,t.status,t.public_metadata,t.private_metadata)}},RT=class e{constructor(e,t,s={},n={},i,r,a,o){this.id=e,this.role=t,this.publicMetadata=s,this.privateMetadata=n,this.createdAt=i,this.updatedAt=r,this.organization=a,this.publicUserData=o}static fromJSON(t){return new e(t.id,t.role,t.public_metadata,t.private_metadata,t.created_at,t.updated_at,RE.fromJSON(t.organization),RI.fromJSON(t.public_user_data))}},RI=class e{constructor(e,t,s,n,i,r){this.identifier=e,this.firstName=t,this.lastName=s,this.imageUrl=n,this.hasImage=i,this.userId=r}static fromJSON(t){return new e(t.identifier,t.first_name,t.last_name,t.image_url,t.has_image,t.user_id)}},RR=class e{constructor(e,t,s,n,i,r){this.id=e,this.phoneNumber=t,this.reservedForSecondFactor=s,this.defaultSecondFactor=n,this.verification=i,this.linkedTo=r}static fromJSON(t){return new e(t.id,t.phone_number,t.reserved_for_second_factor,t.default_second_factor,t.verification&&Ry.fromJSON(t.verification),t.linked_to.map(e=>Rx.fromJSON(e)))}},RN=class e{constructor(e,t,s,n){this.id=e,this.url=t,this.createdAt=s,this.updatedAt=n}static fromJSON(t){return new e(t.id,t.url,t.created_at,t.updated_at)}},RA=class e{constructor(e,t,s,n,i,r,a){this.id=e,this.userId=t,this.token=s,this.status=n,this.url=i,this.createdAt=r,this.updatedAt=a}static fromJSON(t){return new e(t.id,t.user_id,t.token,t.status,t.url,t.created_at,t.updated_at)}},RC=class e{constructor(e,t,s,n,i,r,a){this.id=e,this.fromPhoneNumber=t,this.toPhoneNumber=s,this.message=n,this.status=i,this.phoneNumberId=r,this.data=a}static fromJSON(t){return new e(t.id,t.from_phone_number,t.to_phone_number,t.message,t.status,t.phone_number_id,t.data)}},RM=class e{constructor(e){this.jwt=e}static fromJSON(t){return new e(t.jwt)}},RF=class e{constructor(e,t,s,n,i,r,a,o){this.id=e,this.provider=t,this.providerUserId=s,this.active=n,this.emailAddress=i,this.firstName=r,this.lastName=a,this.verification=o}static fromJSON(t){return new e(t.id,t.provider,t.provider_user_id,t.active,t.email_address,t.first_name,t.last_name,t.verification&&Ry.fromJSON(t.verification))}},Rj=class e{constructor(e,t,s){this.id=e,this.web3Wallet=t,this.verification=s}static fromJSON(t){return new e(t.id,t.web3_wallet,t.verification&&Ry.fromJSON(t.verification))}},RL=class e{constructor(e,t,s,n,i,r,a,o,l,c,u,p,d,h,m,f,g,b,x={},y={},v={},_=[],w=[],S=[],k=[],E=[],O,T){this.id=e,this.passwordEnabled=t,this.totpEnabled=s,this.backupCodeEnabled=n,this.twoFactorEnabled=i,this.banned=r,this.createdAt=a,this.updatedAt=o,this.imageUrl=l,this.hasImage=c,this.primaryEmailAddressId=u,this.primaryPhoneNumberId=p,this.primaryWeb3WalletId=d,this.lastSignInAt=h,this.externalId=m,this.username=f,this.firstName=g,this.lastName=b,this.publicMetadata=x,this.privateMetadata=y,this.unsafeMetadata=v,this.emailAddresses=_,this.phoneNumbers=w,this.web3Wallets=S,this.externalAccounts=k,this.samlAccounts=E,this.lastActiveAt=O,this.createOrganizationEnabled=T}static fromJSON(t){return new e(t.id,t.password_enabled,t.totp_enabled,t.backup_code_enabled,t.two_factor_enabled,t.banned,t.created_at,t.updated_at,t.image_url,t.has_image,t.primary_email_address_id,t.primary_phone_number_id,t.primary_web3_wallet_id,t.last_sign_in_at,t.external_id,t.username,t.first_name,t.last_name,t.public_metadata,t.private_metadata,t.unsafe_metadata,(t.email_addresses||[]).map(e=>Rv.fromJSON(e)),(t.phone_numbers||[]).map(e=>RR.fromJSON(e)),(t.web3_wallets||[]).map(e=>Rj.fromJSON(e)),(t.external_accounts||[]).map(e=>R_.fromJSON(e)),(t.saml_accounts||[]).map(e=>RF.fromJSON(e)),t.last_active_at,t.create_organization_enabled)}get primaryEmailAddress(){return this.emailAddresses.find(({id:e})=>e===this.primaryEmailAddressId)??null}get primaryPhoneNumber(){return this.phoneNumbers.find(({id:e})=>e===this.primaryPhoneNumberId)??null}get primaryWeb3Wallet(){return this.web3Wallets.find(({id:e})=>e===this.primaryWeb3WalletId)??null}get fullName(){return[this.firstName,this.lastName].join(" ").trim()||null}};function RP(e){if("string"!=typeof e&&"object"in e&&"deleted"in e)return Rg.fromJSON(e);switch(e.object){case RS.AllowlistIdentifier:return Rh.fromJSON(e);case RS.Client:return Rf.fromJSON(e);case RS.EmailAddress:return Rv.fromJSON(e);case RS.Email:return Rb.fromJSON(e);case RS.Invitation:return Rw.fromJSON(e);case RS.OauthAccessToken:return Rk.fromJSON(e);case RS.Organization:return RE.fromJSON(e);case RS.OrganizationInvitation:return RO.fromJSON(e);case RS.OrganizationMembership:return RT.fromJSON(e);case RS.PhoneNumber:return RR.fromJSON(e);case RS.RedirectUrl:return RN.fromJSON(e);case RS.SignInToken:return RA.fromJSON(e);case RS.Session:return Rm.fromJSON(e);case RS.SmsMessage:return RC.fromJSON(e);case RS.Token:return RM.fromJSON(e);case RS.TotalCount:return e.total_count;case RS.User:return RL.fromJSON(e);default:return e}}function RU(e,t){return e&&"object"==typeof e&&"clerk_trace_id"in e&&"string"==typeof e.clerk_trace_id?e.clerk_trace_id:t?.get("cf-ray")||""}function RD(e){if(e&&"object"==typeof e&&"errors"in e){let t=e.errors;return t.length>0?t.map(IC):[]}return[]}var R$=e=>()=>{let t={...e};return t.secretKey=(t.secretKey||"").substring(0,7),t.jwtKey=(t.jwtKey||"").substring(0,7),{...t}};function Rq(e,t,s){let{act:n,sid:i,org_id:r,org_role:a,org_slug:o,org_permissions:l,sub:c}=s,u=function(e){var t;let s=(t=async t=>{let s;let{secretKey:n,apiUrl:i=IJ,apiVersion:r="v1",userAgent:a="@clerk/backend@1.4.3"}=e,{path:o,method:l,queryParams:c,headerParams:u,bodyParams:p,formData:d}=t;(function(e){if(!e||"string"!=typeof e)throw Error("Missing Clerk Secret Key. Go to https://dashboard.clerk.com and get your key for your instance.")})(n);let h=new URL(IY(i,r,o));if(c)for(let[e,t]of Object.entries(Ij({...c})))t&&[t].flat().forEach(t=>h.searchParams.append(e,t));let m={Authorization:`Bearer ${n}`,"User-Agent":a,...u};try{if(d)s=await Ip.fetch(h.href,{method:l,headers:m,body:d});else{m["Content-Type"]="application/json";let e="GET"!==l&&p&&Object.keys(p).length>0?{body:JSON.stringify(Ij(p,{deep:!1}))}:null;s=await Ip.fetch(h.href,{method:l,headers:m,...e})}let e=s?.headers&&s.headers?.get(IV.Headers.ContentType)===IV.ContentTypes.Json,t=await (e?s.json():s.text());if(!s.ok)return{data:null,errors:RD(t),status:s?.status,statusText:s?.statusText,clerkTraceId:RU(t,s?.headers)};return{...Array.isArray(t)?{data:t.map(e=>RP(e))}:t&&"object"==typeof t&&"data"in t&&Array.isArray(t.data)&&void 0!==t.data?{data:t.data.map(e=>RP(e)),totalCount:t.total_count}:{data:RP(t)},errors:null}}catch(e){if(e instanceof Error)return{data:null,errors:[{code:"unexpected_error",message:e.message||"Unexpected error"}],clerkTraceId:RU(e,s?.headers)};return{data:null,errors:RD(e),status:s?.status,statusText:s?.statusText,clerkTraceId:RU(e,s?.headers)}}},async(...e)=>{let{data:s,errors:n,totalCount:i,status:r,statusText:a,clerkTraceId:o}=await t(...e);if(n){let e=new IM(a||"",{data:[],status:r,clerkTraceId:o});throw e.errors=n,e}return void 0!==i?{data:s,totalCount:i}:s});return{allowlistIdentifiers:new IX(s),clients:new I0(s),emailAddresses:new I5(s),invitations:new I4(s),organizations:new I6(s),phoneNumbers:new I9(s),redirectUrls:new Rt(s),sessions:new Rn(s),signInTokens:new Rr(s),users:new Ro(s),domains:new I1(s),samlConnections:new Rc(s),testingTokens:new Ru(s)}}(e),p=RB({sessionId:i,sessionToken:t,fetcher:async(...e)=>(await u.sessions.getToken(...e)).jwt});return{actor:n,sessionClaims:s,sessionId:i,userId:c,orgId:r,orgRole:a,orgSlug:o,orgPermissions:l,getToken:p,has:RJ({orgId:r,orgRole:a,orgPermissions:l,userId:c}),debug:R$({...e,sessionToken:t})}}function Rz(e){return{sessionClaims:null,sessionId:null,userId:null,actor:null,orgId:null,orgRole:null,orgSlug:null,orgPermissions:null,getToken:()=>Promise.resolve(null),has:()=>!1,debug:R$(e)}}var RB=e=>{let{fetcher:t,sessionToken:s,sessionId:n}=e||{};return async(e={})=>n?e.template?t(n,e.template):s:null},RJ=e=>{let{orgId:t,orgRole:s,userId:n,orgPermissions:i}=e;return e=>{if(!e?.permission&&!e?.role)throw Error('Missing parameters. `has` from `auth` or `getAuth` requires a permission or role key to be passed. Example usage: `has({permission: "org:posts:edit"`');return!!t&&!!n&&!!s&&!!i&&(e.permission?i.includes(e.permission):!!e.role&&s===e.role)}},RK={SignedIn:"signed-in",SignedOut:"signed-out"},RH=e=>{let t=new Headers(e.headers||{});return e.message&&t.set(IV.Headers.AuthMessage,e.message),e.reason&&t.set(IV.Headers.AuthReason,e.reason),e.status&&t.set(IV.Headers.AuthStatus,e.status),e.headers=t,e},RV=class extends URL{isCrossOrigin(e){return this.origin!==new URL(e.toString()).origin}},RW=(...e)=>new RV(...e),RG=class extends Request{constructor(e,t){super("string"!=typeof e&&"url"in e?e.url:String(e),t||"string"==typeof e?void 0:e),this.clerkUrl=this.deriveUrlFromHeaders(this),this.cookies=this.parseCookies(this)}toJSON(){return{url:this.clerkUrl.href,method:this.method,headers:JSON.stringify(Object.fromEntries(this.headers)),clerkUrl:this.clerkUrl.toString(),cookies:JSON.stringify(Object.fromEntries(this.cookies))}}deriveUrlFromHeaders(e){let t=new URL(e.url),s=e.headers.get(IV.Headers.ForwardedProto),n=e.headers.get(IV.Headers.ForwardedHost),i=e.headers.get(IV.Headers.Host),r=t.protocol,a=this.getFirstValueFromHeader(n)??i,o=this.getFirstValueFromHeader(s)??r?.replace(/[:/]/,""),l=a&&o?`${o}://${a}`:t.origin;return RW(t.pathname+t.search,l)}getFirstValueFromHeader(e){return e?.split(",")[0]}parseCookies(e){return new Map(Object.entries((0,IB.Q)(this.decodeCookieValue(e.headers.get("cookie")||""))))}decodeCookieValue(e){return e?e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent):e}},RY=(...e)=>e[0]instanceof RG?e[0]:new RG(...e),RQ={},RX=0;function RZ(e,t=!0){RQ[e.kid]=e,RX=t?Date.now():-1}var R0="local";function R1(e){if(!RQ[R0]){if(!e)throw new TokenVerificationError({action:TokenVerificationErrorAction.SetClerkJWTKey,message:"Missing local JWK.",reason:TokenVerificationErrorReason.LocalJWKMissing});RZ({kid:"local",kty:"RSA",alg:"RS256",n:e.replace(/(\r\n|\n|\r)/gm,"").replace("-----BEGIN PUBLIC KEY-----","").replace("-----END PUBLIC KEY-----","").replace("MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA","").replace("IDAQAB","").replace(/\+/g,"-").replace(/\//g,"_"),e:"AQAB"},!1)}return RQ[R0]}async function R2({secretKey:e,apiUrl:t=IJ,apiVersion:s="v1",kid:n,skipJwksCache:i}){if(i||function(){if(-1===RX)return!1;let e=Date.now()-RX>=0;return e&&(RQ={}),e}()||!RQ[n]){if(!e)throw new TokenVerificationError({action:TokenVerificationErrorAction.ContactSupport,message:"Failed to load JWKS from Clerk Backend or Frontend API.",reason:TokenVerificationErrorReason.RemoteJWKFailedToLoad});let{keys:n}=await callWithRetry(()=>R5(t,e,s));if(!n||!n.length)throw new TokenVerificationError({action:TokenVerificationErrorAction.ContactSupport,message:"The JWKS endpoint did not contain any signing keys. Contact support@clerk.com.",reason:TokenVerificationErrorReason.RemoteJWKFailedToLoad});n.forEach(e=>RZ(e))}let r=RQ[n];if(!r){let e=Object.values(RQ).map(e=>e.kid).sort().join(", ");throw new TokenVerificationError({action:`Go to your Dashboard and validate your secret and public keys are correct. ${TokenVerificationErrorAction.ContactSupport} if the issue persists.`,message:`Unable to find a signing key in JWKS that matches the kid='${n}' of the provided session token. Please make sure that the __session cookie or the HTTP authorization header contain a Clerk-generated session JWT. The following kid is available: ${e}`,reason:TokenVerificationErrorReason.JWKKidMismatch})}return r}async function R5(e,t,s){if(!t)throw new TokenVerificationError({action:TokenVerificationErrorAction.SetClerkSecretKey,message:"Missing Clerk Secret Key or API Key. Go to https://dashboard.clerk.com and get your key for your instance.",reason:TokenVerificationErrorReason.RemoteJWKFailedToLoad});let n=new URL(e);n.pathname=IY(n.pathname,s,"/jwks");let i=await runtime_default.fetch(n.href,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!i.ok){let e=await i.json(),t=R3(e?.errors,TokenVerificationErrorCode.InvalidSecretKey);if(t){let e=TokenVerificationErrorReason.InvalidSecretKey;throw new TokenVerificationError({action:TokenVerificationErrorAction.ContactSupport,message:t.message,reason:e})}throw new TokenVerificationError({action:TokenVerificationErrorAction.ContactSupport,message:`Error loading Clerk JWKS from ${n.href} with code=${i.status}`,reason:TokenVerificationErrorReason.RemoteJWKFailedToLoad})}return i.json()}var R3=(e,t)=>e?e.find(e=>e.code===t):null,R4=class{constructor(e,t,s){this.cookieSuffix=e,this.clerkRequest=t,this.initPublishableKeyValues(s),this.initHeaderValues(),this.initCookieValues(),this.initHandshakeValues(),Object.assign(this,s),this.clerkUrl=this.clerkRequest.clerkUrl}get sessionToken(){return this.sessionTokenInCookie||this.sessionTokenInHeader}initPublishableKeyValues(e){parsePublishableKey(e.publishableKey,{fatal:!0}),this.publishableKey=e.publishableKey;let t=parsePublishableKey(this.publishableKey,{fatal:!0,proxyUrl:e.proxyUrl,domain:e.domain});this.instanceType=t.instanceType,this.frontendApi=t.frontendApi}initHeaderValues(){this.sessionTokenInHeader=this.stripAuthorizationHeader(this.getHeader(IV.Headers.Authorization)),this.origin=this.getHeader(IV.Headers.Origin),this.host=this.getHeader(IV.Headers.Host),this.forwardedHost=this.getHeader(IV.Headers.ForwardedHost),this.forwardedProto=this.getHeader(IV.Headers.CloudFrontForwardedProto)||this.getHeader(IV.Headers.ForwardedProto),this.referrer=this.getHeader(IV.Headers.Referrer),this.userAgent=this.getHeader(IV.Headers.UserAgent),this.secFetchDest=this.getHeader(IV.Headers.SecFetchDest),this.accept=this.getHeader(IV.Headers.Accept)}initCookieValues(){this.suffixedCookies=this.shouldUseSuffixed(),this.sessionTokenInCookie=this.getSuffixedOrUnSuffixedCookie(IV.Cookies.Session),this.clientUat=Number.parseInt(this.getSuffixedOrUnSuffixedCookie(IV.Cookies.ClientUat)||"")||0}initHandshakeValues(){this.devBrowserToken=this.getQueryParam(IV.QueryParameters.DevBrowser)||this.getSuffixedOrUnSuffixedCookie(IV.Cookies.DevBrowser),this.handshakeToken=this.getQueryParam(IV.QueryParameters.Handshake)||this.getCookie(IV.Cookies.Handshake)}stripAuthorizationHeader(e){return e?.replace("Bearer ","")}getQueryParam(e){return this.clerkRequest.clerkUrl.searchParams.get(e)}getHeader(e){return this.clerkRequest.headers.get(e)||void 0}getCookie(e){return this.clerkRequest.cookies.get(e)||void 0}getSuffixedCookie(e){return this.getCookie(getSuffixedCookieName(e,this.cookieSuffix))||void 0}getSuffixedOrUnSuffixedCookie(e){return this.suffixedCookies?this.getSuffixedCookie(e):this.getCookie(e)}shouldUseSuffixed(){let e=this.getSuffixedCookie(IV.Cookies.ClientUat),t=this.getCookie(IV.Cookies.ClientUat),s=this.getSuffixedCookie(IV.Cookies.Session)||"",n=this.getCookie(IV.Cookies.Session)||"";if(n&&!this.tokenHasIssuer(n))return!1;if(n&&!this.tokenBelongsToInstance(n))return!0;if(!e&&!s)return!1;let{data:i}=decodeJwt(n),r=i?.payload.iat||0,{data:a}=decodeJwt(s),o=a?.payload.iat||0;if("0"!==e&&"0"!==t&&r>o||"0"===e&&"0"!==t)return!1;if("production"!==this.instanceType){let s=this.sessionExpired(a);if("0"!==e&&"0"===t&&s)return!1}return!!e||!s}tokenHasIssuer(e){let{data:t,errors:s}=decodeJwt(e);return!s&&!!t.payload.iss}tokenBelongsToInstance(e){if(!e)return!1;let{data:t,errors:s}=decodeJwt(e);if(s)return!1;let n=t.payload.iss.replace(/https?:\/\//gi,"");return this.frontendApi===n}sessionExpired(e){return!!e&&e?.payload.exp<=Date.now()/1e3>>0}};async function R8(e,{key:t}){let{data:s,errors:n}=decodeJwt(e);if(n)throw n[0];let{header:i,payload:r}=s,{typ:a,alg:o}=i;assertHeaderType(a),assertHeaderAlgorithm(o);let{data:l,errors:c}=await hasValidSignature(s,t);if(c)throw new TokenVerificationError({reason:TokenVerificationErrorReason.TokenVerificationFailed,message:`Error verifying handshake token. ${c[0]}`});if(!l)throw new TokenVerificationError({reason:TokenVerificationErrorReason.TokenInvalidSignature,message:"Handshake signature is invalid."});return r}var R6=(e,t,s,n)=>{if(""===e)return R7(t.toString(),s?.toString());let i=new URL(e),r=s?new URL(s,i):void 0,a=new URL(t,i);return r&&a.searchParams.set("redirect_url",r.toString()),n&&i.hostname!==a.hostname&&a.searchParams.set(IV.QueryParameters.DevBrowser,n),a.toString()},R7=(e,t)=>{let s;if(e.startsWith("http"))s=new URL(e);else{if(!t||!t.startsWith("http"))throw Error("destination url or return back url should be an absolute path url!");let n=new URL(t);s=new URL(e,n.origin)}return t&&s.searchParams.set("redirect_url",t),s.toString()},R9=e=>{if(!e)return"";let t=e.replace(/(clerk\.accountsstage\.)/,"accountsstage.").replace(/(clerk\.accounts\.|clerk\.)/,"accounts.");return`https://${t}`},Ne=e=>{let{publishableKey:t,redirectAdapter:s,signInUrl:n,signUpUrl:i,baseUrl:r}=e,a=Iz(t),o=a?.frontendApi,l=a?.instanceType==="development",c=R9(o);return{redirectToSignUp:({returnBackUrl:t}={})=>{i||c||Rp.throwMissingPublishableKeyError();let n=`${c}/sign-up`;return s(R6(r,i||n,t,l?e.devBrowserToken:null))},redirectToSignIn:({returnBackUrl:t}={})=>{n||c||Rp.throwMissingPublishableKeyError();let i=`${c}/sign-in`;return s(R6(r,n||i,t,l?e.devBrowserToken:null))}}},Nt=s(8585),Ns=e=>{let t=s=>{if(!s)return s;if(Array.isArray(s))return s.map(e=>"object"==typeof e||Array.isArray(e)?t(e):e);let n={...s};for(let s of Object.keys(n)){let i=e(s.toString());i!==s&&(n[i]=n[s],delete n[s]),"object"==typeof n[i]&&(n[i]=t(n[i]))}return n};return t};function Nn(e){if("boolean"==typeof e)return e;if(null==e)return!1;if("string"==typeof e){if("true"===e.toLowerCase())return!0;if("false"===e.toLowerCase())return!1}let t=parseInt(e,10);return!isNaN(t)&&t>0}Ns(function(e){return e?e.replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`):""}),Ns(function(e){return e?e.replace(/([-_][a-z])/g,e=>e.toUpperCase().replace(/-|_/,"")):""}),process.env.NEXT_PUBLIC_CLERK_JS_VERSION,process.env.NEXT_PUBLIC_CLERK_JS_URL;let Ni=process.env.CLERK_API_VERSION||"v1",Nr=process.env.CLERK_SECRET_KEY||"",Na="pk_test_c2F2ZWQtZHVjay05LmNsZXJrLmFjY291bnRzLmRldiQ",No=process.env.CLERK_ENCRYPTION_KEY||"",Nl=process.env.CLERK_API_URL||(e=>{var t;let s=null==(t=Iz(e))?void 0:t.frontendApi;return(null==s?void 0:s.startsWith("clerk."))&&IL.some(e=>null==s?void 0:s.endsWith(e))?I$:IU.some(e=>null==s?void 0:s.endsWith(e))?"https://api.lclclerk.com":ID.some(e=>null==s?void 0:s.endsWith(e))?"https://api.clerkstage.dev":I$})(Na);function Nc(e){return async(...t)=>{let{data:s,errors:n}=await e(...t);if(n)throw n[0];return s}}function Nu(e){let t=JSON.stringify(e),s=new TextEncoder().encode(t);return Id.stringify(s,{pad:!1})}async function Np(e,t,s){if(!s.algorithm)throw Error("No algorithm specified");let n=new TextEncoder,i=Ix(s.algorithm);if(!i)return{errors:[new Io(`Unsupported algorithm ${s.algorithm}`)]};let r=await II(t,i,"sign"),a=s.header||{typ:"JWT"};a.alg=s.algorithm,e.iat=Math.floor(Date.now()/1e3);let o=Nu(a),l=Nu(e),c=`${o}.${l}`;try{let e=await Ip.crypto.subtle.sign(i,r,n.encode(c));return{data:`${c}.${Id.stringify(new Uint8Array(e),{pad:!1})}`}}catch(e){return{errors:[new Io(e?.message)]}}}process.env.NEXT_PUBLIC_CLERK_DOMAIN,process.env.NEXT_PUBLIC_CLERK_PROXY_URL,Nn(process.env.NEXT_PUBLIC_CLERK_IS_SATELLITE),Nn(process.env.NEXT_PUBLIC_CLERK_TELEMETRY_DISABLED),Nn(process.env.NEXT_PUBLIC_CLERK_TELEMETRY_DEBUG),Nc(IA);var Nd=(...e)=>{let{data:t,errors:s}=IN(...e);if(s)throw s[0];return t};Nc(Np),Nc(IR);let Nh={i8:"14.2.4"},Nm=e=>{if(!e||"string"!=typeof e)return e;try{return(e||"").replace(/^(sk_(live|test)_)(.+?)(.{3})$/,"$1*********$4")}catch(e){return""}},Nf=e=>(Array.isArray(e)?e:[e]).map(e=>"string"==typeof e?Nm(e):JSON.stringify(Object.fromEntries(Object.entries(e).map(([e,t])=>[e,Nm(t)])),null,2)).join(", "),Ng=(e,t)=>()=>{let s=[],n=!1;return{enable:()=>{n=!0},debug:(...e)=>{n&&s.push(e.map(e=>"function"==typeof e?e():e))},commit:()=>{if(n){for(let n of(console.log(`[clerk debug start: ${e}]`),s)){let e=t(n);e=e.split("\n").map(e=>`  ${e}`).join("\n"),process.env.VERCEL&&(e=function(e,t){let s=new TextEncoder,n=new TextDecoder("utf-8"),i=s.encode(e).slice(0,4096);return n.decode(i).replace(/\uFFFD/g,"")}(e,0)),console.log(e)}console.log(`[clerk debug end: ${e}] (@clerk/nextjs=5.2.8,next=${Nh.i8})`)}}}},Nb=(e,t)=>(...s)=>{let n=("string"==typeof e?Ng(e,Nf):e)(),i=t(n);try{let e=i(...s);if("object"==typeof e&&"then"in e&&"function"==typeof e.then)return e.then(e=>(n.commit(),e)).catch(e=>{throw n.commit(),e});return n.commit(),e}catch(e){throw n.commit(),e}},Nx=(e="auth")=>`Clerk: ${e}() was called but Clerk can't detect usage of clerkMiddleware() (or the deprecated authMiddleware()). Please ensure the following:
-  clerkMiddleware() (or the deprecated authMiddleware()) is used in your Next.js Middleware.
- Your Middleware matcher is configured to match this route or page.
- If you are using the src directory, make sure the Middleware file is inside of it.

For more details, see https://clerk.com/docs/quickstarts/nextjs
`;var Ny=s(2100),Nv=s.n(Ny),N_=s(5676),Nw=s.n(N_),NS=s(3890),Nk=s.n(NS),NE=s(7070);function NO(e,t){var s;return((s=IV.Attributes[t])in e?e[s]:void 0)||NT(e,IV.Headers[t])}function NT(e,t){var s,n;return!function(e){try{let{headers:t,nextUrl:s,cookies:n}=e||{};return"function"==typeof(null==t?void 0:t.get)&&"function"==typeof(null==s?void 0:s.searchParams.get)&&"function"==typeof(null==n?void 0:n.get)}catch(e){return!1}}(e)?e.headers[t]||e.headers[t.toLowerCase()]||(null==(n=null==(s=e.socket)?void 0:s._httpMessage)?void 0:n.getHeader(t)):e.headers.get(t)}function NI(e){if(!e)return{};try{let t=Nv().decrypt(e,No||Nr).toString(Nw());return JSON.parse(t)}catch(e){throw Error("Clerk: Unable to decrypt request data, this usually means the encryption key is invalid. Ensure the encryption key is properly set. For more information, see: https://clerk.com/docs/references/nextjs/clerk-middleware#dynamic-keys. (code=encryption_key_invalid)")}}let NR=({noAuthStatusMessage:e,debugLoggerName:t})=>Nb(t,t=>(s,n)=>{"true"===NT(s,IV.Headers.EnableDebug)&&t.enable();let i=NO(s,"AuthToken"),r=NO(s,"AuthSignature"),a=NO(s,"AuthMessage"),o=NO(s,"AuthReason"),l=NO(s,"AuthStatus");if(t.debug("Headers debug",{authStatus:l,authMessage:a,authReason:o}),!l)throw Error(e);let c=NI(NT(s,IV.Headers.ClerkRequestData)),u={authStatus:l,apiUrl:Nl,apiVersion:Ni,authMessage:a,secretKey:(null==n?void 0:n.secretKey)||c.secretKey||Nr,authReason:o};if(t.debug("Options debug",u),l===RK.SignedIn){!function(e,t,s){if(!s||Nk()(e,t).toString()!==s)throw Error("Clerk: Unable to verify request, this usually means the Clerk middleware did not run. Ensure Clerk's middleware is properly integrated and matches the current route. For more information, see: https://clerk.com/docs/nextjs/middleware. (code=auth_signature_invalid)")}(i,u.secretKey,r);let e=Nd(i);return t.debug("JWT debug",e.raw.text),Rq(u,e.raw.text,e.payload)}return Rz(u)});NR({debugLoggerName:"getAuth()",noAuthStatusMessage:Nx("getAuth")});let NN={Headers:{NextRewrite:"x-middleware-rewrite",NextResume:"x-middleware-next",NextRedirect:"Location",NextUrl:"next-url",NextAction:"next-action",NextjsData:"x-nextjs-data"}},NA=e=>{let{redirectToSignIn:t,authObject:s,redirect:n,notFound:i,request:r}=e;return(...e)=>{var a,o,l,c,u,p;let d=(null==(a=e[0])?void 0:a.unauthenticatedUrl)||(null==(o=e[0])?void 0:o.unauthorizedUrl)?void 0:e[0],h=(null==(l=e[0])?void 0:l.unauthenticatedUrl)||(null==(c=e[1])?void 0:c.unauthenticatedUrl),m=(null==(u=e[0])?void 0:u.unauthorizedUrl)||(null==(p=e[1])?void 0:p.unauthorizedUrl),f=()=>m?n(m):i();return s.userId?d?"function"==typeof d?d(s.has)?s:f():s.has(d)?s:f():s:h?n(h):NM(r)?t():i()}},NC=e=>{var t,s;return!!e.headers.get(NN.Headers.NextUrl)&&((null==(t=e.headers.get(IV.Headers.Accept))?void 0:t.includes("text/x-component"))||(null==(s=e.headers.get(IV.Headers.ContentType))?void 0:s.includes("multipart/form-data"))||!!e.headers.get(NN.Headers.NextAction))},NM=e=>{var t;return"document"===e.headers.get(IV.Headers.SecFetchDest)||"iframe"===e.headers.get(IV.Headers.SecFetchDest)||(null==(t=e.headers.get(IV.Headers.Accept))?void 0:t.includes("text/html"))||NF(e)||NL(e)},NF=e=>!!e.headers.get(NN.Headers.NextUrl)&&!NC(e)||Nj(),Nj=()=>{let e=globalThis.fetch;return!!(function(e){return"__nextPatched"in e&&!0===e.__nextPatched}(e)&&e.__nextGetStaticStore().getStore().pagePath)},NL=e=>!!e.headers.get(NN.Headers.NextjsData),NP=e=>{if(!(e instanceof Error)||!("message"in e))return!1;let{message:t}=e,s=t.toLowerCase(),n=s.includes("dynamic server usage"),i=s.includes("this page needs to bail out of prerendering");return/Route .*? needs to bail out of prerendering at this point because it used .*?./.test(t)||n||i},NU=()=>{try{let{headers:e}=s(1615);return new NE.NextRequest("https://placeholder.com",{headers:e()})}catch(e){if(e&&NP(e))throw e;throw Error(`Clerk: auth() and currentUser() are only supported in App Router (/app directory).
If you're using /pages, try getAuth() instead.
Original error: ${e}`)}},ND=()=>{s(8769);let e=NU(),t=NR({debugLoggerName:"auth()",noAuthStatusMessage:Nx()})(e),n=NO(e,"ClerkUrl"),i=(t={})=>{let s=RY(e),i=s.clerkUrl.searchParams.get(IV.QueryParameters.DevBrowser)||s.cookies.get(IV.Cookies.DevBrowser),r=NI(NT(e,IV.Headers.ClerkRequestData));return Ne({redirectAdapter:Nt.redirect,devBrowserToken:i,baseUrl:s.clerkUrl.toString(),publishableKey:r.publishableKey||Na,signInUrl:r.signInUrl||"/sign-in",signUpUrl:r.signUpUrl||"/sign-up"}).redirectToSignIn({returnBackUrl:null===t.returnBackUrl?"":t.returnBackUrl||(null==n?void 0:n.toString())})},r=NA({request:e,authObject:t,redirectToSignIn:i,notFound:Nt.notFound,redirect:Nt.redirect});return Object.assign(t,{protect:r,redirectToSignIn:i})},N$=()=>{let{userId:e}=ND();if(!e)throw Error("N\xe3o autorizado!");return{userId:e}},{GET:Nq,POST:Nz}=(e=>{let t=Is(e,"nextjs-app");return{POST:e=>t.POST(e),GET:e=>t.GET(e)}})({router:{profileImage:(function e(t={}){let s={routerConfig:{image:{maxFileSize:"4MB"}},inputParser:{parse:()=>void 0,_input:void 0,_output:void 0},middleware:()=>({}),onUploadError:()=>({}),errorFormatter:t.errorFormatter??In,...t};return{input:t=>e({...s,inputParser:t}),middleware:t=>e({...s,middleware:t}),onUploadComplete:e=>({_def:s,resolver:e}),onUploadError:t=>e({...s,onUploadError:t})}})({routerConfig:{image:{maxFileSize:"4MB",maxFileCount:1}},...d}).middleware(()=>N$()).onUploadComplete(()=>{})}}),NB=new m.AppRouteRouteModule({definition:{kind:f.x.APP_ROUTE,page:"/api/uploadthing/route",pathname:"/api/uploadthing",filename:"route",bundlePath:"app/api/uploadthing/route"},resolvedPagePath:"/home/bsilva/Code/arvoredo_arraiolos/arvoredo-arraiolos-backoffice/app/api/uploadthing/route.ts",nextConfigOutput:"",userland:h}),{requestAsyncStorage:NJ,staticGenerationAsyncStorage:NK,serverHooks:NH}=NB,NV="/api/uploadthing/route";function NW(){return(0,g.patchFetch)({serverHooks:NH,staticGenerationAsyncStorage:NK})}},3183:(e,t)=>{"use strict";function s(e){return -1!==e.indexOf("%")?decodeURIComponent(e):e}/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.Q=function(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");for(var n={},i=(t||{}).decode||s,r=0;r<e.length;){var a=e.indexOf("=",r);if(-1===a)break;var o=e.indexOf(";",r);if(-1===o)o=e.length;else if(o<a){r=e.lastIndexOf(";",a-1)+1;continue}var l=e.slice(r,a).trim();if(void 0===n[l]){var c=e.slice(a+1,o).trim();34===c.charCodeAt(0)&&(c=c.slice(1,-1)),n[l]=function(e,t){try{return t(e)}catch(t){return e}}(c,i)}r=o+1}return n},Object.prototype.toString},2100:function(e,t,s){var n;n=function(e){var t,s,n,i,r,a,o,l,c,u,p,d,h,m;return t=e.lib.BlockCipher,s=e.algo,n=[],i=[],r=[],a=[],o=[],l=[],c=[],u=[],p=[],d=[],function(){for(var e=[],t=0;t<256;t++)t<128?e[t]=t<<1:e[t]=t<<1^283;for(var s=0,h=0,t=0;t<256;t++){var m=h^h<<1^h<<2^h<<3^h<<4;m=m>>>8^255&m^99,n[s]=m,i[m]=s;var f=e[s],g=e[f],b=e[g],x=257*e[m]^16843008*m;r[s]=x<<24|x>>>8,a[s]=x<<16|x>>>16,o[s]=x<<8|x>>>24,l[s]=x;var x=16843009*b^65537*g^257*f^16843008*s;c[m]=x<<24|x>>>8,u[m]=x<<16|x>>>16,p[m]=x<<8|x>>>24,d[m]=x,s?(s=f^e[e[e[b^f]]],h^=e[e[h]]):s=h=1}}(),h=[0,1,2,4,8,16,32,64,128,27,54],m=s.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e,t=this._keyPriorReset=this._key,s=t.words,i=t.sigBytes/4,r=((this._nRounds=i+6)+1)*4,a=this._keySchedule=[],o=0;o<r;o++)o<i?a[o]=s[o]:(e=a[o-1],o%i?i>6&&o%i==4&&(e=n[e>>>24]<<24|n[e>>>16&255]<<16|n[e>>>8&255]<<8|n[255&e]):e=(n[(e=e<<8|e>>>24)>>>24]<<24|n[e>>>16&255]<<16|n[e>>>8&255]<<8|n[255&e])^h[o/i|0]<<24,a[o]=a[o-i]^e);for(var l=this._invKeySchedule=[],m=0;m<r;m++){var o=r-m;if(m%4)var e=a[o];else var e=a[o-4];m<4||o<=4?l[m]=e:l[m]=c[n[e>>>24]]^u[n[e>>>16&255]]^p[n[e>>>8&255]]^d[n[255&e]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,r,a,o,l,n)},decryptBlock:function(e,t){var s=e[t+1];e[t+1]=e[t+3],e[t+3]=s,this._doCryptBlock(e,t,this._invKeySchedule,c,u,p,d,i);var s=e[t+1];e[t+1]=e[t+3],e[t+3]=s},_doCryptBlock:function(e,t,s,n,i,r,a,o){for(var l=this._nRounds,c=e[t]^s[0],u=e[t+1]^s[1],p=e[t+2]^s[2],d=e[t+3]^s[3],h=4,m=1;m<l;m++){var f=n[c>>>24]^i[u>>>16&255]^r[p>>>8&255]^a[255&d]^s[h++],g=n[u>>>24]^i[p>>>16&255]^r[d>>>8&255]^a[255&c]^s[h++],b=n[p>>>24]^i[d>>>16&255]^r[c>>>8&255]^a[255&u]^s[h++],x=n[d>>>24]^i[c>>>16&255]^r[u>>>8&255]^a[255&p]^s[h++];c=f,u=g,p=b,d=x}var f=(o[c>>>24]<<24|o[u>>>16&255]<<16|o[p>>>8&255]<<8|o[255&d])^s[h++],g=(o[u>>>24]<<24|o[p>>>16&255]<<16|o[d>>>8&255]<<8|o[255&c])^s[h++],b=(o[p>>>24]<<24|o[d>>>16&255]<<16|o[c>>>8&255]<<8|o[255&u])^s[h++],x=(o[d>>>24]<<24|o[c>>>16&255]<<16|o[u>>>8&255]<<8|o[255&p])^s[h++];e[t]=f,e[t+1]=g,e[t+2]=b,e[t+3]=x},keySize:8}),e.AES=t._createHelper(m),e.AES},e.exports=n(s(9878),s(6104),s(9087),s(4465),s(3517))},3517:function(e,t,s){var n;n=function(e){var t,s,n,i,r,a,o,l,c,u,p,d,h,m,f,g,b;e.lib.Cipher||(s=(t=e.lib).Base,n=t.WordArray,i=t.BufferedBlockAlgorithm,(r=e.enc).Utf8,a=r.Base64,o=e.algo.EvpKDF,l=t.Cipher=i.extend({cfg:s.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,s){this.cfg=this.cfg.extend(s),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?b:f}return function(t){return{encrypt:function(s,n,i){return e(n).encrypt(t,s,n,i)},decrypt:function(s,n,i){return e(n).decrypt(t,s,n,i)}}}}()}),t.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),c=e.mode={},u=t.BlockCipherMode=s.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=c.CBC=function(){var e=u.extend();function t(e,t,s){var n,i=this._iv;i?(n=i,this._iv=void 0):n=this._prevBlock;for(var r=0;r<s;r++)e[t+r]^=n[r]}return e.Encryptor=e.extend({processBlock:function(e,s){var n=this._cipher,i=n.blockSize;t.call(this,e,s,i),n.encryptBlock(e,s),this._prevBlock=e.slice(s,s+i)}}),e.Decryptor=e.extend({processBlock:function(e,s){var n=this._cipher,i=n.blockSize,r=e.slice(s,s+i);n.decryptBlock(e,s),t.call(this,e,s,i),this._prevBlock=r}}),e}(),d=(e.pad={}).Pkcs7={pad:function(e,t){for(var s=4*t,i=s-e.sigBytes%s,r=i<<24|i<<16|i<<8|i,a=[],o=0;o<i;o+=4)a.push(r);var l=n.create(a,i);e.concat(l)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},t.BlockCipher=l.extend({cfg:l.cfg.extend({mode:p,padding:d}),reset:function(){l.reset.call(this);var e,t=this.cfg,s=t.iv,n=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=n.createEncryptor:(e=n.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,s&&s.words):(this._mode=e.call(n,this,s&&s.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),h=t.CipherParams=s.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),m=(e.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,s=e.salt;return(s?n.create([1398893684,1701076831]).concat(s).concat(t):t).toString(a)},parse:function(e){var t,s=a.parse(e),i=s.words;return 1398893684==i[0]&&1701076831==i[1]&&(t=n.create(i.slice(2,4)),i.splice(0,4),s.sigBytes-=16),h.create({ciphertext:s,salt:t})}},f=t.SerializableCipher=s.extend({cfg:s.extend({format:m}),encrypt:function(e,t,s,n){n=this.cfg.extend(n);var i=e.createEncryptor(s,n),r=i.finalize(t),a=i.cfg;return h.create({ciphertext:r,key:s,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,s,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(s,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),g=(e.kdf={}).OpenSSL={execute:function(e,t,s,i,r){if(i||(i=n.random(8)),r)var a=o.create({keySize:t+s,hasher:r}).compute(e,i);else var a=o.create({keySize:t+s}).compute(e,i);var l=n.create(a.words.slice(t),4*s);return a.sigBytes=4*t,h.create({key:a,iv:l,salt:i})}},b=t.PasswordBasedCipher=f.extend({cfg:f.cfg.extend({kdf:g}),encrypt:function(e,t,s,n){var i=(n=this.cfg.extend(n)).kdf.execute(s,e.keySize,e.ivSize,n.salt,n.hasher);n.iv=i.iv;var r=f.encrypt.call(this,e,t,i.key,n);return r.mixIn(i),r},decrypt:function(e,t,s,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var i=n.kdf.execute(s,e.keySize,e.ivSize,t.salt,n.hasher);return n.iv=i.iv,f.decrypt.call(this,e,t,i.key,n)}}))},e.exports=n(s(9878),s(4465))},9878:function(e,t,s){var n;n=function(){var e=e||function(e,t){if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&"undefined"!=typeof global&&global.crypto&&(n=global.crypto),!n)try{n=s(6113)}catch(e){}var n,i=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(e){}}throw Error("Native crypto module could not be used to get secure random number.")},r=Object.create||function(){function e(){}return function(t){var s;return e.prototype=t,s=new e,e.prototype=null,s}}(),a={},o=a.lib={},l=o.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=o.WordArray=l.extend({init:function(e,s){e=this.words=e||[],t!=s?this.sigBytes=s:this.sigBytes=4*e.length},toString:function(e){return(e||p).stringify(this)},concat:function(e){var t=this.words,s=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var r=0;r<i;r++){var a=s[r>>>2]>>>24-r%4*8&255;t[n+r>>>2]|=a<<24-(n+r)%4*8}else for(var o=0;o<i;o+=4)t[n+o>>>2]=s[o>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,s=this.sigBytes;t[s>>>2]&=4294967295<<32-s%4*8,t.length=e.ceil(s/4)},clone:function(){var e=l.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],s=0;s<e;s+=4)t.push(i());return new c.init(t,e)}}),u=a.enc={},p=u.Hex={stringify:function(e){for(var t=e.words,s=e.sigBytes,n=[],i=0;i<s;i++){var r=t[i>>>2]>>>24-i%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,s=[],n=0;n<t;n+=2)s[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new c.init(s,t/2)}},d=u.Latin1={stringify:function(e){for(var t=e.words,s=e.sigBytes,n=[],i=0;i<s;i++){var r=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(r))}return n.join("")},parse:function(e){for(var t=e.length,s=[],n=0;n<t;n++)s[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new c.init(s,t)}},h=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},m=o.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var s,n=this._data,i=n.words,r=n.sigBytes,a=this.blockSize,o=r/(4*a),l=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*a,u=e.min(4*l,r);if(l){for(var p=0;p<l;p+=a)this._doProcessBlock(i,p);s=i.splice(0,l),n.sigBytes-=u}return new c.init(s,u)},clone:function(){var e=l.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});o.Hasher=m.extend({cfg:l.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){m.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,s){return new e.init(s).finalize(t)}},_createHmacHelper:function(e){return function(t,s){return new f.HMAC.init(e,s).finalize(t)}}});var f=a.algo={};return a}(Math);return e},e.exports=n()},6104:function(e,t,s){var n;n=function(e){var t;return t=e.lib.WordArray,e.enc.Base64={stringify:function(e){var t=e.words,s=e.sigBytes,n=this._map;e.clamp();for(var i=[],r=0;r<s;r+=3)for(var a=(t[r>>>2]>>>24-r%4*8&255)<<16|(t[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t[r+2>>>2]>>>24-(r+2)%4*8&255,o=0;o<4&&r+.75*o<s;o++)i.push(n.charAt(a>>>6*(3-o)&63));var l=n.charAt(64);if(l)for(;i.length%4;)i.push(l);return i.join("")},parse:function(e){var s=e.length,n=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var r=0;r<n.length;r++)i[n.charCodeAt(r)]=r}var a=n.charAt(64);if(a){var o=e.indexOf(a);-1!==o&&(s=o)}return function(e,s,n){for(var i=[],r=0,a=0;a<s;a++)if(a%4){var o=n[e.charCodeAt(a-1)]<<a%4*2|n[e.charCodeAt(a)]>>>6-a%4*2;i[r>>>2]|=o<<24-r%4*8,r++}return t.create(i,r)}(e,s,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.enc.Base64},e.exports=n(s(9878))},5676:function(e,t,s){var n;n=function(e){return e.enc.Utf8},e.exports=n(s(9878))},4465:function(e,t,s){var n;n=function(e){var t,s,n,i,r,a;return s=(t=e.lib).Base,n=t.WordArray,r=(i=e.algo).MD5,a=i.EvpKDF=s.extend({cfg:s.extend({keySize:4,hasher:r,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var s,i=this.cfg,r=i.hasher.create(),a=n.create(),o=a.words,l=i.keySize,c=i.iterations;o.length<l;){s&&r.update(s),s=r.update(e).finalize(t),r.reset();for(var u=1;u<c;u++)s=r.finalize(s),r.reset();a.concat(s)}return a.sigBytes=4*l,a}}),e.EvpKDF=function(e,t,s){return a.create(s).compute(e,t)},e.EvpKDF},e.exports=n(s(9878),s(4766),s(7207))},3890:function(e,t,s){var n;n=function(e){return e.HmacSHA1},e.exports=n(s(9878),s(4766),s(7207))},7207:function(e,t,s){var n;n=function(e){var t,s;t=e.lib.Base,s=e.enc.Utf8,e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=s.parse(t));var n=e.blockSize,i=4*n;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var r=this._oKey=t.clone(),a=this._iKey=t.clone(),o=r.words,l=a.words,c=0;c<n;c++)o[c]^=1549556828,l[c]^=909522486;r.sigBytes=a.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,s=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(s))}})},e.exports=n(s(9878))},9087:function(e,t,s){var n;n=function(e){return function(t){var s=e.lib,n=s.WordArray,i=s.Hasher,r=e.algo,a=[];!function(){for(var e=0;e<64;e++)a[e]=4294967296*t.abs(t.sin(e+1))|0}();var o=r.MD5=i.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var s=0;s<16;s++){var n=t+s,i=e[n];e[n]=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360}var r=this._hash.words,o=e[t+0],d=e[t+1],h=e[t+2],m=e[t+3],f=e[t+4],g=e[t+5],b=e[t+6],x=e[t+7],y=e[t+8],v=e[t+9],_=e[t+10],w=e[t+11],S=e[t+12],k=e[t+13],E=e[t+14],O=e[t+15],T=r[0],I=r[1],R=r[2],N=r[3];T=l(T,I,R,N,o,7,a[0]),N=l(N,T,I,R,d,12,a[1]),R=l(R,N,T,I,h,17,a[2]),I=l(I,R,N,T,m,22,a[3]),T=l(T,I,R,N,f,7,a[4]),N=l(N,T,I,R,g,12,a[5]),R=l(R,N,T,I,b,17,a[6]),I=l(I,R,N,T,x,22,a[7]),T=l(T,I,R,N,y,7,a[8]),N=l(N,T,I,R,v,12,a[9]),R=l(R,N,T,I,_,17,a[10]),I=l(I,R,N,T,w,22,a[11]),T=l(T,I,R,N,S,7,a[12]),N=l(N,T,I,R,k,12,a[13]),R=l(R,N,T,I,E,17,a[14]),I=l(I,R,N,T,O,22,a[15]),T=c(T,I,R,N,d,5,a[16]),N=c(N,T,I,R,b,9,a[17]),R=c(R,N,T,I,w,14,a[18]),I=c(I,R,N,T,o,20,a[19]),T=c(T,I,R,N,g,5,a[20]),N=c(N,T,I,R,_,9,a[21]),R=c(R,N,T,I,O,14,a[22]),I=c(I,R,N,T,f,20,a[23]),T=c(T,I,R,N,v,5,a[24]),N=c(N,T,I,R,E,9,a[25]),R=c(R,N,T,I,m,14,a[26]),I=c(I,R,N,T,y,20,a[27]),T=c(T,I,R,N,k,5,a[28]),N=c(N,T,I,R,h,9,a[29]),R=c(R,N,T,I,x,14,a[30]),I=c(I,R,N,T,S,20,a[31]),T=u(T,I,R,N,g,4,a[32]),N=u(N,T,I,R,y,11,a[33]),R=u(R,N,T,I,w,16,a[34]),I=u(I,R,N,T,E,23,a[35]),T=u(T,I,R,N,d,4,a[36]),N=u(N,T,I,R,f,11,a[37]),R=u(R,N,T,I,x,16,a[38]),I=u(I,R,N,T,_,23,a[39]),T=u(T,I,R,N,k,4,a[40]),N=u(N,T,I,R,o,11,a[41]),R=u(R,N,T,I,m,16,a[42]),I=u(I,R,N,T,b,23,a[43]),T=u(T,I,R,N,v,4,a[44]),N=u(N,T,I,R,S,11,a[45]),R=u(R,N,T,I,O,16,a[46]),I=u(I,R,N,T,h,23,a[47]),T=p(T,I,R,N,o,6,a[48]),N=p(N,T,I,R,x,10,a[49]),R=p(R,N,T,I,E,15,a[50]),I=p(I,R,N,T,g,21,a[51]),T=p(T,I,R,N,S,6,a[52]),N=p(N,T,I,R,m,10,a[53]),R=p(R,N,T,I,_,15,a[54]),I=p(I,R,N,T,d,21,a[55]),T=p(T,I,R,N,y,6,a[56]),N=p(N,T,I,R,O,10,a[57]),R=p(R,N,T,I,b,15,a[58]),I=p(I,R,N,T,k,21,a[59]),T=p(T,I,R,N,f,6,a[60]),N=p(N,T,I,R,w,10,a[61]),R=p(R,N,T,I,h,15,a[62]),I=p(I,R,N,T,v,21,a[63]),r[0]=r[0]+T|0,r[1]=r[1]+I|0,r[2]=r[2]+R|0,r[3]=r[3]+N|0},_doFinalize:function(){var e=this._data,s=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;s[i>>>5]|=128<<24-i%32;var r=t.floor(n/4294967296);s[(i+64>>>9<<4)+15]=(r<<8|r>>>24)&16711935|(r<<24|r>>>8)&4278255360,s[(i+64>>>9<<4)+14]=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360,e.sigBytes=(s.length+1)*4,this._process();for(var a=this._hash,o=a.words,l=0;l<4;l++){var c=o[l];o[l]=(c<<8|c>>>24)&16711935|(c<<24|c>>>8)&4278255360}return a},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,s,n,i,r,a){var o=e+(t&s|~t&n)+i+a;return(o<<r|o>>>32-r)+t}function c(e,t,s,n,i,r,a){var o=e+(t&n|s&~n)+i+a;return(o<<r|o>>>32-r)+t}function u(e,t,s,n,i,r,a){var o=e+(t^s^n)+i+a;return(o<<r|o>>>32-r)+t}function p(e,t,s,n,i,r,a){var o=e+(s^(t|~n))+i+a;return(o<<r|o>>>32-r)+t}e.MD5=i._createHelper(o),e.HmacMD5=i._createHmacHelper(o)}(Math),e.MD5},e.exports=n(s(9878))},4766:function(e,t,s){var n;n=function(e){var t,s,n,i,r,a;return s=(t=e.lib).WordArray,n=t.Hasher,i=e.algo,r=[],a=i.SHA1=n.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var s=this._hash.words,n=s[0],i=s[1],a=s[2],o=s[3],l=s[4],c=0;c<80;c++){if(c<16)r[c]=0|e[t+c];else{var u=r[c-3]^r[c-8]^r[c-14]^r[c-16];r[c]=u<<1|u>>>31}var p=(n<<5|n>>>27)+l+r[c];c<20?p+=(i&a|~i&o)+1518500249:c<40?p+=(i^a^o)+1859775393:c<60?p+=(i&a|i&o|a&o)-1894007588:p+=(i^a^o)-899497514,l=o,o=a,a=i<<30|i>>>2,i=n,n=p}s[0]=s[0]+n|0,s[1]=s[1]+i|0,s[2]=s[2]+a|0,s[3]=s[3]+o|0,s[4]=s[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,s=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[(n+64>>>9<<4)+14]=Math.floor(s/4294967296),t[(n+64>>>9<<4)+15]=s,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),e.SHA1=n._createHelper(a),e.HmacSHA1=n._createHmacHelper(a),e.SHA1},e.exports=n(s(9878))},9245:e=>{"use strict";let t=e=>"object"==typeof e&&null!==e,s=Symbol("skip"),n=e=>t(e)&&!(e instanceof RegExp)&&!(e instanceof Error)&&!(e instanceof Date),i=(e,t,r,a=new WeakMap)=>{if(r={deep:!1,target:{},...r},a.has(e))return a.get(e);a.set(e,r.target);let{target:o}=r;delete r.target;let l=e=>e.map(e=>n(e)?i(e,t,r,a):e);if(Array.isArray(e))return l(e);for(let[c,u]of Object.entries(e)){let p=t(c,u,e);if(p===s)continue;let[d,h,{shouldRecurse:m=!0}={}]=p;"__proto__"!==d&&(r.deep&&m&&n(h)&&(h=Array.isArray(h)?l(h):i(h,t,r,a)),o[d]=h)}return o};e.exports=(e,s,n)=>{if(!t(e))throw TypeError(`Expected an object, got \`${e}\` (${typeof e})`);return i(e,s,n)},e.exports.mapObjectSkip=s},1615:(e,t,s)=>{"use strict";s.r(t);var n=s(8757),i={};for(let e in n)"default"!==e&&(i[e]=()=>n[e]);s.d(t,i)},8585:(e,t,s)=>{"use strict";var n=s(1085);s.o(n,"notFound")&&s.d(t,{notFound:function(){return n.notFound}}),s.o(n,"redirect")&&s.d(t,{redirect:function(){return n.redirect}})},3085:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraftMode",{enumerable:!0,get:function(){return r}});let n=s(5869),i=s(6278);class r{get isEnabled(){return this._provider.isEnabled}enable(){let e=n.staticGenerationAsyncStorage.getStore();return e&&(0,i.trackDynamicDataAccessed)(e,"draftMode().enable()"),this._provider.enable()}disable(){let e=n.staticGenerationAsyncStorage.getStore();return e&&(0,i.trackDynamicDataAccessed)(e,"draftMode().disable()"),this._provider.disable()}constructor(e){this._provider=e}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8757:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{cookies:function(){return d},draftMode:function(){return h},headers:function(){return p}});let n=s(8996),i=s(3047),r=s(2044),a=s(2934),o=s(3085),l=s(6278),c=s(5869),u=s(4580);function p(){let e="headers",t=c.staticGenerationAsyncStorage.getStore();if(t){if(t.forceStatic)return i.HeadersAdapter.seal(new Headers({}));(0,l.trackDynamicDataAccessed)(t,e)}return(0,u.getExpectedRequestStore)(e).headers}function d(){let e="cookies",t=c.staticGenerationAsyncStorage.getStore();if(t){if(t.forceStatic)return n.RequestCookiesAdapter.seal(new r.RequestCookies(new Headers({})));(0,l.trackDynamicDataAccessed)(t,e)}let s=(0,u.getExpectedRequestStore)(e),i=a.actionAsyncStorage.getStore();return(null==i?void 0:i.isAction)||(null==i?void 0:i.isAppRoute)?s.mutableCookies:s.cookies}function h(){let e=(0,u.getExpectedRequestStore)("draftMode");return new o.DraftMode(e.draftMode)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1085:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{ReadonlyURLSearchParams:function(){return a},RedirectType:function(){return n.RedirectType},notFound:function(){return i.notFound},permanentRedirect:function(){return n.permanentRedirect},redirect:function(){return n.redirect}});let n=s(3953),i=s(6399);class r extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class a extends URLSearchParams{append(){throw new r}delete(){throw new r}set(){throw new r}sort(){throw new r}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{isNotFoundError:function(){return i},notFound:function(){return n}});let s="NEXT_NOT_FOUND";function n(){let e=Error(s);throw e.digest=s,e}function i(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===s}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8586:(e,t)=>{"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return s}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(s||(s={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3953:(e,t,s)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{RedirectType:function(){return n},getRedirectError:function(){return l},getRedirectStatusCodeFromError:function(){return m},getRedirectTypeFromError:function(){return h},getURLFromRedirectError:function(){return d},isRedirectError:function(){return p},permanentRedirect:function(){return u},redirect:function(){return c}});let i=s(4580),r=s(2934),a=s(8586),o="NEXT_REDIRECT";function l(e,t,s){void 0===s&&(s=a.RedirectStatusCode.TemporaryRedirect);let n=Error(o);n.digest=o+";"+t+";"+e+";"+s+";";let r=i.requestAsyncStorage.getStore();return r&&(n.mutableCookies=r.mutableCookies),n}function c(e,t){void 0===t&&(t="replace");let s=r.actionAsyncStorage.getStore();throw l(e,t,(null==s?void 0:s.isAction)?a.RedirectStatusCode.SeeOther:a.RedirectStatusCode.TemporaryRedirect)}function u(e,t){void 0===t&&(t="replace");let s=r.actionAsyncStorage.getStore();throw l(e,t,(null==s?void 0:s.isAction)?a.RedirectStatusCode.SeeOther:a.RedirectStatusCode.PermanentRedirect)}function p(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,s,n,i]=e.digest.split(";",4),r=Number(i);return t===o&&("replace"===s||"push"===s)&&"string"==typeof n&&!isNaN(r)&&r in a.RedirectStatusCode}function d(e){return p(e)?e.digest.split(";",3)[2]:null}function h(e){if(!p(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function m(e){if(!p(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(n||(n={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8769:()=>{},3047:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{HeadersAdapter:function(){return r},ReadonlyHeadersError:function(){return i}});let n=s(8238);class i extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new i}}class r extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,s,i){if("symbol"==typeof s)return n.ReflectAdapter.get(t,s,i);let r=s.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===r);if(void 0!==a)return n.ReflectAdapter.get(t,a,i)},set(t,s,i,r){if("symbol"==typeof s)return n.ReflectAdapter.set(t,s,i,r);let a=s.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===a);return n.ReflectAdapter.set(t,o??s,i,r)},has(t,s){if("symbol"==typeof s)return n.ReflectAdapter.has(t,s);let i=s.toLowerCase(),r=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0!==r&&n.ReflectAdapter.has(t,r)},deleteProperty(t,s){if("symbol"==typeof s)return n.ReflectAdapter.deleteProperty(t,s);let i=s.toLowerCase(),r=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0===r||n.ReflectAdapter.deleteProperty(t,r)}})}static seal(e){return new Proxy(e,{get(e,t,s){switch(t){case"append":case"delete":case"set":return i.callable;default:return n.ReflectAdapter.get(e,t,s)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new r(e)}append(e,t){let s=this.headers[e];"string"==typeof s?this.headers[e]=[s,t]:Array.isArray(s)?s.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[s,n]of this.entries())e.call(t,n,s,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),s=this.get(t);yield[t,s]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},8238:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReflectAdapter",{enumerable:!0,get:function(){return s}});class s{static get(e,t,s){let n=Reflect.get(e,t,s);return"function"==typeof n?n.bind(e):n}static set(e,t,s,n){return Reflect.set(e,t,s,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}},8996:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{MutableRequestCookiesAdapter:function(){return p},ReadonlyRequestCookiesError:function(){return a},RequestCookiesAdapter:function(){return o},appendMutableCookies:function(){return u},getModifiedCookieValues:function(){return c}});let n=s(2044),i=s(8238),r=s(5869);class a extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options")}static callable(){throw new a}}class o{static seal(e){return new Proxy(e,{get(e,t,s){switch(t){case"clear":case"delete":case"set":return a.callable;default:return i.ReflectAdapter.get(e,t,s)}}})}}let l=Symbol.for("next.mutated.cookies");function c(e){let t=e[l];return t&&Array.isArray(t)&&0!==t.length?t:[]}function u(e,t){let s=c(t);if(0===s.length)return!1;let i=new n.ResponseCookies(e),r=i.getAll();for(let e of s)i.set(e);for(let e of r)i.set(e);return!0}class p{static wrap(e,t){let s=new n.ResponseCookies(new Headers);for(let t of e.getAll())s.set(t);let a=[],o=new Set,c=()=>{let e=r.staticGenerationAsyncStorage.getStore();if(e&&(e.pathWasRevalidated=!0),a=s.getAll().filter(e=>o.has(e.name)),t){let e=[];for(let t of a){let s=new n.ResponseCookies(new Headers);s.set(t),e.push(s.toString())}t(e)}};return new Proxy(s,{get(e,t,s){switch(t){case l:return a;case"delete":return function(...t){o.add("string"==typeof t[0]?t[0]:t[0].name);try{e.delete(...t)}finally{c()}};case"set":return function(...t){o.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t)}finally{c()}};default:return i.ReflectAdapter.get(e,t,s)}}})}}},475:(e,t,s)=>{"use strict";s.r(t),s.d(t,{snakeCase:()=>l});var n=function(){return(n=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++)for(var i in t=arguments[s])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function i(e){return e.toLowerCase()}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var r=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],a=/[^A-Z0-9]+/gi;function o(e,t,s){return t instanceof RegExp?e.replace(t,s):t.reduce(function(e,t){return e.replace(t,s)},e)}function l(e,t){var s;return void 0===t&&(t={}),void 0===(s=n({delimiter:"_"},t))&&(s={}),function(e,t){void 0===t&&(t={});for(var s=t.splitRegexp,n=t.stripRegexp,l=t.transform,c=t.delimiter,u=o(o(e,void 0===s?r:s,"$1\0$2"),void 0===n?a:n,"\0"),p=0,d=u.length;"\0"===u.charAt(p);)p++;for(;"\0"===u.charAt(d-1);)d--;return u.slice(p,d).split("\0").map(void 0===l?i:l).join(void 0===c?" ":c)}(e,n({delimiter:"."},s))}},1727:(e,t,s)=>{"use strict";let n=s(9245),{snakeCase:i}=s(475);e.exports=function(e,t){return n(e,function(e,s){return[t.exclude.some(function(t){return"string"==typeof t?t===e:t.test(e)})?e:i(e,t.parsingOptions),s]},t=Object.assign({deep:!0,exclude:[],parsingOptions:{}},t))}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),n=t.X(0,[948,972],()=>s(9383));module.exports=n})();